(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index~21833f8f"],{"0382":function(e,t,n){},"0607":function(e,t,n){"use strict";var a=n("4490"),o=n.n(a);o.a},"0913":function(e,t,n){"use strict";var a=n("0382"),o=n.n(a);o.a},"20ad":function(e,t,n){},"2bd9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"announcementCustomModal",attrs:{width:e.modelStyle.width,visible:e.visible,bodyStyle:e.bodyStyle,destroyOnClose:""},on:{cancel:e.handleCancel}},[n("template",{slot:"title"},[n("a-button",{staticClass:"custom-btn",attrs:{icon:"fullscreen"},on:{click:e.handleClickToggleFullScreen}})],1),n("template",{slot:"footer"},[n("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("关闭")]),"url"===e.record.openType&&"1"!==e.record.readFlag?n("a-button",{attrs:{type:"primary"},on:{click:e.toHandle}},[e._v("去处理")]):e._e()],1),n("a-card",{staticClass:"daily-article",attrs:{loading:e.loading}},[n("a-card-meta",{attrs:{title:e.record.titile,description:"发布人："+e.record.sender+" 发布时间： "+e.record.sendTime}}),n("a-divider"),n("span",{staticClass:"article-content",domProps:{innerHTML:e._s(e.record.msgContent)}})],1)],2)},o=[],r={name:"SysAnnouncementModal",components:{},data:function(){return{title:"通知消息",record:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,loading:!1,bodyStyle:{padding:"0",height:.8*window.innerHeight+"px","overflow-y":"auto"},modelStyle:{width:"60%",style:{top:"20px"},fullScreen:!1}}},created:function(){},methods:{detail:function(e){this.visible=!0,this.record=e},handleCancel:function(){this.visible=!1},handleClickToggleFullScreen:function(){var e=!this.modelStyle.fullScreen;e?(this.modelStyle.width="100%",this.modelStyle.style.top="20px"):(this.modelStyle.width="60%",this.modelStyle.style.top="50px"),this.modelStyle.fullScreen=e},toHandle:function(){"url"===this.record.openType&&"1"!==this.record.readFlag&&(this.visible=!1,this.$router.push({path:this.record.openPage}))}}},s=r,i=(n("0607"),n("6887"),n("2877")),c=Object(i["a"])(s,a,o,!1,null,"a8c8ca92",null);t["default"]=c.exports},4490:function(e,t,n){},"4df6":function(e,t,n){"use strict";var a=n("4fe9"),o=n.n(a);o.a},"4eaf":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.comp?n(e.comp,{ref:"compModel",tag:"component",attrs:{formData:e.formData}}):e._e()},o=[],r={name:"DynamicNotice",data:function(){return{compName:this.path}},computed:{comp:function(){var e=this;return this.path?function(){return n("1a5d")("./".concat(e.path,".vue"))}:null}},props:["path","formData"],methods:{detail:function(){var e=this;setTimeout((function(){e.path&&e.$refs.compModel.view(e.formData)}),200)}}},s=r,i=n("2877"),c=Object(i["a"])(s,a,o,!1,null,null,null);t["default"]=c.exports},"4fe7":function(e,t,n){"use strict";t["a"]={primaryColor:"#1890FF",navTheme:"dark",layout:"topmenu",contentWidth:"Fluid",fixedHeader:!1,fixSiderbar:!1,autoHideHeader:!0,colorWeak:!1,multipage:!0,storageOptions:{namespace:"pro__",name:"ls",storage:"local"}}},"4fe9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("3dfd"),o=n("c16e"),r=n.n(o),s=n("a18c"),i=n("4360"),c=n("b775"),l=(n("223d"),n("7f08"),n("9fb0")),u=n("4fe7"),d=n("dec5"),p=n("fdcf"),m=n("d77e"),h=n("267b"),f=n("888e"),_=n.n(f);try{Vue.use(MavonEditor)}catch(b){console.log(b)}try{axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"}catch(b){console.log(b)}try{Vue.prototype.$axios=axios,Vue.prototype.$qs=Qs}catch(b){console.log(b)}try{Vue.config.productionTip=!1}catch(b){console.log(b)}try{Vue.use(r.a,u["a"].storageOptions)}catch(b){console.log(b)}try{Vue.use(antd)}catch(b){console.log(b)}try{Vue.use(c["a"],s["a"])}catch(b){console.log(b)}try{Vue.use(ViserVue)}catch(b){console.log(b)}try{Vue.use(p["a"])}catch(b){console.log(b)}try{Vue.use(d["a"])}catch(b){console.log(b)}try{Vue.use(VueApexCharts)}catch(b){console.log(b)}try{Vue.component("apexchart",VueApexCharts)}catch(b){console.log(b)}try{Vue.use(window["vue-photo-preview"])}catch(b){console.log(b)}try{Vue.use(m["a"])}catch(b){console.log(b)}try{Vue.use(h["a"])}catch(b){console.log(b)}try{Vue.use(iview)}catch(b){console.log(b)}try{Vue.use(_.a,{mainClass:"pswp--minimal--dark",barsSize:{top:0,bottom:0},captionEl:!0,fullscreenEl:!0,shareEl:!1,bgOpacity:.99,tapToClose:!0,tapToToggleControls:!1})}catch(b){console.log(b)}try{Vue.prototype.$confirm_=Vue.prototype.$confirm,Vue.prototype.$message_=Vue.prototype.$message}catch(b){console.log(b)}try{Vue.use(Element)}catch(b){console.log(b)}new Vue({router:s["a"],store:i["a"],mounted:function(){i["a"].commit("SET_SIDEBAR_TYPE",Vue.ls.get(l["l"],!0)),i["a"].commit("TOGGLE_THEME",Vue.ls.get(l["j"],u["a"].navTheme)),i["a"].commit("TOGGLE_LAYOUT_MODE",Vue.ls.get(l["h"],u["a"].layout)),i["a"].commit("TOGGLE_FIXED_HEADER",Vue.ls.get(l["e"],u["a"].fixedHeader)),i["a"].commit("TOGGLE_FIXED_SIDERBAR",Vue.ls.get(l["g"],u["a"].fixSiderbar)),i["a"].commit("TOGGLE_CONTENT_WIDTH",Vue.ls.get(l["d"],u["a"].contentWidth)),i["a"].commit("TOGGLE_FIXED_HEADER_HIDDEN",Vue.ls.get(l["f"],u["a"].autoHideHeader)),i["a"].commit("TOGGLE_WEAK",Vue.ls.get(l["c"],u["a"].colorWeak)),i["a"].commit("TOGGLE_COLOR",Vue.ls.get(l["b"],u["a"].primaryColor)),i["a"].commit("SET_TOKEN",Vue.ls.get(l["a"])),i["a"].commit("SET_MULTI_PAGE",Vue.ls.get(l["i"],!0))},render:function(e){return e(a["default"])}}).$mount("#app")},5976:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a,o=n("f64c"),r=[{key:"薄暮",color:"#F5222D"},{key:"火山",color:"#FA541C"},{key:"日暮",color:"#FAAD14"},{key:"明青",color:"#13C2C2"},{key:"极光绿",color:"#52C41A"},{key:"拂晓蓝（默认）",color:"#1890FF"},{key:"极客蓝",color:"#2F54EB"},{key:"酱紫",color:"#722ED1"}],s=function(e){if(e){var t=o["a"].loading("正在编译主题！",0);if(console.info("正在编译主题!"),a)i();else{var n=document.createElement("link"),r=document.createElement("script"),s=document.createElement("script");n.setAttribute("rel","stylesheet/less"),n.setAttribute("href","/color.less"),r.innerHTML="\n      window.less = {\n        async: true,\n        env: 'production',\n        javascriptEnabled: true\n      };\n    ",s.src="https://gw.alipayobjects.com/os/lib/less.js/3.8.1/less.min.js",s.async=!0,s.onload=function(){i(),s.onload=null},document.body.appendChild(n),document.body.appendChild(r),document.body.appendChild(s),a=!0}}function i(){window.less&&window.less.modifyVars&&window.less.modifyVars({"@primary-color":e}).then((function(){t()})).catch((function(){o["a"].error("Failed to update theme"),t()}))}},i=function(e){e?document.body.classList.add("colorWeak"):document.body.classList.remove("colorWeak")}},6887:function(e,t,n){"use strict";var a=n("74eb"),o=n.n(a);o.a},"73f1":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__),_api_manage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("0fea"),_ShowAnnouncement__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2bd9"),_store___WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4360"),_DynamicNotice__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4eaf");__webpack_exports__["a"]={name:"HeaderNotice",components:{DynamicNotice:_DynamicNotice__WEBPACK_IMPORTED_MODULE_4__["default"],ShowAnnouncement:_ShowAnnouncement__WEBPACK_IMPORTED_MODULE_2__["default"]},data:function(){return{loadding:!1,url:{listCementByUser:"/sys/annountCement/listByUser",editCementSend:"/sys/sysAnnouncementSend/editByAnntIdAndUserId",queryById:"/sys/annountCement/queryById"},hovered:!1,announcement1:[],announcement2:[],msg1Count:"0",msg2Count:"0",msg1Title:"通知(0)",msg2Title:"",stopTimer:!1,websock:null,lockReconnect:!1,heartCheck:null,formData:{},openPath:""}},computed:{msgTotal:function(){return parseInt(this.msg1Count)+parseInt(this.msg2Count)}},mounted:function(){this.loadData(),this.initWebSocket(),this.heartCheckFun()},destroyed:function(){this.websocketclose()},methods:{timerFun:function(){var e=this;this.stopTimer=!1;var t=setInterval((function(){1!=e.stopTimer?e.loadData():clearInterval(t)}),6e3)},loadData:function(){var e=this;try{Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__["getAction"])(this.url.listCementByUser).then((function(t){t.success&&(e.announcement1=t.result.anntMsgList,e.msg1Count=t.result.anntMsgTotal,e.msg1Title="通知("+t.result.anntMsgTotal+")",e.announcement2=t.result.sysMsgList,e.msg2Count=t.result.sysMsgTotal,e.msg2Title="系统消息("+t.result.sysMsgTotal+")")})).catch((function(t){console.log("系统消息通知异常",t),e.stopTimer=!0,console.log("清理timer")}))}catch(t){this.stopTimer=!0,console.log("通知异常",t)}},fetchNotice:function(){var e=this;this.loadding?this.loadding=!1:(this.loadding=!0,setTimeout((function(){e.loadding=!1}),200))},showAnnouncement:function(e){var t=this;Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__["putAction"])(this.url.editCementSend,{anntId:e.id}).then((function(e){e.success&&t.loadData()})),this.hovered=!1,"component"===e.openType?(this.openPath=e.openPage,this.formData={id:e.busId},this.$refs.showDynamNotice.detail(e.openPage)):this.$refs.ShowAnnouncement.detail(e)},toMyAnnouncement:function(){this.$router.push({path:"/isps/userAnnouncement",name:"isps-userAnnouncement"})},modalFormOk:function(){},handleHoverChange:function(e){this.hovered=e},initWebSocket:function(){var e=_store___WEBPACK_IMPORTED_MODULE_3__["a"].getters.userInfo.id,t=window._CONFIG["domianURL"].replace("https://","wss://").replace("http://","ws://")+"/websocket/"+e;console.log(t),this.websock=new WebSocket(t),this.websock.onopen=this.websocketOnopen,this.websock.onerror=this.websocketOnerror,this.websock.onmessage=this.websocketOnmessage,this.websock.onclose=this.websocketOnclose},websocketOnopen:function(){console.log("WebSocket连接成功"),this.heartCheck.reset().start()},websocketOnerror:function(e){console.log("WebSocket连接发生错误"),this.reconnect()},websocketOnmessage:function websocketOnmessage(e){console.log("-----接收消息-------",e.data);var data=eval("("+e.data+")");"topic"==data.cmd?this.loadData():"user"==data.cmd&&this.loadData(),this.heartCheck.reset().start()},websocketOnclose:function(e){console.log("connection closed ("+e.code+")"),this.reconnect()},websocketSend:function(e){try{this.websock.send(e)}catch(t){console.log("send failed ("+t.code+")")}},openNotification:function(e){var t=this,n=e.msgTxt,a="open".concat(Date.now());this.$notification.open({message:"消息提醒",placement:"bottomRight",description:n,key:a,btn:function(n){return n("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return t.showDetail(a,e)}}},"查看详情")}})},reconnect:function(){var e=this;e.lockReconnect||(e.lockReconnect=!0,setTimeout((function(){console.info("尝试重连..."),e.initWebSocket(),e.lockReconnect=!1}),5e3))},heartCheckFun:function(){var e=this;e.heartCheck={timeout:2e4,timeoutObj:null,serverTimeoutObj:null,reset:function(){return clearTimeout(this.timeoutObj),this},start:function(){this.timeoutObj=setTimeout((function(){e.websocketSend("HeartBeat"),console.info("客户端发送心跳")}),this.timeout)}}},showDetail:function(e,t){var n=this;this.$notification.close(e);var a=t.msgId;Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__["getAction"])(this.url.queryById,{id:a}).then((function(e){if(e.success){var t=e.result;n.showAnnouncement(t)}}))}}}},"74c9":function(e,t,n){},"74eb":function(e,t,n){},"81d7":function(e,t,n){"use strict";var a=n("74c9"),o=n.n(a);o.a},"898c":function(e,t,n){"use strict";var a=n("20ad"),o=n.n(a);o.a},"8d4d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-wrapper",class:e.theme},[n("span",{staticClass:"action",on:{click:e.showClick}},[n("a-icon",{staticStyle:{color:"gray"},attrs:{type:"search"}})],1),n(e.searchMenuComp,{directives:[{name:"show",rawName:"v-show",value:e.searchMenuVisible||e.isMobile(),expression:"searchMenuVisible || isMobile()"}],tag:"component",staticClass:"borders",attrs:{visible:e.searchMenuVisible,title:"搜索菜单",footer:null},on:{cancel:function(t){e.searchMenuVisible=!1}}},[n("a-select",{staticClass:"search-input",style:e.isMobile()?{width:"100%",marginBottom:"50px"}:{},attrs:{showSearch:"",showArrow:!1,placeholder:"搜索菜单",optionFilterProp:"children",filterOption:e.filterOption,open:!!e.isMobile()||null,getPopupContainer:function(e){return e.parentNode}},on:{change:e.searchMethods,blur:e.hiddenClick}},e._l(e.searchMenuOptions,(function(t,a){return n("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.meta.title))])})),1)],1),n("header-notice",{staticClass:"action",staticStyle:{color:"gray"}}),n("a-dropdown",[n("span",{staticClass:"action action-full ant-dropdown-link user-dropdown-menu"},[n("a-avatar",{staticClass:"avatar",attrs:{size:"small",src:e.getAvatar()}}),e.isDesktop()?n("span",[e._v("用户管理")]):e._e()],1),n("a-menu",{staticClass:"user-dropdown-menu-wrapper",attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"0"},[n("router-link",{attrs:{to:{name:"account-center"}}},[n("a-icon",{attrs:{type:"user"}}),n("span",[e._v("个人中心")])],1)],1),n("a-menu-item",{key:"1"},[n("router-link",{attrs:{to:{name:"account-settings-base"}}},[n("a-icon",{attrs:{type:"setting"}}),n("span",[e._v("账户设置")])],1)],1),n("a-menu-item",{key:"3",on:{click:e.systemSetting}},[n("a-icon",{attrs:{type:"tool"}}),n("span",[e._v("系统设置")])],1),n("a-menu-item",{key:"4",on:{click:e.updatePassword}},[n("a-icon",{attrs:{type:"setting"}}),n("span",[e._v("密码修改")])],1),n("a-menu-item",{key:"5",on:{click:e.updateCurrentDepart}},[n("a-icon",{attrs:{type:"cluster"}}),n("span",[e._v("切换部门")])],1),n("a-menu-divider"),n("a-menu-item",{key:"3"},[n("a",{attrs:{href:"javascript:;"},on:{click:e.handleLogout}},[n("a-icon",{attrs:{type:"logout"}}),n("span",[e._v("退出登录")])],1)])],1)],1),n("span",{staticClass:"action"},[n("a",{staticClass:"logout_title",attrs:{href:"javascript:;"},on:{click:e.handleLogout}},[n("a-icon",{staticStyle:{color:"gray"},attrs:{type:"logout"}}),e.isDesktop()?n("span",[e._v(" 退出")]):e._e()],1)]),n("user-password",{ref:"userPassword"}),n("depart-select",{ref:"departSelect",attrs:{closable:!0,title:"部门切换"}}),n("setting-drawer",{ref:"settingDrawer",attrs:{closable:!0,title:"系统设置"}})],1)},o=[],r=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac4d"),n("8a81"),n("ac6a"),n("96cf"),n("3b8d")),s=n("bd86"),i=n("a4b0"),c=n("ce42"),l=n("2191"),u=n("e2c7"),d=n("5880"),p=n("ac0d");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"UserMenu",mixins:[p["b"]],data:function(){return{searchMenuOptions:[],searchMenuComp:"span",searchMenuVisible:!1}},components:{HeaderNotice:i["default"],UserPassword:c["default"],DepartSelect:u["default"],SettingDrawer:l["default"]},props:{theme:{type:String,required:!1,default:"dark"}},created:function(){var e=[];this.searchMenus(e,this.permissionMenuList),this.searchMenuOptions=[].concat(e)},computed:h({},Object(d["mapState"])({permissionMenuList:function(e){return e.user.permissionList}})),watch:{device:{immediate:!0,handler:function(){this.searchMenuVisible=!1,this.searchMenuComp=this.isMobile()?"a-modal":"span"}}},methods:h({showClick:function(){this.searchMenuVisible=!0},hiddenClick:function(){this.shows=!1}},Object(d["mapActions"])(["Logout"]),{},Object(d["mapGetters"])(["nickname","avatar","userInfo"]),{getAvatar:function(){return console.log("url = "+window._CONFIG["imgDomainURL"]+"/"+this.avatar()),window._CONFIG["imgDomainURL"]+"/"+this.avatar()},handleLogout:function(){var e=this;this.$confirm_({title:"确认操作",content:"真的要注销登录吗 ?",onOk:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.Logout({}).then((function(){e.$message.info("注销登陆成功！"),setTimeout((function(){window.location.href="/"}),300)})).catch((function(t){e.$message.error("注销登陆异常！"),console.log(t)}));case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()})},updatePassword:function(){var e=this.userInfo().username;this.$refs.userPassword.show(e)},updateCurrentDepart:function(){this.$refs.departSelect.show()},systemSetting:function(){this.$refs.settingDrawer.showDrawer()},searchMenus:function(e,t){var n=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var i=r.value;i.hidden||"layouts/RouteView"===i.component||e.push(i),i.children&&i.children.length>0&&this.searchMenus(e,i.children)}}catch(c){a=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},searchMethods:function(e){var t=this.searchMenuOptions.filter((function(t){return t.id===e}))[0];!0===t.meta.internalOrExternal||t.component.includes("layouts/IframePageView")?window.open(t.meta.url,"_blank"):this.$router.push({path:t.path}),this.searchMenuVisible=!1}})},_=f,b=(n("0913"),n("4df6"),n("2877")),g=Object(b["a"])(_,a,o,!1,null,"ba4a2048",null);t["default"]=g.exports},"8ebf":function(e,t,n){"use strict";var a=n("a450"),o=n.n(a);o.a},"902a":function(e,t,n){},a078:function(e,t,n){"use strict";t["a"]={crossDomain:!1,PROD_URL:"https://beta.vilson.xyz/index.php",WS_URI:"ws://192.168.31.68:2345",HOME_PAGE:"/home"}},a250:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("router-link",{attrs:{to:{name:"dashboard"}}},[e.showTitle?n("h1",[e._v(e._s(e.title))]):e._e()])],1)},o=[],r=n("ac0d"),s={name:"Logo",mixins:[r["a"]],props:{title:{type:String,default:"OA System",required:!1},showTitle:{type:Boolean,default:!0,required:!1}}},i=s,c=(n("81d7"),n("2877")),l=Object(c["a"])(i,a,o,!1,null,"615bb28e",null);t["default"]=l.exports},a450:function(e,t,n){},a4b0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-popover",{attrs:{trigger:"click",placement:"bottomRight",autoAdjustOverflow:!0,arrowPointAtCenter:!0,overlayClassName:"header-notice-wrapper",overlayStyle:{width:"300px",top:"50px"}},on:{visibleChange:e.handleHoverChange}},[n("template",{slot:"content"},[n("a-spin",{attrs:{spinning:e.loadding}},[n("a-tabs",[n("a-tab-pane",{key:"1",attrs:{tab:e.msg1Title}},[n("a-list",[e._l(e.announcement1,(function(t,a){return n("a-list-item",{key:a},[n("div",{staticStyle:{"margin-left":"5%",width:"80%"}},[n("p",[n("a",{on:{click:function(n){return e.showAnnouncement(t)}}},[e._v(e._s(t.titile))])]),n("p",{staticStyle:{color:"rgba(0,0,0,.45)","margin-bottom":"0px"}},[e._v(e._s(t.createTime)+" 发布")])]),n("div",{staticStyle:{"text-align":"right"}},["L"===t.priority?n("a-tag",{attrs:{color:"blue"},on:{click:function(n){return e.showAnnouncement(t)}}},[e._v("一般消息")]):e._e(),"M"===t.priority?n("a-tag",{attrs:{color:"orange"},on:{click:function(n){return e.showAnnouncement(t)}}},[e._v("重要消息")]):e._e(),"H"===t.priority?n("a-tag",{attrs:{color:"red"},on:{click:function(n){return e.showAnnouncement(t)}}},[e._v("紧急消息")]):e._e()],1)])})),n("div",{staticStyle:{"margin-top":"5px","text-align":"center"}},[n("a-button",{attrs:{type:"dashed",block:""},on:{click:function(t){return e.toMyAnnouncement()}}},[e._v("查看更多")])],1)],2)],1),n("a-tab-pane",{key:"2",attrs:{tab:e.msg2Title}},[n("a-list",[e._l(e.announcement2,(function(t,a){return n("a-list-item",{key:a},[n("div",{staticStyle:{"margin-left":"5%",width:"80%"}},[n("p",[n("a",{on:{click:function(n){return e.showAnnouncement(t)}}},[e._v(e._s(t.titile))])]),n("p",{staticStyle:{color:"rgba(0,0,0,.45)","margin-bottom":"0px"}},[e._v(e._s(t.createTime)+" 发布")])]),n("div",{staticStyle:{"text-align":"right"}},["L"===t.priority?n("a-tag",{attrs:{color:"blue"},on:{click:function(n){return e.showAnnouncement(t)}}},[e._v("一般消息")]):e._e(),"M"===t.priority?n("a-tag",{attrs:{color:"orange"},on:{click:function(n){return e.showAnnouncement(t)}}},[e._v("重要消息")]):e._e(),"H"===t.priority?n("a-tag",{attrs:{color:"red"},on:{click:function(n){return e.showAnnouncement(t)}}},[e._v("紧急消息")]):e._e()],1)])})),n("div",{staticStyle:{"margin-top":"5px","text-align":"center"}},[n("a-button",{attrs:{type:"dashed",block:""},on:{click:function(t){return e.toMyAnnouncement()}}},[e._v("查看更多")])],1)],2)],1)],1)],1)],1),n("span",{staticClass:"header-notice",on:{click:e.fetchNotice}},[n("a-badge",{attrs:{count:e.msgTotal}},[n("a-icon",{staticStyle:{"font-size":"16px",padding:"4px",color:"gray"},attrs:{type:"bell"}})],1)],1),n("show-announcement",{ref:"ShowAnnouncement",on:{ok:e.modalFormOk}}),n("dynamic-notice",{ref:"showDynamNotice",attrs:{path:e.openPath,formData:e.formData}})],2)},o=[],r=n("73f1"),s=r["a"],i=(n("ab24"),n("898c"),n("2877")),c=Object(i["a"])(s,a,o,!1,null,"2203850a",null);t["default"]=c.exports},ab24:function(e,t,n){"use strict";var a=n("d775"),o=n.n(a);o.a},c16f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["detail-list",e.size,"vertical"===e.layout?"vertical":"horizontal"]},[e.title?n("div",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),n("a-row",[e._t("default")],2)],1)},o=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=(n("c5f6"),n("da05"));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"DetailListItem",props:{term:{type:String,default:"",required:!1}},inject:{col:{type:Number}},render:function(){var e=arguments[0];return e(s["a"],{props:c({},u[this.col])},[e("div",{class:"term"},[this.$props.term]),e("div",{class:"content"},[this.$slots.default])])}},u={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}},d={name:"DetailList",Item:l,components:{Col:s["a"]},props:{title:{type:String,default:"",required:!1},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}},provide:function(){return{col:this.col>4?4:this.col}}},p=d,m=(n("8ebf"),n("2877")),h=Object(m["a"])(p,a,o,!1,null,null,null);t["default"]=h.exports},ce42:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.title,width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"旧密码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["oldpassword",e.validatorRules.oldpassword],expression:"[ 'oldpassword', validatorRules.oldpassword]"}],attrs:{type:"password",placeholder:"请输入旧密码"}})],1),n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"新密码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",e.validatorRules.password],expression:"[ 'password', validatorRules.password]"}],attrs:{type:"password",placeholder:"请输入新密码"}})],1),n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"确认新密码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",e.validatorRules.confirmpassword],expression:"[ 'confirmpassword', validatorRules.confirmpassword]"}],attrs:{type:"password",placeholder:"请确认新密码"},on:{blur:e.handleConfirmBlur}})],1)],1)],1)],1)},o=[],r=n("0fea"),s={name:"UserPassword",data:function(){return{title:"修改密码",modalWidth:800,visible:!1,confirmLoading:!1,validatorRules:{oldpassword:{rules:[{required:!0,message:"请输入旧密码!"}]},password:{rules:[{required:!0,message:"请输入新密码!"},{validator:this.validateToNextPassword}]},confirmpassword:{rules:[{required:!0,message:"请确认新密码!"},{validator:this.compareToFirstPassword}]}},confirmDirty:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),url:"sys/user/updatePassword",username:""}},methods:{show:function(e){e?(this.username=e,this.form.resetFields(),this.visible=!0):this.$message.warning("当前系统无登陆用户!")},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1,this.selectedRole=[]},handleOk:function(){var e=this,t=this;this.form.validateFields((function(n,a){if(!n){t.confirmLoading=!0;var o=Object.assign({username:e.username},a);console.log("修改密码提交数据",o),Object(r["putAction"])(e.url,o).then((function(e){e.success?(console.log(e),t.$message.success(e.message),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},validateToNextPassword:function(e,t,n){var a=this.form;t&&this.confirmDirty&&a.validateFields(["confirm"],{force:!0}),n()},compareToFirstPassword:function(e,t,n){var a=this.form;t&&t!==a.getFieldValue("password")?n("两次输入的密码不一样！"):n()},handleConfirmBlur:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t}}},i=s,c=n("2877"),l=Object(c["a"])(i,a,o,!1,null,"14a0c8f6",null);t["default"]=l.exports},d73b:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n("2a7a"),o=n("4922"),r=n("7424"),s=n("a67b"),i=n("3a4c"),c=[{path:"/",name:"dashboard",component:a["b"],meta:{title:"首页"},redirect:"/dashboard/workplace",children:[]},{path:"*",redirect:"/404",hidden:!0}],l=[{path:"/user",component:a["c"],redirect:"/user/login",hidden:!0,children:[{path:"login",name:"login",component:function(){return Promise.all([n.e("chunk-7c004ed2"),n.e("chunk-2d0f0d74")]).then(n.bind(null,"ac2a"))}},{path:"register",name:"register",component:function(){return n.e("chunk-49c8759a").then(n.bind(null,"1348"))}},{path:"register-result",name:"registerResult",component:function(){return n.e("chunk-13c3acf6").then(n.bind(null,"1037"))}},{path:"alteration",name:"alteration",component:function(){return n.e("chunk-9681b11c").then(n.bind(null,"ffc3"))}},{path:"workflow",name:"workflow",component:function(){return Promise.all([n.e("chunk-62f10711"),n.e("chunk-7da99a71"),n.e("chunk-2d207f85")]).then(n.bind(null,"c17d"))}}]},{path:"/basewflow",component:a["a"],redirect:"/basewflow/home",children:[{path:"home",name:"TestHome",component:function(){return Promise.all([n.e("chunk-44fded66"),n.e("chunk-3e6cc740")]).then(n.bind(null,"bb51"))}},{path:"view",name:"view",component:function(){return Promise.all([n.e("chunk-62f10711"),n.e("chunk-7da99a71"),n.e("chunk-2d207f85")]).then(n.bind(null,"c17d"))}}]},{path:"/qslist",name:"QsList",component:o["default"]},{path:"/qsdata/:num",name:"QsData",component:r["default"]},{path:"/qsfill/:num",name:"QsFill",component:s["default"]},{path:"/qsedit/:num",name:"QsEdit",component:i["default"]},{path:"/404",component:function(){return n.e("chunk-088b4502").then(n.bind(null,"cc89"))}}]},d775:function(e,t,n){},dda1:function(e,t,n){"use strict";var a=n("902a"),o=n.n(a);o.a},e2c7:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.currTitle,width:450,visible:e.visible,closable:!1,maskClosable:e.closable}},[n("template",{slot:"footer"},[e.closable?n("a-button",{on:{click:e.close}},[e._v("关闭")]):e._e(),n("a-button",{attrs:{type:"primary"},on:{click:e.departOk}},[e._v("确认")])],1),n("a-form",[n("a-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{labelCol:{span:4},wrapperCol:{span:20},"validate-status":e.validate_status}},[n("a-tooltip",{attrs:{placement:"topLeft"}},[n("template",{slot:"title"},[n("span",[e._v("您隶属于多部门，请选择当前所在部门")])]),n("a-avatar",{staticStyle:{backgroundColor:"#87d068"},attrs:{icon:"gold"}})],2),n("a-select",{class:{"valid-error":"error"==e.validate_status},staticStyle:{"margin-left":"10px",width:"80%"},attrs:{placeholder:"请选择登录部门"},model:{value:e.departSelected,callback:function(t){e.departSelected=t},expression:"departSelected"}},[n("a-icon",{attrs:{slot:"suffixIcon",type:"gold"},slot:"suffixIcon"}),e._l(e.departList,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.orgCode}},[e._v(e._s(t.departName))])}))],2)],1)],1)],2)},o=[],r=(n("ac4d"),n("8a81"),n("ac6a"),n("0fea")),s=n("4360"),i=n("9fb0"),c={name:"DepartSelect",props:{title:{type:String,default:"部门选择",required:!1},closable:{type:Boolean,default:!1,required:!1},username:{type:String,default:"",required:!1}},watch:{username:function(e){e&&this.loadDepartList()}},data:function(){return{currTitle:this.title,visible:!1,departList:[],departSelected:"",validate_status:"",currDepartName:""}},created:function(){},methods:{loadDepartList:function(){var e=this;return new Promise((function(t){var n="/sys/user/getCurrentUserDeparts";e.currDepartName="",Object(r["getAction"])(n).then((function(n){if(n.success){var a=n.result.list,o=n.result.orgCode;if(a&&a.length>0){var r=!0,s=!1,i=void 0;try{for(var c,l=a[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value;if(u.orgCode==o){e.currDepartName=u.departName;break}}}catch(d){s=!0,i=d}finally{try{r||null==l.return||l.return()}finally{if(s)throw i}}}e.departSelected=o,e.departList=a,e.currDepartName&&(e.currTitle="部门切换（当前部门 : "+e.currDepartName+"）")}t()}))}))},close:function(){this.departClear()},departOk:function(){var e=this;if(!this.departSelected)return this.validate_status="error",!1;var t={orgCode:this.departSelected,username:this.username};Object(r["putAction"])("/sys/selectDepart",t).then((function(t){try{if(t.success){var n=t.result.userInfo;Vue.ls.set(i["o"],n,6048e5),s["a"].commit("SET_INFO",n),e.departClear()}}catch(a){console.error(a)}}))},show:function(){var e=this;this.loadDepartList().then((function(){e.visible=!0,(!e.departList||e.departList.length<=0)&&(e.$message.warning("您尚未设置部门信息!"),e.departClear())}))},departClear:function(){this.departList=[],this.departSelected="",this.visible=!1,this.validate_status="",this.currDepartName=""}}},l=c,u=(n("dda1"),n("2877")),d=Object(u["a"])(l,a,o,!1,null,"06999f07",null);t["default"]=d.exports},e97b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-breadcrumb",{staticClass:"breadcrumb"},e._l(e.breadList,(function(t,a){return n("a-breadcrumb-item",{key:a},[t.name!=e.name?n("router-link",{attrs:{to:{path:t.path}}},[e._v("\n      "+e._s(t.meta.title)+"\n    ")]):n("span",[e._v(e._s(t.meta.title))])],1)})),1)},o=[],r=(n("ac6a"),n("7f7f"),{data:function(){return{name:"",breadList:[]}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var e=this;console.log("this.$route.matched",this.$route.matched),this.breadList=[],this.breadList.push({name:"dashboard",path:"/dashboard/",meta:{title:"首页"}}),this.name=this.$route.name,this.$route.matched.forEach((function(t){e.breadList.push(t)}))}},watch:{$route:function(){this.getBreadcrumb()}}}),s=r,i=n("2877"),c=Object(i["a"])(s,a,o,!1,null,"242b0e6b",null);t["default"]=c.exports}}]);