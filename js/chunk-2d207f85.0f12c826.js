(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207f85","chunk-2d207f85","chunk-2d207f85"],{a396:function(e,t,n){"use strict";var r=n("75fc"),a=(n("ac4d"),n("8a81"),n("aef6"),n("a481"),n("6762"),n("2fdb"),n("f559"),n("6b54"),n("ac6a"),n("456d"),n("7514"),n("28a5"),n("96cf"),n("3b8d")),s=(n("7f7f"),n("0fea")),i=n("f36f"),o=n("5d2d"),u=n("ca00"),c=n("0f9d");try{Vue.use(Print)}catch(d){console.log(d)}try{Vue.component(VueQrcode.name,VueQrcode)}catch(d){console.error(d)}var l=[],p='[{"title":"åºå·","dataIndex":"no","key":"no"},{"title":"ä¸­æ–‡","dataIndex":"name","key":"name"},{"title":"è‹±æ–‡","dataIndex":"nickname","key":"nickname"}]';t["a"]={components:{JSelectMultiUser:c["default"]},name:"Printgzsld",props:{reBizCode:{type:String,default:""}},data:function(){return{user:"",avatar:"",columns:[],data:[],loading:!1,refreshInterval:[1e3,2e3,3e3],formName:"æµç¨‹ç”³è¯·å•",curRow:{},depart:{},fileinfo:"",workflows:[],pageType:"view",tableName:"",wflowUsers:"",wflowAddUsers:"",wflowNotifyUsers:"",notifyUsers:"",approveUser:"",tableInfo:"",tipVisible:!1,tipContent:"",slides:l,wflowstatus:{},shortUrl:"",qrcodeUrl:"",qrcodeVisible:!1,shortUrlVisible:!1,form:this.$form.createForm(this),wflowcolumns:JSON.parse(p),auditData:[],approveData:[],notifyData:[],wflowAddData:[],wflowNotifyData:[],wfreeNode:"",startusers:"",auditusers:"",approveusers:"",messageusers:"",replayvalue:"",replaylist:[],replayid:"",printflag:"false",commentFlag:"yes"}},computed:{userInfo:function(){return this.$store.getters.userInfo}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:return this.userInfo=o["e"]("cur_user"),e.prev=3,e.next=6,s["queryUserInfoByView"](this.userInfo.username);case 6:this.v_user=e.sent,this.postName=this.v_user[0]["post"],this.departName=this.v_user[0]["name"],this.address=this.v_user[0]["address"],this.bio=this.v_user[0]["bio"],this.avatar=window._CONFIG["imgDomainURL"]+"/"+this.v_user[0]["avatar"],e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log("å·¥ä½œå°è®¾ç½®å‘˜å·¥å²—ä½ä¿¡æ¯/éƒ¨é—¨ä¿¡æ¯å¼‚å¸¸ï¼š"+e.t0);case 17:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u["n"]("id"),e.next=3,s["watchFormLeave"](this);case 3:return n=e.sent,e.next=6,s["colorProcessDetail"](n,this);case 6:return r=e.sent,e.next=9,this.loadWorkflowNode();case 9:return a=e.sent,e.next=12,this.transferFreeWorkflow();case 12:return i=e.sent,e.next=15,s["queryCurFreeWorkflow"](t);case 15:return o=e.sent,this.printflag=u["n"]("printflag")||"false",e.next=19,s["queryCurReplayList"](t);case 19:return this.replaylist=e.sent,e.next=22,s["queryFileNumb"]("é¹ç¨‹","",this.curRow.create_time,this.curRow,this.tableName);case 22:return this.curRow.no=e.sent,console.log("wfnode : ".concat(a,"  wftransfer : ").concat(i," wfreeNode : ").concat(o," pageType : ").concat(this.pageType," curRow.bpm_status : ").concat(this.curRow.bpm_status," ")),setTimeout((function(){"true"==c.printflag&&window.print()}),1e3),e.abrupt("return",r);case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{$route:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u["n"]("id"),e.next=3,s["watchFormLeave"](this);case 3:return n=e.sent,e.next=6,s["colorProcessDetail"](n,this);case 6:return r=e.sent,e.next=9,this.loadWorkflowNode();case 9:return a=e.sent,e.next=12,this.transferFreeWorkflow();case 12:return i=e.sent,e.next=15,s["queryCurFreeWorkflow"](t);case 15:return o=e.sent,this.printflag=u["n"]("printflag")||"false",e.next=19,s["queryCurReplayList"](t);case 19:return this.replaylist=e.sent,e.next=22,s["queryFileNumb"]("é¹ç¨‹","",this.curRow.create_time,this.curRow,this.tableName);case 22:return this.curRow.no=e.sent,console.log("wfnode : ".concat(a,"  wftransfer : ").concat(i," wfreeNode : ").concat(o," pageType : ").concat(this.pageType," curRow.bpm_status : ").concat(this.curRow.bpm_status," ")),setTimeout((function(){"true"==c.printflag&&window.print()}),1e3),e.abrupt("return",r);case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),wflowAddUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:n=e.sent,r=t.split(","),this.wflowAddData=[],window.__.each(r,(function(e,t){var r=window.__.find(n,(function(t){return t.username==e}));a.wflowAddData.push({no:t+1,name:r.realname,nickname:r.username})})),console.log("åŠ ç­¾ç”¨æˆ·åˆ—è¡¨ï¼š"+t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),wflowNotifyUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:n=e.sent,r=t.split(","),this.wflowNotifyData=[],window.__.each(r,(function(e,t){var r=window.__.find(n,(function(t){return t.username==e}));a.wflowNotifyData.push({no:t+1,name:r.realname,nickname:r.username})})),console.log("ä¼šç­¾ç”¨æˆ·åˆ—è¡¨ï¼š"+t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),wflowUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:n=e.sent,r=t.split(","),this.auditData=[],window.__.each(r,(function(e,t){var r=window.__.find(n,(function(t){return t.username==e}));a.auditData.push({no:t+1,name:r.realname,nickname:r.username})})),console.log("å®¡æ ¸ç”¨æˆ·åˆ—è¡¨ï¼š"+t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),approveUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:n=e.sent,r=t.split(","),this.approveData=[],window.__.each(r,(function(e,t){var r=window.__.find(n,(function(t){return t.username==e}));a.approveData.push({no:t+1,name:r.realname,nickname:r.username})})),console.log("å®¡æ‰¹ç”¨æˆ·åˆ—è¡¨ï¼š"+t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),notifyUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:n=e.sent,r=t.split(","),this.notifyData=[],window.__.each(r,(function(e,t){var r=window.__.find(n,(function(t){return t.username==e}));a.notifyData.push({no:t+1,name:r.realname,nickname:r.username})})),console.log("çŸ¥ä¼šç”¨æˆ·åˆ—è¡¨ï¼š"+t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},methods:{loadData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u["n"]("id"),e.next=3,s["watchFormLeave"](this);case 3:return n=e.sent,e.next=6,s["colorProcessDetail"](n,this);case 6:return r=e.sent,e.next=9,this.loadWorkflowNode();case 9:return a=e.sent,e.next=12,this.transferFreeWorkflow();case 12:return i=e.sent,e.next=15,s["queryCurFreeWorkflow"](t);case 15:return o=e.sent,e.next=18,s["queryCurReplayList"](t);case 18:return this.replaylist=e.sent,console.log("wfnode : ".concat(a,"  wftransfer : ").concat(i," wfreeNode : ").concat(o," pageType : ").concat(this.pageType," curRow.bpm_status : ").concat(this.curRow.bpm_status," ")),e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isNull:function(e){return u["k"](e)},transferFreeWorkflow:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["e"](this.curRow.id);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadWorkflowNode:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,c,l,p,f,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUserName"]();case 2:return t=e.sent,e.next=5,s["queryWorkflowNode"](this.curRow.id);case 5:if(n=e.sent,e.prev=6,"undefined"!=typeof n&&null!=n&&""!=n&&0!=Object.keys(n).length){e.next=13;break}return r=u["n"]("table_name"),a=o["e"]("cur_user"),e.next=12,s["queryWorkflowNodeByUser"](r,a["username"]);case 12:n=e.sent;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](6),console.log(e.t0);case 18:if("undefined"!=typeof n&&null!=n&&""!=n&&0!=Object.keys(n).length){e.next=20;break}return e.abrupt("return",!1);case 20:i=window.__.find(t,(function(e){return e.username==n.start}));try{i=JSON.parse(JSON.stringify(i))}catch(d){console.log(d)}c=window.__.find(t,(function(e){return e.username==n.approve}));try{c=JSON.parse(JSON.stringify(c))}catch(d){console.log(d)}try{c.username==n.operate&&(c.realname="ğŸ"+c.realname+"(å¤„ç†ä¸­)")}catch(d){console.error(d)}try{l=n.audit.split(","),p={realname:""},l=l.filter((function(e){return"undefined"!=e})),n.audit=l.toString(),window.__.each(l,(function(e){try{var r=window.__.find(t,(function(t){return t.username==e}));e==n.operate?p.realname=p.realname+"->ğŸ"+r.realname+"(å¤„ç†ä¸­)":p.realname=p.realname+"->"+r.realname}catch(d){console.log(d)}}));try{p.realname.startsWith("->")&&(p.realname=p.realname.substring(2))}catch(d){console.error(d)}}catch(d){console.log(d)}try{f=n.notify.split(","),m={realname:""},f=f.filter((function(e){return"undefined"!=e})),n.notify=f.toString(),window.__.each(f,(function(e){try{var n=window.__.find(t,(function(t){return t.username==e}));m.realname=m.realname+","+n.realname}catch(d){console.log(d)}})),m.realname.trim().startsWith(",")&&(m.realname=m.realname.trim().substring(1))}catch(d){console.log(d)}null!=n.start&&""!=n.start&&(this.startusers="å‘èµ·: ".concat(i.realname)),null!=n.audit&&""!=n.audit&&(this.auditusers="å®¡æ ¸: ".concat(p.realname),this.wflowUsers=n.audit),null!=n.approve&&""!=n.approve&&(this.approveusers="å®¡æ‰¹: ".concat(c.realname),this.approveUser=n.approve),null!=n.notify&&""!=n.notify&&(this.messageusers="çŸ¥ä¼šï¼š".concat(m.realname),this.notifyUsers=n.notify),setTimeout((function(){var e=$(".ant-steps-item").width()-10;$(".ant-steps-item-description").css("max-width",e+"px"),$(".ant-steps-item-description").css("margin-left","-30px"),$(".ant-steps-item-description").css("font-size","12px")}),255);case 32:case"end":return e.stop()}}),e,this,[[6,15]])})));function t(){return e.apply(this,arguments)}return t}(),getDate:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),tipHandleOk:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.tipConfirmLoading=!0,setTimeout((function(){t.loadData(),t.tipVisible=!1,t.tipConfirmLoading=!1}),300);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),tipHandleCancel:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadData(),this.tipVisible=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFormFieldValue:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.form.getFieldValue(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handlePrint:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=window.location.href,t.includes("workflow/view?table_name")?window.open(t.replace("workflow","basewflow")+"&printflag=true"):(this.curRow.fileStatus=1,this.printflag="true",setTimeout((function(){n.printflag="false",n.curRow.fileStatus=0}),1e4));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleQRcode:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=window.location.href.replace("workflow","basewflow"),this.qrcodeUrl=t,this.qrcodeVisible=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleShort:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,c,l,p,d,f,m,h,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=window.location.href.replace("workflow","basewflow"),n=window.btoa(t),r=o["e"](n),!u["k"](r)&&r.code.includes("undefined")&&(r="",o["c"](n)),""==u["e"](r)){e.next=13;break}if(a=r.code,i=r.expire_,c=new Date,c=u["i"](f,"yyyyMMdd"),!(c<=i)){e.next=13;break}return this.shortUrl="æœ¬æ–‡åˆ†äº«åœ°å€ï¼š"+window._CONFIG["domain"]+"/s/"+a,this.shortUrlVisible=!0,e.abrupt("return",!0);case 13:l=s["queryRandom"](4),p=(new Date).getTime(),d=0,f=new Date,f.setMonth(f.getMonth()+1),m=u["i"](f,"yyyy-MM-dd hh:mm:ss"),h=u["i"](f,"yyyyMMdd"),w={id:l,code:l,url:t,count:d,expire:m,expire_:h,time:p},o["g"](n,JSON.stringify(w)),s["postTableData"]("bs_short_link",w),this.shortUrl="æœ¬æ–‡åˆ†äº«åœ°å€ï¼š"+window._CONFIG["domain"]+"/s/"+l,this.shortUrlVisible=!0;case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handlePreview:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryUrlValid"](t.fileURL);case 2:n=e.sent,n?window.open(t.src):window.open(window._CONFIG["previewURL"]+t.msrc);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),handleDownLoad:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(JSON.stringify(t)),window.open(t.msrc);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),handleUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof t||null!=t){e.next=5;break}return this.$confirm_({title:"æç¤ºä¿¡æ¯",content:"ç”¨æˆ·ç™»å½•ä¿¡æ¯è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•ï¼",onOk:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o["b"](),n.$router.push("/user/login");case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}),e.abrupt("return",!1);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleApproveWF:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,c,l,p,f=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u["n"]("id"),n=this,c=n.wflowAddUsers+","+n.wflowNotifyUsers,e.next=5,s["queryCurFreeWorkflow"](t);case 5:if(l=e.sent,""==u["e"](n.wflowAddUsers)||""==u["e"](n.wflowNotifyUsers)){e.next=9;break}return n.$message.warning("æ— æ³•åŒæ—¶è¿›è¡ŒåŠ ç­¾åŠä¼šç­¾æ“ä½œï¼Œè¯·å•ç‹¬é€‰æ‹©åŠ ç­¾ç”¨æˆ·æˆ–ä¼šç­¾ç”¨æˆ·ï¼"),e.abrupt("return",!1);case 9:if(c=c.startsWith(",")?c.substring(1):c,c=c.endsWith(",")?c.substring(0,c.length-1):c,console.log("ä¼šç­¾/åŠ ç­¾ç”¨æˆ· : "+c),p=u["d"](l.audit_node+","+l.approve_node,c),u["k"](p)){e.next=19;break}return e.next=16,s["patchEnameCname"](p);case 16:return p=e.sent,n.$message.warning("åŠ ç­¾/ä¼šç­¾ç”¨æˆ·ï¼Œä¸èƒ½é€‰æ‹©å®¡æ‰¹æµç¨‹ä¸­å·²ç»å­˜åœ¨çš„ç”¨æˆ·(".concat(p,")!")),e.abrupt("return",!1);case 19:this.$confirm_({title:"ç¡®è®¤æ“ä½œ",content:"æ˜¯å¦ç¡®è®¤æäº¤æ­¤è‡ªç”±æµç¨‹?",onOk:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,a,c,l,p,m,h,w,_,b,y,g,v,x,k,R,O,N,S,D,J,T,q,U,I,j,$,C,F,L,P,W,M,V,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o["e"]("cur_user"),e.next=3,f.handleUserInfo(a);case 3:return c=u["i"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),l=l||"åŒæ„",p=p||f.curRow.idea_content||"åŒæ„",m=n.curRow,h=u["n"]("processLogID"),w=u["n"]("table_name"),_=null,b=[],y=null,g=null,v=null,x=null,k=null,e.prev=16,e.next=19,s["queryProcessLogByID"](w,h);case 19:m=e.sent,e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](16),console.log(e.t0);case 25:if(""!=u["e"](m)){e.next=28;break}return n.$message.warning("æœªæ‰¾åˆ°ä¸‹ä¸€èŠ‚ç‚¹çš„æµç¨‹ä¿¡æ¯ï¼Œè¯·åˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»å®¡æ‰¹å®Œæˆï¼"),e.abrupt("return",!1);case 28:if(y=m["business_data_id"],g=m["process_audit"],u["e"](m["employee"]).includes(a["username"])||u["e"](m["employee"]).includes(a["realname"])){e.next=33;break}return n.$message.warning("æ‚¨ä¸åœ¨æ­¤å®¡æ‰¹æµç¨‹è®°å½•çš„æ“ä½œèŒå‘˜åˆ—ä¸­ï¼Œæ— æ³•è¿›è¡Œå®¡æ‰¹æ“ä½œï¼"),e.abrupt("return",!1);case 33:return e.prev=33,e.next=36,s["queryProcessLog"](w,y);case 36:b=e.sent,e.next=42;break;case 39:e.prev=39,e.t1=e["catch"](33),console.log(e.t1);case 42:return window.__.each(b,(function(e){var t=e["create_time"];e["approve_user"]=a["username"],e["action"]=l,e["operate_time"]=c,e["action_opinion"]=p,e["create_time"]=u["i"](t,"yyyy-MM-dd hh:mm:ss")})),v=JSON.parse(JSON.stringify(b)),e.next=46,s["queryBusinessInfo"](w);case 46:if(x=e.sent,n.fixedWFlow=x[0],n.rights=x,!(x.length>1&&"000000000"!=m.business_code)){e.next=55;break}return n.tipVisible=!0,n.tipContent="è·å–åˆ°æ­¤ä¸šåŠ¡å«æœ‰å¤šä¸ªæµç¨‹æƒè´£ï¼Œè¯·è”ç³»ç®¡ç†å‘˜è¿›è¡Œé…ç½®ï¼",e.abrupt("return",!1);case 55:if(!(x.length<=0&&"000000000"!=m.business_code)){e.next=61;break}return n.tipVisible=!0,n.tipContent="æœªè·å–åˆ°æ­¤ä¸šåŠ¡çš„æµç¨‹æƒè´£ï¼Œæ— æ³•åŒæ„å®¡æ‰¹ï¼",e.abrupt("return",!1);case 61:if(R="",O="",N=g,S=""==u["e"](O)?"":O.split(","),"000000000"==m.business_code){e.next=80;break}e.prev=66,R=","+n.fixedWFlow["audit"]+","+n.fixedWFlow["approve"]+",",O=n.fixedWFlow["notify"],_=n.fixedWFlow["approve"],e.next=78;break;case 72:return e.prev=72,e.t2=e["catch"](66),n.tipVisible=!0,n.tipContent="å›ºåŒ–æµç¨‹è®¾ç½®èŠ‚ç‚¹å¤±è´¥ï¼Œæ— æ³•è¿›è¡Œå®¡æ‰¹æ“ä½œï¼",console.log("å›ºåŒ–æµç¨‹è®¾ç½®èŠ‚ç‚¹å¤±è´¥ :"+e.t2),e.abrupt("return",!1);case 78:e.next=106;break;case 80:e.prev=80,N=m["employee"];try{k=JSON.parse(m.business_data)}catch(d){console.log(d)}if(!("audit_node"in k)&&!("approve_node"in k)&&!("notify_node"in k))try{k=JSON.parse(k.business_data)}catch(d){console.log(d)}return e.next=86,s["queryCurFreeWorkflow"](y);case 86:D=e.sent,""!=u["e"](D)&&(k=D),console.log("free node back data : "+D),k.audit_node=",".concat(k.audit_node,","),k.audit_node.indexOf(","+N+",")!=k.audit_node.lastIndexOf(","+N+",")&&(k.audit_node=k.audit_node.replace(","+N+",",",")),""!=u["e"](n.wflowAddUsers)&&(k.audit_node=k.audit_node.replace(",".concat(N,","),",".concat(N,",").concat(n.wflowAddUsers,","))),""!=u["e"](n.wflowNotifyUsers)&&(k.audit_node=k.audit_node.replace(",".concat(N,","),",".concat(N,",").concat(n.wflowNotifyUsers,",").concat(N,","))),k.audit_node.startsWith(",")&&(k.audit_node=k.audit_node.substring(1)),k.audit_node.endsWith(",")&&(k.audit_node=k.audit_node.substring(0,k.audit_node.length-1)),R=","+u["e"](k.audit_node)+","+u["e"](k.approve_node)+",",S=""==u["e"](k.notify_node)?[]:[k.notify_node],_=k.approve_node,e.next=106;break;case 100:return e.prev=100,e.t3=e["catch"](80),n.tipVisible=!0,n.tipContent="è‡ªç”±æµç¨‹è®¾ç½®èŠ‚ç‚¹å¤±è´¥ï¼Œæ— æ³•è¿›è¡Œå®¡æ‰¹æ“ä½œï¼",console.log("è‡ªç”±æµç¨‹è®¾ç½®èŠ‚ç‚¹å¤±è´¥ :"+e.t3),e.abrupt("return",!1);case 106:if(""==u["e"](n.wflowAddUsers)&&""==u["e"](n.wflowNotifyUsers)&&R.indexOf(","+N+",")!=R.lastIndexOf(","+N+",")&&(R=R.replace(","+N+",",",")),J=R.split(","+N+","),T=J[1],q={},""!=T){e.next=155;break}q={bpm_status:"4"},U=!0,I=!1,j=void 0,e.prev=115,$=S[Symbol.iterator]();case 117:if(U=(C=$.next()).done){e.next=133;break}return F=C.value,e.next=121,s["queryProcessNodeEmployee"](F);case 121:return L=e.sent,e.next=124,s["queryProcessNodeProcName"](F);case 124:return P=e.sent,W={},W="000000000"!=m.business_code?{id:s["queryRandomStr"](32),table_name:w,main_value:m["main_value"],business_data_id:m["business_data_id"],business_code:n.fixedWFlow["id"],process_name:n.fixedWFlow["items"],employee:L[0]["employee"],process_station:P[0]["item_text"],process_audit:F,operate_time:c,create_time:c,proponents:m["proponents"],content:m["content"],business_data:JSON.stringify(m)}:{id:s["queryRandomStr"](32),table_name:w,main_value:m["business_data_id"],business_data_id:m["business_data_id"],business_code:"000000001",process_name:"è‡ªç”±æµç¨‹çŸ¥ä¼š",employee:F,process_station:"è‡ªç”±æµç¨‹çŸ¥ä¼š",process_audit:"000000001",proponents:m["proponents"],content:m["content"],operate_time:c,create_time:c,business_data:m.business_data},e.next=129,s["postProcessLogInformed"](W);case 129:t=e.sent;case 130:U=!0,e.next=117;break;case 133:e.next=139;break;case 135:e.prev=135,e.t4=e["catch"](115),I=!0,j=e.t4;case 139:e.prev=139,e.prev=140,U||null==$.return||$.return();case 142:if(e.prev=142,!I){e.next=145;break}throw j;case 145:return e.finish(142);case 146:return e.finish(139);case 147:return M={id:s["queryRandomStr"](32),type:"approve",create_by:a["username"],create_time:c,table_name:w,table_id:m["business_data_id"],table_data:JSON.stringify(n.curRow),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:""}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:v}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:W}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:v}),origin_data:JSON.stringify({operation:"patch",tableName:w,id:m["business_data_id"],data:q}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:JSON.stringify({})},e.next=150,i["b"](w,m,M,null,v,q,k,n.wflowAddUsers,n.wflowNotifyUsers,N);case 150:return e.next=152,f.handleTaskItem();case 152:n.tipContent="åŒæ„å®¡æ‰¹æˆåŠŸï¼Œå®¡æ‰¹æµç¨‹å¤„ç†å®Œæ¯•ï¼",e.next=182;break;case 155:if(T=0==T.indexOf(",")?T.substring(1):T,T=T.split(",")[0],q=_==T?{bpm_status:"3"}:{bpm_status:"2"},W={},"000000000"==m.business_code){e.next=169;break}return e.next=162,s["queryProcessNodeEmployee"](T);case 162:return L=e.sent,e.next=165,s["queryProcessNodeProcName"](T);case 165:P=e.sent,W={id:s["queryRandomStr"](32),table_name:w,main_value:m["main_value"],business_data_id:m["business_data_id"],business_code:n.fixedWFlow["id"],process_name:n.fixedWFlow["items"],employee:L[0]["employee"],process_station:P[0]["item_text"],process_audit:T,proponents:m["proponents"],content:m["content"],create_time:c,business_data:m.business_data},e.next=170;break;case 169:W={id:s["queryRandomStr"](32),table_name:w,main_value:m["business_data_id"],business_data_id:m["business_data_id"],business_code:"000000000",process_name:"è‡ªç”±æµç¨‹å®¡æ‰¹",employee:T,process_station:"è‡ªç”±æµç¨‹å®¡æ‰¹",process_audit:"000000000",proponents:m["proponents"],content:m["content"],operate_time:c,create_time:c,business_data:m.business_data};case 170:return e.next=172,s["queryApprovalLength"](w,m["business_data_id"]);case 172:if(V=e.sent,0!=V){e.next=177;break}n.tipContent="å¤„ç†å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•ï¼›å¦‚æœå¤šæ¬¡å¤„ç†å¼‚å¸¸ï¼Œå¯èƒ½éœ€è¦æ’¤é”€å½“å‰å®¡æ‰¹ï¼Œé‡æ–°å‘èµ·å®¡æ‰¹æµç¨‹ï¼å¼‚å¸¸æµç¨‹æ•°æ®[status:".concat(V,"]"),e.next=182;break;case 177:return A={id:s["queryRandomStr"](32),type:"next",create_by:a["username"],create_time:c,table_name:w,table_id:m["business_data_id"],table_data:JSON.stringify(n.curRow),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:W}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:v}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:""}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:v}),origin_data:JSON.stringify({operation:"patch",tableName:w,id:m["business_data_id"],data:q}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:""},e.next=180,i["b"](w,m,A,W,v,q,k,n.wflowAddUsers,n.wflowNotifyUsers,N);case 180:n.tipContent="åŒæ„å®¡æ‰¹æˆåŠŸï¼Œå®¡æ‰¹æµç¨‹å·²æ¨å‘åç»­å¤„ç†äººï¼",console.log("operationData : "+A);case 182:return n.tipVisible=!0,s["setTimeouts"].apply(s,[function(){f.loadData()}].concat(Object(r["a"])(f.refreshInterval))),f.pageType="view",e.abrupt("return",t);case 186:case"end":return e.stop()}}),e,null,[[16,22],[33,39],[66,72],[80,100],[115,135,139,147],[140,,142,146]])})));function t(){return e.apply(this,arguments)}return t}()});case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleTaskItem:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,c,l,p,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:"",n=u["n"]("table_name"),r=(new Date).getTime(),"bs_plan_task"!=n){e.next=39;break}a=!0,i=!1,o=void 0,e.prev=7,c=this.data[Symbol.iterator]();case 9:if(a=(l=c.next()).done){e.next=25;break}return p=l.value,delete p.no,delete p.real_start_time,delete p.real_end_time,delete p.date,delete p.work_date,p.create_time=u["i"](r,"yyyy-MM-dd"),p.depart_name=this.curRow.depart_name,p.status="å¾…æäº¤",e.next=21,s["postTableData"]("bs_plan_task_mission",p);case 21:t=e.sent;case 22:a=!0,e.next=9;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e["catch"](7),i=!0,o=e.t0;case 31:e.prev=31,e.prev=32,a||null==c.return||c.return();case 34:if(e.prev=34,!i){e.next=37;break}throw o;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return e.abrupt("return",t);case 40:case"end":return e.stop()}}),e,this,[[7,27,31,39],[32,,34,38]])})));function t(){return e.apply(this,arguments)}return t}(),handleRejectWF:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm_({title:"ç¡®è®¤æ“ä½œ",content:"æ˜¯å¦è¿›è¡Œé©³å›å®¡æ‰¹æ“ä½œ?",onOk:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a,c,l,p,d,f,m,h,w,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,c=o["e"]("cur_user"),e.next=4,t.handleUserInfo(c);case 4:return l=u["i"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),p=p||"é©³å›",d=d||n.curRow.idea_content||"é©³å›",f=n.curRow,m=u["n"]("processLogID"),h=f["table_name"]||u["n"]("table_name"),w={bpm_status:"1"},e.next=13,s["queryProcessLogByID"](h,m);case 13:if(f=e.sent,u["e"](f["employee"]).includes(c["username"])||u["e"](f["employee"]).includes(c["realname"])){e.next=17;break}return n.$message.warning("æ‚¨ä¸åœ¨æ­¤å®¡æ‰¹æµç¨‹è®°å½•çš„æ“ä½œèŒå‘˜åˆ—ä¸­ï¼Œæ— æ³•è¿›è¡Œé©³å›æ“ä½œï¼"),e.abrupt("return",!1);case 17:return e.next=19,s["queryProcessLogByID"](h,f["id"]);case 19:return f=e.sent,e.next=22,s["queryProcessLog"](h,f["business_data_id"]);case 22:return _=e.sent,window.__.each(_,(function(e){var t=e["create_time"];e["approve_user"]=c["username"],e["action"]=p,e["operate_time"]=l,e["action_opinion"]=d,e["create_time"]=u["i"](t,"yyyy-MM-dd hh:mm:ss")})),e.next=26,i["b"](h,f,null,null,_,w);case 26:return n.tipVisible=!0,n.tipContent="é©³å›å®¡æ‰¹æˆåŠŸï¼",t.pageType="view",s["setTimeouts"].apply(s,[function(){t.loadData()}].concat(Object(r["a"])(t.refreshInterval))),e.abrupt("return",a);case 31:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleConfirmWF:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm_({title:"ç¡®è®¤æ“ä½œ",content:"æ˜¯å¦è¿›è¡Œç¡®è®¤çŸ¥ä¼šæ“ä½œ?",onOk:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a,i,c,l,p,d,f,m,h,w,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,i=o["e"]("cur_user"),e.next=4,t.handleUserInfo(i);case 4:return c=u["i"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),l=l||"çŸ¥ä¼š",p=p||n.curRow.idea_content||"çŸ¥ä¼šç¡®è®¤",d=n.curRow,f=u["n"]("processLogID"),m=u["n"]("table_name"),h={bpm_status:"5"},e.next=13,s["queryProcessLogInfByID"](m,f);case 13:if(d=e.sent,d["create_time"]=c,!(u["e"](d["approve_user"]).length>=u["e"](d["employee"]).length)){e.next=34;break}return e.prev=16,e.next=19,s["postProcessLogHistory"](d);case 19:return a=e.sent,e.next=22,s["deleteProcessLogInf"](m,[d]);case 22:return a=e.sent,e.next=25,s["patchTableData"](m,d["business_data_id"],h);case 25:a=e.sent,e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](16),console.log(e.t0);case 31:return n.tipVisible=!0,n.tipContent="çŸ¥ä¼šç¡®è®¤æˆåŠŸï¼",e.abrupt("return",!0);case 34:if(w=","+u["e"](d["employee"])+",",_=","+u["e"](d["approve_user"])+",",u["e"](w).includes(","+i["username"]+",")||u["e"](w).includes(","+i["realname"]+",")){e.next=39;break}return n.$message.warning("æ‚¨ä¸åœ¨æ­¤çŸ¥ä¼šè®°å½•çš„æ“ä½œèŒå‘˜åˆ—ä¸­ï¼Œæ— æ³•è¿›è¡Œç¡®è®¤æ“ä½œï¼"),e.abrupt("return",!1);case 39:if(!u["e"](_).includes(","+i["username"]+",")&&!u["e"](_).includes(","+i["realname"]+",")){e.next=42;break}return n.$message.warning("æ‚¨å·²ç»åœ¨æ­¤çŸ¥ä¼šè®°å½•ä¸­ï¼Œæ‰§è¡Œè¿‡ç¡®è®¤æ“ä½œäº†ï¼"),e.abrupt("return",!1);case 42:return d["approve_user"]=u["e"](d["approve_user"])+(""==u["e"](d["approve_user"])?"":",")+i["username"],d["action"]=l,d["operate_time"]=c,d["action_opinion"]=u["e"](d["action_opinion"])+(""==u["e"](d["action_opinion"])?"":"\n\r")+"".concat(i["username"],":").concat(p),e.next=48,s["patchTableData"]("PR_LOG_INFORMED",d["id"],d);case 48:if(!(d["approve_user"].length>=d["employee"].length)){e.next=64;break}return e.prev=49,e.next=52,s["postProcessLogHistory"](d);case 52:return a=e.sent,e.next=55,s["deleteProcessLogInf"](m,[d]);case 55:return a=e.sent,e.next=58,s["patchTableData"](m,d["business_data_id"],h);case 58:a=e.sent,e.next=64;break;case 61:e.prev=61,e.t1=e["catch"](49),console.log(e.t1);case 64:return n.tipVisible=!0,n.tipContent="çŸ¥ä¼šç¡®è®¤æˆåŠŸï¼",t.pageType="view",s["setTimeouts"].apply(s,[function(){t.loadData()}].concat(Object(r["a"])(t.refreshInterval))),e.abrupt("return",a);case 69:case"end":return e.stop()}}),e,null,[[16,28],[49,61]])})));function n(){return e.apply(this,arguments)}return n}()});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSubmitWF:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,c,l,p,d,f,m,h,w,_,b,y,g,v,x,k,R,O,N,S,D,J=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.wflowUsers,n=this.notifyUsers,c=this.approveUser,l=i["a"](t,n,c,this.pageType,this.$confirm_),p=u["n"]("table_name"),d=u["n"]("id"),e.next=8,s["queryApprovalExist"](p,d);case 8:if(f=e.sent,!f){e.next=13;break}return this.$confirm_({title:"æ¸©é¦¨æç¤º",content:"å¾…å®¡è®°å½•ä¸­ï¼Œå·²ç»å­˜åœ¨æ­¤è®°å½•ï¼Œæ— æ³•å†æ¬¡æäº¤å®¡æ‰¹ï¼"}),s["setTimeouts"].apply(s,[function(){J.loadData()}].concat(Object(r["a"])(this.refreshInterval))),e.abrupt("return",!0);case 13:if(f=o["e"]("start_free_process_@table_name#".concat(p,"@id#").concat(d)),"true"!=f){e.next=18;break}return this.$confirm_({title:"æ¸©é¦¨æç¤º",content:"æ­¤è¡¨å•æ‰æäº¤è¿‡ç”³è¯·ï¼Œè¯·ç¨åå†æäº¤ç”³è¯·ï¼"}),s["setTimeouts"].apply(s,[function(){J.loadData()}].concat(Object(r["a"])(this.refreshInterval))),e.abrupt("return",!0);case 18:if("bs_plan_task"!=p){e.next=89;break}m="",h=!0,w=!1,_=void 0,e.prev=23,b=this.data[Symbol.iterator]();case 25:if(h=(y=b.next()).done){e.next=36;break}return g=y.value,e.next=29,s["patchCnameEname"](g.create_by);case 29:if(v=e.sent,!u["k"](v)){e.next=33;break}return m=g.create_by,e.abrupt("break",36);case 33:h=!0,e.next=25;break;case 36:e.next=42;break;case 38:e.prev=38,e.t0=e["catch"](23),w=!0,_=e.t0;case 42:e.prev=42,e.prev=43,h||null==b.return||b.return();case 45:if(e.prev=45,!w){e.next=48;break}throw _;case 48:return e.finish(45);case 49:return e.finish(42);case 50:if(u["k"](m)){e.next=53;break}return this.$confirm_({title:"æ¸©é¦¨æç¤º",content:"è®¡åˆ’ä»»åŠ¡ä¸­ï¼Œåˆ†é…è´£ä»»äºº: ".concat(m," ä¸å­˜åœ¨ç³»ç»Ÿä¸­ï¼Œè¯·ä¿®æ”¹ååœ¨æäº¤å®¡æ‰¹ï¼")}),e.abrupt("return",!1);case 53:m="",x=!0,k=!1,R=void 0,e.prev=57,O=this.data[Symbol.iterator]();case 59:if(x=(N=O.next()).done){e.next=72;break}if(S=N.value,!u["k"](S.task_exector)){e.next=63;break}return e.abrupt("continue",69);case 63:return e.next=65,s["patchCnameEname"](S.task_exector);case 65:if(D=e.sent,!u["k"](D)){e.next=69;break}return m=S.task_exector,e.abrupt("break",72);case 69:x=!0,e.next=59;break;case 72:e.next=78;break;case 74:e.prev=74,e.t1=e["catch"](57),k=!0,R=e.t1;case 78:e.prev=78,e.prev=79,x||null==O.return||O.return();case 81:if(e.prev=81,!k){e.next=84;break}throw R;case 84:return e.finish(81);case 85:return e.finish(78);case 86:if(u["k"](m)){e.next=89;break}return this.$confirm_({title:"æ¸©é¦¨æç¤º",content:"è®¡åˆ’ä»»åŠ¡ä¸­ï¼Œæ‰§è¡Œäººå‘˜: ".concat(m," ä¸å­˜åœ¨ç³»ç»Ÿä¸­ï¼Œè¯·ä¿®æ”¹ååœ¨æäº¤å®¡æ‰¹ï¼")}),e.abrupt("return",!1);case 89:if("bs_plan_task_mission"!=p){e.next=96;break}if("å·²å®Œæˆ"==this.curRow.status){e.next=93;break}return this.$confirm_({title:"æ¸©é¦¨æç¤º",content:"è®¡åˆ’ä»»åŠ¡å®Œæˆæƒ…å†µè¡¨ï¼Œå¿…é¡»åœ¨å®ŒæˆçŠ¶æ€ä¸ºâ€™å·²å®Œæˆâ€˜æ—¶ï¼Œæ‰å¯ä»¥æäº¤å®¡æ‰¹ï¼"}),e.abrupt("return",!1);case 93:if(!u["k"](this.curRow.remark)){e.next=96;break}return this.$confirm_({title:"æ¸©é¦¨æç¤º",content:"è®¡åˆ’ä»»åŠ¡å®Œæˆæƒ…å†µè¡¨ï¼Œæœªå¡«å†™â€™å®Œæˆæƒ…å†µâ€˜è¯´æ˜ï¼Œæ— æ³•æäº¤å®¡æ‰¹ï¼"}),e.abrupt("return",!1);case 96:if(l){e.next=98;break}return e.abrupt("return",l);case 98:this.$confirm_({title:"ç¡®è®¤æ“ä½œ",content:"æ˜¯å¦ç¡®è®¤æäº¤æ­¤è‡ªç”±æµç¨‹?",onOk:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,c,l,f,m,h,w,_,b,y,g,v,x,k,R;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o["e"]("cur_user"),e.next=3,J.handleUserInfo(t);case 3:if(n=J.wflowUsers,a=J.notifyUsers,c=J.approveUser,l=u["i"](new Date,"yyyy-MM-dd hh:mm:ss"),f=u["n"]("table_name"),m={id:s["queryRandomStr"](32),create_by:t["username"],create_time:l,table_name:f,main_key:u["n"]("id"),audit_node:u["e"](n),approve_node:u["e"](c),notify_node:u["e"](a)},""==u["e"](c)||"workflowing"!=J.pageType){e.next=34;break}return h=null,w=JSON.parse(JSON.stringify(m)),m={id:s["queryRandomStr"](32),table_name:f,main_value:u["n"]("id"),business_data_id:u["n"]("id"),business_code:"000000000",process_name:"è‡ªç”±æµç¨‹å®¡æ‰¹",employee:t["username"],process_station:"è‡ªç”±æµç¨‹å®¡æ‰¹",process_audit:"000000000",proponents:t["username"],approve_user:t["username"],action:"å‘èµ·",action_opinion:"å‘èµ·è‡ªç”±æµç¨‹",content:J.curRow["content"]||J.curRow["title"]||J.curRow["plan_title"]||J.curRow["task_title"],operate_time:l,create_time:l,business_data:JSON.stringify(w)},_=JSON.parse(JSON.stringify(m)),b=""==u["e"](n)?u["e"](c):u["e"](n).split(",")[0],m={id:s["queryRandomStr"](32),table_name:f,main_value:u["n"]("id"),business_data_id:u["n"]("id"),business_code:"000000000",process_name:"è‡ªç”±æµç¨‹å®¡æ‰¹",employee:b,process_station:"è‡ªç”±æµç¨‹å®¡æ‰¹",process_audit:"000000000",proponents:t["username"],content:J.curRow["content"]||J.curRow["title"]||J.curRow["plan_title"]||J.curRow["task_title"],operate_time:l,create_time:l,business_data:JSON.stringify(m)},y=JSON.parse(JSON.stringify(m)),e.next=19,s["queryApprovalExist"](f,J.curRow["id"]);case 19:if(g=e.sent,!g){e.next=26;break}return J.$confirm_({title:"æ¸©é¦¨æç¤º",content:"å¾…å®¡è®°å½•ä¸­ï¼Œå·²ç»å­˜åœ¨æ­¤è®°å½•ï¼Œæ— æ³•å†æ¬¡æäº¤å®¡æ‰¹ï¼"}),s["setTimeouts"].apply(s,[function(){J.loadData()}].concat(Object(r["a"])(J.refreshInterval))),e.abrupt("return",!0);case 26:return e.next=28,i["d"](f,J.curRow,w,_,y,"2");case 28:return console.log(" æäº¤å®¡æ‰¹è¿”å›ç»“æœ: "+JSON.stringify(h)),J.$confirm_({title:"æ“ä½œæˆåŠŸ",content:"æäº¤è‡ªç”±æµç¨‹å®¡æ‰¹æˆåŠŸï¼",onOk:function(){console.log("æäº¤è‡ªç”±æµç¨‹å®¡æ‰¹æˆåŠŸï¼")}}),o["g"]("start_free_process_@table_name#".concat(p,"@id#").concat(d),"true",60),J.pageType="view",s["setTimeouts"].apply(s,[function(){J.loadData()}].concat(Object(r["a"])(J.refreshInterval))),e.abrupt("return",!0);case 34:if(""==u["e"](a)||"notifying"!=J.pageType){e.next=64;break}return e.next=37,s["queryTableData"](f,u["n"]("id"));case 37:return v=e.sent,e.next=40,s["queryPRLogInfTotal"](u["n"]("id"));case 40:return x=e.sent,e.next=43,s["queryTableDataByField"]("v_handling_events","id",u["n"]("id"));case 43:if(k=e.sent,4==v["bpm_status"]||5==v["bpm_status"]){e.next=47;break}return J.$confirm_({title:"æ¸©é¦¨æç¤º",content:"æ­¤è¡¨å•ä¸šåŠ¡å°šæœªå®¡æ‰¹é€šè¿‡ï¼Œæ— æ³•è¿›è¡ŒçŸ¥ä¼šæ“ä½œï¼"}),e.abrupt("return",!0);case 47:if(!(""!=u["e"](x)&&x.today>=3)){e.next=50;break}return J.$confirm_({title:"æ¸©é¦¨æç¤º",content:"åŒä¸€ä¸šåŠ¡æ•°æ®ï¼Œæ¯å¤©æœ€å¤šçŸ¥ä¼š3æ¬¡ï¼"}),e.abrupt("return",!0);case 50:if(!(""!=u["e"](x)&&x.total>=10)){e.next=53;break}return J.$confirm_({title:"æ¸©é¦¨æç¤º",content:"åŒä¸€ä¸šåŠ¡æ•°æ®ï¼Œæ€»è®¡æœ€å¤šçŸ¥ä¼š10æ¬¡ï¼"}),e.abrupt("return",!0);case 53:if(!(""!=u["e"](k)&&k.length>=1)){e.next=56;break}return J.$confirm_({title:"æ¸©é¦¨æç¤º",content:"æ­¤è¡¨å•ä¸šåŠ¡å·²è¿›è¡Œäº†çŸ¥ä¼šæ“ä½œï¼Œè¯·ä¸è¦é‡å¤æäº¤!"}),e.abrupt("return",!0);case 56:return R={id:s["queryRandomStr"](32),table_name:f,main_value:u["n"]("id"),business_data_id:u["n"]("id"),business_code:"000000001",process_name:"è‡ªç”±æµç¨‹çŸ¥ä¼š",employee:u["e"](a),process_station:"è‡ªç”±æµç¨‹çŸ¥ä¼š",process_audit:"000000001",operate_time:l,create_time:l,proponents:t["username"],content:J.curRow["content"]||J.curRow["title"]||J.curRow["plan_title"]||J.curRow["task_title"],business_data:JSON.stringify(J.curRow)},e.next=59,s["postProcessLogInformed"](R);case 59:return h=e.sent,J.$confirm_({title:"æ“ä½œæˆåŠŸ",content:"çŸ¥ä¼šæ“ä½œæˆåŠŸï¼",onOk:function(){console.log("çŸ¥ä¼šæ“ä½œæˆåŠŸï¼")}}),J.pageType="view",s["setTimeouts"].apply(s,[function(){J.loadData()}].concat(Object(r["a"])(J.refreshInterval))),e.abrupt("return",!0);case 64:console.log("ç¡®è®¤æäº¤æ­¤è‡ªç”±æµç¨‹ï¼");case 65:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()});case 99:case"end":return e.stop()}}),e,this,[[23,38,42,50],[43,,45,49],[57,74,78,86],[79,,81,85]])})));function t(){return e.apply(this,arguments)}return t}(),handleWriteComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=u["k"](this.curRow.id)?u["n"]("id"):this.curRow.id,!u["k"](this.replayid)){e.next=10;break}return n={id:u["m"](),create_by:this.userInfo.username,create_time:u["i"](new Date,"yyyy-MM-dd hh:mm:ss"),content:"".concat(this.replayvalue," "),table_name:this.tableName,main_key:t,avatar:this.avatar},this.replayvalue="",this.$message.warning("è¯„è®ºæˆåŠŸï¼"),e.next=7,s["postTableData"]("bs_comments",JSON.parse(JSON.stringify(n)));case 7:this.loadData(),e.next=22;break;case 10:return e.next=12,s["queryTableData"]("bs_comments",this.replayid);case 12:return a=e.sent,i=u["k"](a.replay)?[]:JSON.parse(a.replay),i.push({id:u["m"](),create_by:this.userInfo.username,create_time:u["i"](new Date,"yyyy-MM-dd hh:mm:ss"),content:"".concat(this.replayvalue," "),table_name:this.tableName,avatar:this.avatar}),o={id:this.replayid,replay:JSON.stringify(i)},this.replayvalue="",e.next=19,s["patchTableData"]("bs_comments",this.replayid,JSON.parse(JSON.stringify(o)));case 19:s["setTimeouts"].apply(s,[function(){c.loadData()}].concat(Object(r["a"])(this.refreshInterval))),this.$message.warning("å›å¤æˆåŠŸï¼"),this.replayid="";case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleReplayComments:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.replayvalue="@".concat(n," "),this.replayid=t,this.$nextTick((function(){try{this.$refs.input.focus(),this.$refs.textarea.focus()}catch(d){console.log(d)}}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleLikeComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryTableData"]("bs_comments",t);case 2:return n=e.sent,r={id:t,likes:n.likes+1},e.next=6,s["patchTableData"]("bs_comments",t,JSON.parse(JSON.stringify(r)));case 6:this.loadData(),this.$message.warning("ç‚¹èµæˆåŠŸï¼");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDislikeComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryTableData"]("bs_comments",t);case 2:return n=e.sent,r={id:t,dislikes:n.dislikes+1},e.next=6,s["patchTableData"]("bs_comments",t,JSON.parse(JSON.stringify(r)));case 6:this.loadData(),this.$message.warning("é„™è§†æˆåŠŸï¼");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDeleteComments:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryTableData"]("bs_comments",t);case 2:if(r=e.sent,this.userInfo.username==n&&this.userInfo.username==r.create_by){e.next=7;break}this.$message.warning("æ— æ³•åˆ é™¤ä»–äººè¯„è®ºï¼"),e.next=12;break;case 7:return this.replayvalue="",e.next=10,s["deleteTableData"]("bs_comments",t);case 10:this.loadData(),this.$message.warning("åˆ é™¤å›å¤æˆåŠŸï¼");case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleDeleteSubComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryTableData"]("bs_comments",t);case 2:return r=e.sent,a=u["k"](r.replay)?[]:JSON.parse(r.replay),a=window.__.reject(a,(function(e){return e.id==n})),i={id:t,replay:JSON.stringify(a)},this.replayvalue="",e.next=9,s["patchTableData"]("bs_comments",t,JSON.parse(JSON.stringify(i)));case 9:this.loadData(),this.$message.warning("åˆ é™¤è¯„è®ºæˆåŠŸï¼"),this.replayid="";case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleLikeSubComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryTableData"]("bs_comments",t);case 2:return r=e.sent,a=u["k"](r.replay)?[]:JSON.parse(r.replay),window.__.each(a,(function(e){e.id==n&&(e.likes=u["k"](e.likes)?1:e.likes+1)})),i={id:t,replay:JSON.stringify(a)},this.replayvalue="",e.next=9,s["patchTableData"]("bs_comments",t,JSON.parse(JSON.stringify(i)));case 9:this.loadData(),this.$message.warning("ç‚¹èµæˆåŠŸï¼");case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleDislikeSubComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["queryTableData"]("bs_comments",t);case 2:return r=e.sent,a=u["k"](r.replay)?[]:JSON.parse(r.replay),window.__.each(a,(function(e){e.id==n&&(e.dislikes=u["k"](e.dislikes)?1:e.dislikes+1)})),i={id:t,replay:JSON.stringify(a)},this.replayvalue="",e.next=9,s["patchTableData"]("bs_comments",t,JSON.parse(JSON.stringify(i)));case 9:this.loadData(),this.$message.warning("é„™è§†æˆåŠŸï¼");case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleCancelComment:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.replayvalue="",this.commentFlag="no",this.$message.warning("å–æ¶ˆè¯„è®ºï¼");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}}}]);