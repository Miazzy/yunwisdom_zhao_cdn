(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e59b3","chunk-2d0e59b3","chunk-2d0e59b3"],{"94ce":function(e,t){(function(e){"use strict";var t=function(e){var n=e,r=function(){return n},o=function(e){n=e},i=function(){return t(r())};return{get:r,set:o,clone:i}},n=function(){},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},o=function(e){return function(){return e}},i=function(e){return e};function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var c=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},a=function(e){return function(){throw new Error(e)}},l=o(!1),f=o(!0),s=function(){return d},d=function(){var e=function(e){return e.isNone()},t=function(e){return e()},r=function(e){return e},i={fold:function(e,t){return e()},is:l,isSome:l,isNone:f,getOr:r,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:r,orThunk:t,map:s,each:n,bind:s,exists:l,forall:f,filter:s,equals:e,equals_:e,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(i),i}(),m=function(e){var t=o(e),n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:f,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return m(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:d},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(l,(function(t){return n(e,t)}))}};return i},g=function(e){return null===e||void 0===e?d:m(e)},p={some:m,none:s,from:g},h=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},b=function(e){return function(t){return v(t)===e}},w=b("string"),y=b("array"),C=b("boolean"),S=b("function"),x=b("number"),R=Array.prototype.slice,T=Array.prototype.indexOf,O=Array.prototype.push,A=function(e,t){return T.call(e,t)},D=function(e,t){return A(e,t)>-1},E=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return!0}return!1},B=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},I=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];t(o,n)}},N=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n)}},k=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},P=function(e,t,n){return N(e,(function(e){n=t(n,e)})),n},M=function(e,t,n){return I(e,(function(e){n=t(n,e)})),n},W=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return p.some(o)}return p.none()},_=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return p.some(n)}return p.none()},L=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!y(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);O.apply(t,e[n])}return t},H=function(e,t){return L(B(e,t))},j=function(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(!0!==t(o,n))return!1}return!0},z=function(e){var t=R.call(e,0);return t.reverse(),t},F=function(e){return 0===e.length?p.none():p.some(e[e.length-1])},U=(S(Array.from)&&Array.from,function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return p.none()}),V=Object.keys,q=Object.hasOwnProperty,G=function(e,t){for(var n=V(e),r=0,o=n.length;r<o;r++){var i=n[r],u=e[i];t(u,i)}},Y=function(e,t){return K(e,(function(e,n){return{k:n,v:t(e,n)}}))},K=function(e,t){var n={};return G(e,(function(e,r){var o=t(e,r);n[o.k]=o.v})),n},X=function(e,t){return $(e,t)?p.from(e[t]):p.none()},$=function(e,t){return q.call(e,t)},J=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return I(e,(function(e,n){r[e]=o(t[n])})),r}},Q=function(e){return e.slice(0).sort()},Z=function(e,t){throw new Error("All required keys ("+Q(e).join(", ")+") were not specified. Specified keys were: "+Q(t).join(", ")+".")},ee=function(e){throw new Error("Unsupported keys for object: "+Q(e).join(", "))},te=function(e,t){if(!y(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");I(t,(function(t){if(!w(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},ne=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Q(e).join(", ")+") were not.")},re=function(e){var t=Q(e),n=W(t,(function(e,n){return n<t.length-1&&e===t[n+1]}));n.each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},oe=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return te("required",e),te("optional",t),re(n),function(r){var i=V(r),u=j(e,(function(e){return D(i,e)}));u||Z(e,i);var c=k(i,(function(e){return!D(n,e)}));c.length>0&&ee(c);var a={};return I(e,(function(e){a[e]=o(r[e])})),I(t,(function(e){a[e]=o(Object.prototype.hasOwnProperty.call(r,e)?p.some(r[e]):p.none())})),a}},ie=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE),ue=e.Node.DOCUMENT_NODE,ce=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ae=e.Node.TEXT_NODE,le=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,"undefined"!==typeof e.window?e.window:Function("return this;")(),function(e){var t=e.dom().nodeName;return t.toLowerCase()}),fe=function(e){return e.dom().nodeType},se=function(e){return function(t){return fe(t)===e}},de=function(e){return fe(e)===ie||"#comment"===le(e)},me=se(ce),ge=se(ae),pe=function(t,n,r){if(!(w(r)||C(r)||x(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},he=function(e,t,n){pe(e.dom(),t,n)},ve=function(e,t){var n=e.dom();G(t,(function(e,t){pe(n,t,e)}))},be=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},we=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},ye=function(e,t){e.dom().removeAttribute(t)},Ce=function(e){return M(e.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},Se=function(e,t,n){if(""===t)return!0;if(e.length<t.length)return!1;var r=e.substr(n,n+t.length);return r===t},xe=function(e,t){return-1!==e.indexOf(t)},Re=function(e,t){return Se(e,t,0)},Te=function(e,t){return Se(e,t,e.length-t.length)},Oe=function(e){return e.replace(/^\s+|\s+$/g,"")},Ae=function(e){return void 0!==e.style&&S(e.style.getPropertyValue)},De=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Ee=function(t,n){var r=n||e.document,o=r.createElement("div");if(o.innerHTML=t,!o.hasChildNodes()||o.childNodes.length>1)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Ne(o.childNodes[0])},Be=function(t,n){var r=n||e.document,o=r.createElement(t);return Ne(o)},Ie=function(t,n){var r=n||e.document,o=r.createTextNode(t);return Ne(o)},Ne=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:o(e)}},ke=function(e,t,n){var r=e.dom();return p.from(r.elementFromPoint(t,n)).map(Ne)},Pe={fromHtml:Ee,fromTag:Be,fromText:Ie,fromDom:Ne,fromPoint:ke},Me=function(e){var t=ge(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},We=De((function(){return _e(Pe.fromDom(e.document))})),_e=function(e){var t=e.dom().body;if(null===t||void 0===t)throw new Error("Body is not available yet");return Pe.fromDom(t)},Le=function(t,n,r){if(!w(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);Ae(t)&&t.style.setProperty(n,r)},He=function(e,t){Ae(e)&&e.style.removeProperty(t)},je=function(e,t,n){var r=e.dom();Le(r,t,n)},ze=function(e,t){var n=e.dom();G(t,(function(e,t){Le(n,t,e)}))},Fe=function(t,n){var r=t.dom(),o=e.window.getComputedStyle(r),i=o.getPropertyValue(n),u=""!==i||Me(t)?i:Ue(r,n);return null===u?void 0:u},Ue=function(e,t){return Ae(e)?e.style.getPropertyValue(t):""},Ve=function(e,t){var n=e.dom(),r=Ue(n,t);return p.from(r).filter((function(e){return e.length>0}))},qe=function(e,t){var n=e.dom();He(n,t),we(e,"style")&&""===Oe(be(e,"style"))&&ye(e,"style")},Ge=function(e,t){var n=e.dom(),r=t.dom();Ae(n)&&Ae(r)&&(r.style.cssText=n.style.cssText)},Ye=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},Ke=function(t,n){return Ye(t,n,e.Node.DOCUMENT_POSITION_PRECEDING)},Xe=function(t,n){return Ye(t,n,e.Node.DOCUMENT_POSITION_CONTAINED_BY)},$e={documentPositionPreceding:Ke,documentPositionContainedBy:Xe},Je=function(){return Je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Je.apply(this,arguments)},Qe=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Ze=function(e,t){var n=Qe(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return nt(r(1),r(2))},et=function(e,t){var n=String(t).toLowerCase();return 0===e.length?tt():Ze(e,n)},tt=function(){return nt(0,0)},nt=function(e,t){return{major:e,minor:t}},rt={nu:nt,detect:et,unknown:tt},ot="Edge",it="Chrome",ut="IE",ct="Opera",at="Firefox",lt="Safari",ft=function(e,t){return function(){return t===e}},st=function(){return dt({current:void 0,version:rt.unknown()})},dt=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:ft(ot,t),isChrome:ft(it,t),isIE:ft(ut,t),isOpera:ft(ct,t),isFirefox:ft(at,t),isSafari:ft(lt,t)}},mt={unknown:st,nu:dt,edge:o(ot),chrome:o(it),ie:o(ut),opera:o(ct),firefox:o(at),safari:o(lt)},gt="Windows",pt="iOS",ht="Android",vt="Linux",bt="OSX",wt="Solaris",yt="FreeBSD",Ct="ChromeOS",St=function(e,t){return function(){return t===e}},xt=function(){return Rt({current:void 0,version:rt.unknown()})},Rt=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:St(gt,t),isiOS:St(pt,t),isAndroid:St(ht,t),isOSX:St(bt,t),isLinux:St(vt,t),isSolaris:St(wt,t),isFreeBSD:St(yt,t),isChromeOS:St(Ct,t)}},Tt={unknown:xt,nu:Rt,windows:o(gt),ios:o(pt),android:o(ht),linux:o(vt),osx:o(bt),solaris:o(wt),freebsd:o(yt),chromeos:o(Ct)},Ot=function(e,t,n,r){var i=e.isiOS()&&!0===/ipad/i.test(n),u=e.isiOS()&&!i,c=e.isiOS()||e.isAndroid(),a=c||r("(pointer:coarse)"),l=i||!u&&c&&r("(min-device-width:768px)"),f=u||c&&!l,s=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!f&&!l&&!s;return{isiPad:o(i),isiPhone:o(u),isTablet:o(l),isPhone:o(f),isTouch:o(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:o(s),isDesktop:o(d)}},At=function(e,t){var n=String(t).toLowerCase();return W(e,(function(e){return e.search(n)}))},Dt=function(e,t){return At(e,t).map((function(e){var n=rt.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Et=function(e,t){return At(e,t).map((function(e){var n=rt.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Bt={detectBrowser:Dt,detectOs:Et},It=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nt=function(e){return function(t){return xe(t,e)}},kt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return xe(e,"edge/")&&xe(e,"chrome")&&xe(e,"safari")&&xe(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,It],search:function(e){return xe(e,"chrome")&&!xe(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return xe(e,"msie")||xe(e,"trident")}},{name:"Opera",versionRegexes:[It,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nt("firefox")},{name:"Safari",versionRegexes:[It,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(xe(e,"safari")||xe(e,"mobile/"))&&xe(e,"applewebkit")}}],Pt=[{name:"Windows",search:Nt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return xe(e,"iphone")||xe(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Nt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Nt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Nt("linux"),versionRegexes:[]},{name:"Solaris",search:Nt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Nt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Nt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Mt={browsers:o(kt),oses:o(Pt)},Wt=function(e,t){var n=Mt.browsers(),r=Mt.oses(),o=Bt.detectBrowser(n,e).fold(mt.unknown,mt.nu),i=Bt.detectOs(r,e).fold(Tt.unknown,Tt.nu),u=Ot(i,o,e,t);return{browser:o,os:i,deviceType:u}},_t={detect:Wt},Lt=function(t){return e.window.matchMedia(t).matches},Ht=t(_t.detect(e.navigator.userAgent,Lt)),jt=function(){return Ht.get()},zt=ce,Ft=ue,Ut=function(e,t){var n=e.dom();if(n.nodeType!==zt)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Vt=function(e){return e.nodeType!==zt&&e.nodeType!==Ft||0===e.childElementCount},qt=function(t,n){var r=void 0===n?e.document:n.dom();return Vt(r)?[]:B(r.querySelectorAll(t),Pe.fromDom)},Gt=function(t,n){var r=void 0===n?e.document:n.dom();return Vt(r)?p.none():p.from(r.querySelector(t)).map(Pe.fromDom)},Yt=function(e,t){return e.dom()===t.dom()},Kt=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Xt=function(e,t){return $e.documentPositionContainedBy(e.dom(),t.dom())},$t=jt().browser,Jt=$t.isIE()?Xt:Kt,Qt=Ut,Zt=function(e){return Pe.fromDom(e.dom().ownerDocument)},en=function(e){return Pe.fromDom(e.dom().ownerDocument.defaultView)},tn=function(e){return p.from(e.dom().parentNode).map(Pe.fromDom)},nn=function(e,t){var n=S(t)?t:l,r=e.dom(),o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var i=r.parentNode,u=Pe.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},rn=function(e){return p.from(e.dom().previousSibling).map(Pe.fromDom)},on=function(e){return p.from(e.dom().nextSibling).map(Pe.fromDom)},un=function(e){return B(e.dom().childNodes,Pe.fromDom)},cn=function(e,t){var n=e.dom().childNodes;return p.from(n[t]).map(Pe.fromDom)},an=function(e){return cn(e,0)},ln=(J("element","offset"),function(e,t){var n=tn(e);n.each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))}),fn=function(e,t){var n=on(e);n.fold((function(){var n=tn(e);n.each((function(e){dn(e,t)}))}),(function(e){ln(e,t)}))},sn=function(e,t){var n=an(e);n.fold((function(){dn(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},dn=function(e,t){e.dom().appendChild(t.dom())},mn=function(e,t){ln(e,t),dn(t,e)},gn=function(e,t){I(t,(function(t){ln(e,t)}))},pn=function(e,t){I(t,(function(n,r){var o=0===r?e:t[r-1];fn(o,n)}))},hn=function(e,t){I(t,(function(t){dn(e,t)}))},vn=function(e){e.dom().textContent="",I(un(e),(function(e){bn(e)}))},bn=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},wn=function(e){var t=un(e);t.length>0&&gn(e,t),bn(e)},yn=(J("width","height"),J("width","height"),J("rows","columns")),Cn=J("row","column"),Sn=(J("x","y"),J("element","rowspan","colspan")),xn=J("element","rowspan","colspan","isNew"),Rn=J("element","rowspan","colspan","row","column"),Tn=J("element","cells","section"),On=J("element","isNew"),An=J("element","cells","section","isNew"),Dn=J("cells","section"),En=J("details","section"),Bn=J("startRow","startCol","finishRow","finishCol"),In=function(e,t,n){return k(nn(e,n),t)},Nn=function(e,t){return k(un(e),t)},kn=function(e,t){var n=[];return I(un(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(kn(e,t))})),n},Pn=function(e,t,n){return In(e,(function(e){return Ut(e,t)}),n)},Mn=function(e,t){return Nn(e,(function(e){return Ut(e,t)}))},Wn=function(e,t){return qt(t,e)};function _n(e,t,n,r,o){return e(n,r)?p.some(n):S(o)&&o(n)?p.none():t(n,r,o)}var Ln=function(e,t,n){var r=e.dom(),i=S(n)?n:o(!1);while(r.parentNode){r=r.parentNode;var u=Pe.fromDom(r);if(t(u))return p.some(u);if(i(u))break}return p.none()},Hn=function(e,t,n){var r=function(e,t){return t(e)};return _n(r,Ln,e,t,n)},jn=function(e,t){var n=function(e){return t(Pe.fromDom(e))},r=W(e.dom().childNodes,n);return r.map(Pe.fromDom)},zn=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){var o=Pe.fromDom(e.childNodes[r]);if(t(o))return p.some(o);var i=n(e.childNodes[r]);if(i.isSome())return i}return p.none()};return n(e.dom())},Fn=function(e,t,n){return Ln(e,(function(e){return Ut(e,t)}),n)},Un=function(e,t){return jn(e,(function(e){return Ut(e,t)}))},Vn=function(e,t){return Gt(t,e)},qn=function(e,t,n){return _n(Ut,Fn,e,t,n)},Gn=function(e,t){return Yn(e,t,o(!0))},Yn=function(e,t,n){return H(un(e),(function(e){return Ut(e,t)?n(e)?[e]:[]:Yn(e,t,n)}))},Kn={firstLayer:Gn,filterFirstLayer:Yn},Xn=function(e,t,n){if(void 0===n&&(n=l),n(t))return p.none();if(D(e,le(t)))return p.some(t);var r=function(e){return Ut(e,"table")||n(e)};return Fn(t,e.join(","),r)},$n=function(e,t){return Xn(["td","th"],e,t)},Jn=function(e){return Kn.firstLayer(e,"th,td")},Qn=function(e,t){return Xn(["caption","tr","tbody","tfoot","thead"],e,t)},Zn=function(e,t){return tn(t).map((function(t){return Mn(t,e)}))},er=u(Zn,"th,td"),tr=u(Zn,"tr"),nr=function(e){return Vn(e,"th,td")},rr=function(e,t){return qn(e,"table",t)},or=function(e,t){return Xn(["tr"],e,t)},ir=function(e){return Kn.firstLayer(e,"tr")},ur=function(e,t){return parseInt(be(e,t),10)},cr=function(e,t,n){var r=ur(e,t),o=ur(e,n);return yn(r,o)},ar={cell:$n,firstCell:nr,cells:Jn,neighbourCells:er,table:rr,row:or,rows:ir,notCell:Qn,neighbourRows:tr,attr:ur,grid:cr},lr=function(e){var t=ar.rows(e);return B(t,(function(e){var t=e,n=tn(t),r=n.map((function(e){var t=le(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"})).getOr("tbody"),o=B(ar.cells(e),(function(e){var t=we(e,"rowspan")?parseInt(be(e,"rowspan"),10):1,n=we(e,"colspan")?parseInt(be(e,"colspan"),10):1;return Sn(e,t,n)}));return Tn(t,o,r)}))},fr=function(e,t){return B(e,(function(e){var n=B(ar.cells(e),(function(e){var t=we(e,"rowspan")?parseInt(be(e,"rowspan"),10):1,n=we(e,"colspan")?parseInt(be(e,"colspan"),10):1;return Sn(e,t,n)}));return Tn(e,n,t.section())}))},sr={fromTable:lr,fromPastedRows:fr},dr=function(e,t){return e+","+t},mr=function(e,t,n){var r=e.access()[dr(t,n)];return void 0!==r?p.some(r):p.none()},gr=function(e,t,n){var r=pr(e,(function(e){return n(t,e.element())}));return r.length>0?p.some(r[0]):p.none()},pr=function(e,t){var n=H(e.all(),(function(e){return e.cells()}));return k(n,t)},hr=function(e){var t={},n=[],r=e.length,i=0;I(e,(function(e,r){var o=[];I(e.cells(),(function(e){var n=0;while(void 0!==t[dr(r,n)])n++;for(var u=Rn(e.element(),e.rowspan(),e.colspan(),r,n),c=0;c<e.colspan();c++)for(var a=0;a<e.rowspan();a++){var l=r+a,f=n+c,s=dr(l,f);t[s]=u,i=Math.max(i,f+1)}o.push(u)})),n.push(Tn(e.element(),o,e.section()))}));var u=yn(r,i);return{grid:o(u),access:o(t),all:o(n)}},vr=function(e){var t=B(e.all(),(function(e){return e.cells()}));return L(t)},br={generate:hr,getAt:mr,findItem:gr,filterItems:pr,justCells:vr},wr=J("minRow","minCol","maxRow","maxCol"),yr=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),o=r,i=n,u=0,c=0;return G(e.access(),(function(e){if(t(e)){var n=e.row(),r=n+e.rowspan()-1,a=e.column(),l=a+e.colspan()-1;n<o?o=n:r>u&&(u=r),a<i?i=a:l>c&&(c=l)}})),wr(o,i,u,c)},Cr=function(e,t,n){var r=e[n].element(),o=Pe.fromTag("td");dn(o,Pe.fromTag("br"));var i=t?dn:sn;i(r,o)},Sr=function(e,t,n,r){for(var o=t.grid().columns(),i=t.grid().rows(),u=0;u<i;u++)for(var c=!1,a=0;a<o;a++)if(!(u<n.minRow()||u>n.maxRow()||a<n.minCol()||a>n.maxCol())){var l=br.getAt(t,u,a).filter(r).isNone();l?Cr(e,c,u):c=!0}},xr=function(e,t){var n=k(Kn.firstLayer(e,"tr"),(function(e){return 0===e.dom().childElementCount}));I(n,bn),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||I(Kn.firstLayer(e,"th,td"),(function(e){ye(e,"rowspan"),ye(e,"colspan")})),ye(e,"width"),ye(e,"height"),qe(e,"width"),qe(e,"height")},Rr=function(e,t){var n=function(e){return Ut(e.element(),t)},r=sr.fromTable(e),o=br.generate(r),i=yr(o,n),u="th:not("+t+"),td:not("+t+")",c=Kn.filterFirstLayer(e,"th,td",(function(e){return Ut(e,u)}));return I(c,bn),Sr(r,o,i,n),xr(e,i),e},Tr={extract:Rr},Or="Â ";function Ar(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},r=function(t){return e(t)?p.from(t.dom().nodeValue):p.none()},o=function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r};return{get:n,getOption:r,set:o}}var Dr=Ar(ge,"text"),Er=function(e){return Dr.get(e)},Br=function(e){return Dr.getOption(e)},Ir=function(e,t){Dr.set(e,t)},Nr=function(e){return"img"===le(e)?1:Br(e).fold((function(){return un(e).length}),(function(e){return e.length}))},kr=function(e){return Br(e).filter((function(e){return 0!==e.trim().length||e.indexOf(Or)>-1})).isSome()},Pr=["img","br"],Mr=function(e){var t=kr(e);return t||D(Pr,le(e))},Wr=function(e){return zn(e,Mr)},_r=function(e){return Lr(e,Mr)},Lr=function(e,t){var n=function(e){for(var r=un(e),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return p.some(i);var u=n(i);if(u.isSome())return u}return p.none()};return n(e)},Hr=function(e,t){return Pe.fromDom(e.dom().cloneNode(t))},jr=function(e){return Hr(e,!1)},zr=function(e){return Hr(e,!0)},Fr=function(e,t){var n=Pe.fromTag(t),r=Ce(e);return ve(n,r),n},Ur=function(e,t){var n=Fr(e,t),r=un(zr(e));return hn(n,r),n},Vr=function(){var e=Pe.fromTag("td");return dn(e,Pe.fromTag("br")),e},qr=function(e,t,n){var r=Ur(e,t);return G(n,(function(e,t){null===e?ye(r,t):he(r,t,e)})),r},Gr=function(e){return e},Yr=function(e){return function(){return Pe.fromTag("tr",e.dom())}},Kr=function(e,t,n){var r=Wr(e);return r.map((function(r){var o=n.join(","),i=Pn(r,o,(function(t){return Yt(t,e)}));return P(i,(function(e,t){var n=jr(t);return ye(n,"contenteditable"),dn(e,n),n}),t)})).getOr(t)},Xr=function(e,t,n){var r=function(t){var r=Zt(t.element()),o=Pe.fromTag(le(t.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=i.length>0?Kr(t.element(),o,i):o;return dn(u,Pe.fromTag("br")),Ge(t.element(),o),qe(o,"height"),1!==t.colspan()&&qe(t.element(),"width"),e(t.element(),o),o};return{row:Yr(t),cell:r,replace:qr,gap:Vr}},$r=function(e){return{row:Yr(e),cell:Vr,replace:Gr,gap:Vr}},Jr={cellOperations:Xr,paste:$r},Qr=function(t,n){var r=n||e.document,o=r.createElement("div");return o.innerHTML=t,un(Pe.fromDom(o))},Zr=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},eo=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},to=function(e,t){for(var n=!0,r=u(eo,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)n=n&&br.getAt(e,o,i).exists(r);return n?p.some(t):p.none()},no={inSelection:Zr,isWithin:eo,isRectangular:to},ro=function(e,t){return Bn(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))},oo=function(e,t,n){var r=br.findItem(e,t,Yt),o=br.findItem(e,n,Yt);return r.bind((function(e){return o.map((function(t){return ro(e,t)}))}))},io=function(e,t,n){return oo(e,t,n).bind((function(t){return no.isRectangular(e,t)}))},uo={getAnyBox:oo,getBox:io},co=function(e,t,n,r){return br.findItem(e,t,Yt).bind((function(t){var o=n>0?t.row()+t.rowspan()-1:t.row(),i=r>0?t.column()+t.colspan()-1:t.column(),u=br.getAt(e,o+n,i+r);return u.map((function(e){return e.element()}))}))},ao=function(e,t,n){return uo.getAnyBox(e,t,n).map((function(t){var n=br.filterItems(e,u(no.inSelection,t));return B(n,(function(e){return e.element()}))}))},lo=function(e,t){var n=function(e,t){return Jt(t,e)};return br.findItem(e,t,n).map((function(e){return e.element()}))},fo={moveBy:co,intercepts:ao,parentCell:lo},so=function(e,t,n){return ar.table(e).bind((function(r){var o=ho(r);return fo.moveBy(o,e,t,n)}))},mo=function(e,t,n){var r=ho(e);return fo.intercepts(r,t,n)},go=function(e,t,n,r,o){var i=ho(e),u=Yt(e,n)?p.some(t):fo.parentCell(i,t),c=Yt(e,o)?p.some(r):fo.parentCell(i,r);return u.bind((function(e){return c.bind((function(t){return fo.intercepts(i,e,t)}))}))},po=function(e,t,n){var r=ho(e);return uo.getBox(r,t,n)},ho=function(e){var t=sr.fromTable(e);return br.generate(t)},vo={moveBy:so,intercepts:mo,nestedIntercepts:go,getBox:po},bo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function wo(){var e=function(e){return Pe.fromDom(e.dom().cloneNode(!1))},t=function(e){return e.dom().ownerDocument},n=function(e){return!!me(e)&&("body"===le(e)||D(bo,le(e)))},r=function(e){return!!me(e)&&D(["br","img","hr","input"],le(e))},i=function(e){return me(e)&&"false"===be(e,"contenteditable")},u=function(e,t){return e.dom().compareDocumentPosition(t.dom())},c=function(e,t){var n=Ce(e);ve(t,n)};return{up:o({selector:Fn,closest:qn,predicate:Ln,all:nn}),down:o({selector:Wn,predicate:kn}),styles:o({get:Fe,getRaw:Ve,set:je,remove:qe}),attrs:o({get:be,set:he,remove:ye,copyTo:c}),insert:o({before:ln,after:fn,afterAll:pn,append:dn,appendAll:hn,prepend:sn,wrap:mn}),remove:o({unwrap:wn,remove:bn}),create:o({nu:Pe.fromTag,clone:e,text:Pe.fromText}),query:o({comparePosition:u,prevSibling:rn,nextSibling:on}),property:o({children:un,name:le,parent:tn,document:t,isText:ge,isComment:de,isElement:me,getText:Er,setText:Ir,isBoundary:n,isEmptyTag:r,isNonEditable:i}),eq:Yt,is:Qt}}var yo=J("left","right"),Co=J("first","second","splits"),So=function(e,t,n){var r=e.property().children(t),i=_(r,u(e.eq,n));return i.map((function(e){return{before:o(r.slice(0,e)),after:o(r.slice(e+1))}}))},xo=function(e,t,n){return So(e,t,n).map((function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),yo(t,r)}))},Ro=function(e,t,n){return So(e,t,n).map((function(r){var o=e.create().clone(t);return e.insert().appendAll(o,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,o),yo(o,t)}))},To=function(e,t,n,r){var o=function(t,i,u){var c=Co(t,p.none(),u);return n(t)?Co(t,i,u):e.property().parent(t).bind((function(i){return r(e,i,t).map((function(e){var t=[{first:e.left,second:e.right}],r=n(i)?i:e.left();return o(r,p.some(e.right()),u.concat(t))}))})).getOr(c)};return o(t,p.none(),[])},Oo=function(e,t,n,r){var o=n[0],i=n.slice(1);return r(e,t,o,i)},Ao=function(e,t,n){return n.length>0?Oo(e,t,n,Do):p.none()},Do=function(e,t,n,r){var o=t(e,n);return P(r,(function(n,r){var o=t(e,r);return Eo(e,n,o)}),o)},Eo=function(e,t,n){return t.bind((function(t){return n.filter(u(e.eq,t))}))},Bo=function(e,t){return u(e.eq,t)},Io=function(e,t,n,r){var o=e.property().children(t);if(e.eq(t,n[0]))return p.some([n[0]]);if(e.eq(t,r[0]))return p.some([r[0]]);var i=function(n){var r=z(n),i=_(r,Bo(e,t)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return _(o,Bo(e,u))},u=i(n),c=i(r);return u.bind((function(e){return c.map((function(t){var n=Math.min(e,t),r=Math.max(e,t);return o.slice(n,r+1)}))}))},No=function(e,t,n,r){void 0===r&&(r=l);var i=[t].concat(e.up().all(t)),u=[n].concat(e.up().all(n)),c=function(e){var t=_(e,r);return t.fold((function(){return e}),(function(t){return e.slice(0,t+1)}))},a=c(i),f=c(u),s=W(a,(function(t){return E(f,Bo(e,t))}));return{firstpath:o(a),secondpath:o(f),shared:o(s)}},ko=function(e,t,n){var r=No(e,t,n);return r.shared().bind((function(t){return Io(e,t,r.firstpath(),r.secondpath())}))},Po={subset:ko,ancestors:No},Mo=Ao,Wo=Po.subset,_o=Po.ancestors,Lo=Ro,Ho=xo,jo=To,zo={sharedOne:Mo,subset:Wo,ancestors:_o,breakToLeft:Lo,breakToRight:Ho,breakPath:jo},Fo=wo(),Uo=function(e,t){return zo.sharedOne(Fo,(function(t,n){return e(n)}),t)},Vo=function(e,t){return zo.subset(Fo,e,t)},qo=function(e,t,n){return zo.ancestors(Fo,e,t,n)},Go=function(e,t){return zo.breakToLeft(Fo,e,t)},Yo=function(e,t){return zo.breakToRight(Fo,e,t)},Ko=function(e,t,n){return zo.breakPath(Fo,e,t,(function(e,t,r){return n(t,r)}))},Xo={sharedOne:Uo,subset:Vo,ancestors:qo,breakToLeft:Go,breakToRight:Yo,breakPath:Ko},$o=oe(["boxes","start","finish"],[]),Jo={create:$o},Qo=function(e){return Fn(e,"table")},Zo=function(e,t,n){var r=function(e){return function(t){return void 0!==n&&n(t)||Yt(t,e)}};return Yt(e,t)?p.some(Jo.create({boxes:p.some([e]),start:e,finish:t})):Qo(e).bind((function(o){return Qo(t).bind((function(i){if(Yt(o,i))return p.some(Jo.create({boxes:vo.intercepts(o,e,t),start:e,finish:t}));if(Jt(o,i)){var u=Pn(t,"td,th",r(o)),c=u.length>0?u[u.length-1]:t;return p.some(Jo.create({boxes:vo.nestedIntercepts(o,e,o,t,i),start:e,finish:c}))}if(Jt(i,o)){u=Pn(e,"td,th",r(i));var a=u.length>0?u[u.length-1]:e;return p.some(Jo.create({boxes:vo.nestedIntercepts(i,e,o,t,i),start:e,finish:a}))}return Xo.ancestors(e,t).shared().bind((function(u){return qn(u,"table",n).bind((function(n){var u=Pn(t,"td,th",r(n)),c=u.length>0?u[u.length-1]:t,a=Pn(e,"td,th",r(n)),l=a.length>0?a[a.length-1]:e;return p.some(Jo.create({boxes:vo.nestedIntercepts(n,e,o,t,i),start:l,finish:c}))}))}))}))}))},ei=function(e,t){var n=Wn(e,t);return n.length>0?p.some(n):p.none()},ti=function(e,t){return W(e,(function(e){return Ut(e,t)}))},ni=function(e,t,n){return Vn(e,t).bind((function(t){return Vn(e,n).bind((function(e){return Xo.sharedOne(Qo,[t,e]).map((function(n){return{first:o(t),last:o(e),table:o(n)}}))}))}))},ri=function(e,t){return Fn(e,"table").bind((function(n){return Vn(n,t).bind((function(t){return Zo(t,e).bind((function(e){return e.boxes().map((function(t){return{boxes:o(t),start:o(e.start()),finish:o(e.finish())}}))}))}))}))},oi=function(e,t,n,r,o){return ti(e,o).bind((function(e){return vo.moveBy(e,t,n).bind((function(e){return ri(e,r)}))}))},ii={identify:Zo,retrieve:ei,shiftSelection:oi,getEdges:ni},ui=function(e,t){return ii.retrieve(e,t)},ci=function(e,t,n){return ii.getEdges(e,t,n).bind((function(t){var n=function(t){return Yt(e,t)},r=Fn(t.first(),"thead,tfoot,tbody,table",n),o=Fn(t.last(),"thead,tfoot,tbody,table",n);return r.bind((function(e){return o.bind((function(n){return Yt(e,n)?vo.getBox(t.table(),t.first(),t.last()):p.none()}))}))}))},ai={retrieve:ui,retrieveBox:ci},li="data-mce-selected",fi="td["+li+"],th["+li+"]",si="["+li+"]",di="data-mce-first-selected",mi="td["+di+"],th["+di+"]",gi="data-mce-last-selected",pi="td["+gi+"],th["+gi+"]",hi={selected:o(li),selectedSelector:o(fi),attributeSelector:o(si),firstSelected:o(di),firstSelectedSelector:o(mi),lastSelected:o(gi),lastSelectedSelector:o(pi)},vi=function(t){if(!y(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return I(t,(function(o,i){var u=V(o);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=o[c];if(void 0!==r[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!y(a))throw new Error("case arguments must be an array");n.push(c),r[c]=function(){var r=arguments.length;if(r!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];var l=function(e){var t=V(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));var r=j(n,(function(e){return D(t,e)}));if(!r)throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[c].apply(null,o)};return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);var e=arguments[i];return e.apply(null,o)},match:l,log:function(t){e.console.log(t,{constructors:n,constructor:c,params:o})}}}})),r},bi={generate:vi},wi=bi.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),yi=function(e,t,n,r){return e.fold(t,n,r)},Ci={cata:yi,none:wi.none,multiple:wi.multiple,single:wi.single},Si=function(e,t){return Ci.cata(t.get(),o([]),i,o([e]))},xi=function(e,t){var n=function(e){return we(e,"rowspan")&&parseInt(be(e,"rowspan"),10)>1||we(e,"colspan")&&parseInt(be(e,"colspan"),10)>1},r=Si(e,t);return r.length>0&&j(r,n)?p.some(r):p.none()},Ri=function(e,t){return Ci.cata(t.get(),p.none,(function(t,n){return 0===t.length?p.none():ai.retrieveBox(e,hi.firstSelectedSelector(),hi.lastSelectedSelector()).bind((function(e){return t.length>1?p.some({bounds:o(e),cells:o(t)}):p.none()}))}),p.none)},Ti={mergable:Ri,unmergable:xi,selection:Si},Oi=function(e){return{element:o(e),mergable:p.none,unmergable:p.none,selection:o([e])}},Ai=function(e,t,n){return{element:o(n),mergable:o(Ti.mergable(t,e)),unmergable:o(Ti.unmergable(n,e)),selection:o(Ti.selection(n,e))}},Di=function(e){return Oi(e)},Ei=J("element","clipboard","generators"),Bi=function(e,t,n,r,i){return{element:o(n),mergable:p.none,unmergable:p.none,selection:o(Ti.selection(n,e)),clipboard:o(r),generators:o(i)}},Ii={noMenu:Oi,forMenu:Ai,notCell:Di,paste:Ei,pasteRows:Bi},Ni=function(e){return ar.table(e[0]).map(zr).map((function(e){return[Tr.extract(e,hi.attributeSelector())]}))},ki=function(e,t){return B(t,(function(t){return e.selection.serializer.serialize(t.dom(),{})})).join("")},Pi=function(e){return B(e,(function(e){return e.dom().innerText})).join("")},Mi=function(e,t,r,o){e.on("BeforeGetContent",(function(r){var o=function(t){r.preventDefault(),Ni(t).each((function(t){r.content="text"===r.format?Pi(t):ki(e,t)}))};!0===r.selection&&Ci.cata(t.get(),n,o,n)})),e.on("BeforeSetContent",(function(t){if(!0===t.selection&&!0===t.paste){var n=p.from(e.dom.getParent(e.selection.getStart(),"th,td"));n.each((function(n){var i=Pe.fromDom(n);ar.table(i).each((function(n){var u=k(Qr(t.content),(function(e){return"meta"!==le(e)}));if(1===u.length&&"table"===le(u[0])){t.preventDefault();var c=Pe.fromDom(e.getDoc()),a=Jr.paste(c),l=Ii.paste(i,u[0],a);r.pasteCells(n,l).each((function(t){e.selection.setRng(t),e.focus(),o.clear(n)}))}}))}))}}))},Wi={registerEvents:Mi};function _i(e,t){var n=function(t,n){if(!x(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom();Ae(r)&&(r.style[e]=n+"px")},r=function(n){var r=t(n);if(r<=0||null===r){var o=Fe(n,e);return parseFloat(o)||0}return r},o=r,i=function(e,t){return M(t,(function(t,n){var r=Fe(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)},u=function(e,t,n){var r=i(e,n),o=t>r?t-r:0;return o};return{set:n,get:r,getOuter:o,aggregate:i,max:u}}var Li=_i("height",(function(e){var t=e.dom();return Me(e)?t.getBoundingClientRect().height:t.offsetHeight})),Hi=function(e){return Li.get(e)},ji=function(e){return Li.getOuter(e)},zi=_i("width",(function(e){return e.dom().offsetWidth})),Fi=function(e){return zi.get(e)},Ui=function(e){return zi.getOuter(e)},Vi=jt(),qi=function(){return Vi.browser.isIE()||Vi.browser.isEdge()},Gi=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},Yi=function(e,t,n){return Gi(Fe(e,t),n)},Ki=function(e){var t=Yi(e,"padding-top",0),n=Yi(e,"padding-bottom",0),r=Yi(e,"border-top-width",0),o=Yi(e,"border-bottom-width",0),i=e.dom().getBoundingClientRect().height,u=Fe(e,"box-sizing"),c=r+o;return"border-box"===u?i:i-t-n-c},Xi=function(e){return Yi(e,"width",Fi(e))},$i=function(e){return qi()?Ki(e):Yi(e,"height",Hi(e))},Ji={getWidth:Xi,getHeight:$i},Qi=/(\d+(\.\d+)?)(\w|%)*/,Zi=/(\d+(\.\d+)?)%/,eu=/(\d+(\.\d+)?)px|em/,tu=function(e,t){je(e,"width",t+"px")},nu=function(e,t){je(e,"width",t+"%")},ru=function(e,t){je(e,"height",t+"px")},ou=function(e){return Ve(e,"height").getOrThunk((function(){return Ji.getHeight(e)+"px"}))},iu=function(e,t,n,r){var o=ar.table(e).map((function(e){var r=n(e);return Math.floor(t/100*r)})).getOr(t);return r(e,o),o},uu=function(e,t,n,r){var o=parseInt(e,10);return Te(e,"%")&&"table"!==le(t)?iu(t,o,n,r):o},cu=function(e){var t=ou(e);return t?uu(t,e,Hi,ru):Hi(e)},au=function(e,t,n){var r=n(e),o=lu(e,t);return r/o},lu=function(e,t){return we(e,t)?parseInt(be(e,t),10):1},fu=function(e){var t=Ve(e,"width");return t.fold((function(){return p.from(be(e,"width"))}),(function(e){return p.some(e)}))},su=function(e,t){return e/t.pixelWidth()*100},du=function(e,t,n){var r=Zi.exec(t);if(null!==r)return parseFloat(r[1]);var o=Fi(e);return su(o,n)},mu=function(e,t){var n=fu(e);return n.fold((function(){var n=Fi(e);return su(n,t)}),(function(n){return du(e,n,t)}))},gu=function(e,t){return e/100*t.pixelWidth()},pu=function(e,t,n){var r=eu.exec(t);if(null!==r)return parseInt(r[1],10);var o=Zi.exec(t);if(null!==o){var i=parseFloat(o[1]);return gu(i,n)}return Fi(e)},hu=function(e,t){var n=fu(e);return n.fold((function(){return Fi(e)}),(function(n){return pu(e,n,t)}))},vu=function(e){return au(e,"rowspan",cu)},bu=function(e){var t=fu(e);return t.bind((function(e){var t=Qi.exec(e);return null!==t?p.some({width:o(parseFloat(t[1])),unit:o(t[3])}):p.none()}))},wu=function(e,t,n){je(e,"width",t+n)},yu={percentageBasedSizeRegex:o(Zi),pixelBasedSizeRegex:o(eu),setPixelWidth:tu,setPercentageWidth:nu,setHeight:ru,getPixelWidth:hu,getPercentageWidth:mu,getGenericWidth:bu,setGenericWidth:wu,getHeight:vu,getRawWidth:fu},Cu=function(e,t){var n=yu.getGenericWidth(e);n.each((function(n){var r=n.width()/2;yu.setGenericWidth(e,r,n.unit()),yu.setGenericWidth(t,r,n.unit())}))},Su={halve:Cu},xu=function(e,t){var n=function(n,r){return xu(e+n,t+r)};return{left:o(e),top:o(t),translate:n}},Ru=xu,Tu=function(e){var t=e.getBoundingClientRect();return Ru(t.left,t.top)},Ou=function(e,t){return void 0!==e?e:void 0!==t?t:0},Au=function(e){var t=e.dom().ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom())return Ru(n.offsetLeft,n.offsetTop);var i=Ou(r.pageYOffset,o.scrollTop),u=Ou(r.pageXOffset,o.scrollLeft),c=Ou(o.clientTop,n.clientTop),a=Ou(o.clientLeft,n.clientLeft);return Du(e).translate(u-a,i-c)},Du=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body;return r===t?Ru(r.offsetLeft,r.offsetTop):Me(e)?Tu(t):Ru(0,0)},Eu=J("row","y"),Bu=J("col","x"),Iu=function(e){var t=Au(e);return t.left()+Ui(e)},Nu=function(e){return Au(e).left()},ku=function(e,t){return Bu(e,Nu(t))},Pu=function(e,t){return Bu(e,Iu(t))},Mu=function(e){return Au(e).top()},Wu=function(e,t){return Eu(e,Mu(t))},_u=function(e,t){return Eu(e,Mu(t)+ji(t))},Lu=function(e,t,n){if(0===n.length)return[];var r=B(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),o=n[n.length-1].map((function(e){return t(n.length-1,e)}));return r.concat([o])},Hu=function(e){return-e},ju={delta:i,positions:function(e){return Lu(Wu,_u,e)},edge:Mu},zu={delta:i,edge:Nu,positions:function(e){return Lu(ku,Pu,e)}},Fu={delta:Hu,edge:Iu,positions:function(e){return Lu(Pu,ku,e)}},Uu={height:ju,rtl:Fu,ltr:zu},Vu={ltr:Uu.ltr,rtl:Uu.rtl};function qu(e){var t=function(t){return e(t).isRtl()?Vu.rtl:Vu.ltr},n=function(e,n){return t(n).delta(e,n)},r=function(e,n){return t(n).positions(e,n)},o=function(e){return t(e).edge(e)};return{delta:n,edge:o,positions:r}}var Gu=function(e){var t=sr.fromTable(e),n=br.generate(t);return n.grid()},Yu={getGridSize:Gu},Ku=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Xu=function(e,t,n,r){n===r?ye(e,t):he(e,t,n)},$u=function(e,t){var n=[],r=[],i=function(t,o){var i=Un(e,o).getOrThunk((function(){var t=Pe.fromTag(o,Zt(e).dom());return dn(e,t),t}));vn(i);var u=B(t,(function(e){e.isNew()&&n.push(e.element());var t=e.element();return vn(t),I(e.cells(),(function(e){e.isNew()&&r.push(e.element()),Xu(e.element(),"colspan",e.colspan(),1),Xu(e.element(),"rowspan",e.rowspan(),1),dn(t,e.element())})),t}));hn(i,u)},u=function(t){Un(e,t).each(bn)},c=function(e,t){e.length>0?i(e,t):u(t)},a=[],l=[],f=[];return I(t,(function(e){switch(e.section()){case"thead":a.push(e);break;case"tbody":l.push(e);break;case"tfoot":f.push(e);break}})),c(a,"thead"),c(l,"tbody"),c(f,"tfoot"),{newRows:o(n),newCells:o(r)}},Ju=function(e){var t=B(e,(function(e){var t=jr(e.element());return I(e.cells(),(function(e){var n=zr(e.element());Xu(n,"colspan",e.colspan(),1),Xu(n,"rowspan",e.rowspan(),1),dn(t,n)})),t}));return t},Qu={render:$u,copy:Ju},Zu=function(e,t){var n=be(e,t);return void 0===n||""===n?[]:n.split(" ")},ec=function(e,t,n){var r=Zu(e,t),o=r.concat([n]);return he(e,t,o.join(" ")),!0},tc=function(e,t,n){var r=k(Zu(e,t),(function(e){return e!==n}));return r.length>0?he(e,t,r.join(" ")):ye(e,t),!1},nc=function(e){return void 0!==e.dom().classList},rc=function(e){return Zu(e,"class")},oc=function(e,t){return ec(e,"class",t)},ic=function(e,t){return tc(e,"class",t)},uc=function(e,t){nc(e)?e.dom().classList.add(t):oc(e,t)},cc=function(e){var t=nc(e)?e.dom().classList:rc(e);0===t.length&&ye(e,"class")},ac=function(e,t){if(nc(e)){var n=e.dom().classList;n.remove(t)}else ic(e,t);cc(e)},lc=function(e,t){return nc(e)&&e.dom().classList.contains(t)},fc=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},sc=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},dc=function(e,t){if(t<0||t>=e.length-1)return p.none();var n=e[t].fold((function(){var n=z(e.slice(0,t));return U(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return p.some({value:e,delta:0})})),r=e[t+1].fold((function(){var n=e.slice(t+1);return U(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return p.some({value:e,delta:1})}));return n.bind((function(e){return r.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},mc=function(e){var t=e.grid(),n=sc(0,t.columns()),r=sc(0,t.rows());return B(n,(function(t){var n=function(){return H(r,(function(n){return br.getAt(e,n,t).filter((function(e){return e.column()===t})).fold(o([]),(function(e){return[e]}))}))},i=function(e){return 1===e.colspan()},u=function(){return br.getAt(e,0,t)};return gc(n,i,u)}))},gc=function(e,t,n){var r=e(),o=W(r,t),i=o.orThunk((function(){return p.from(r[0]).orThunk(n)}));return i.map((function(e){return e.element()}))},pc=function(e){var t=e.grid(),n=sc(0,t.rows()),r=sc(0,t.columns());return B(n,(function(t){var n=function(){return H(r,(function(n){return br.getAt(e,t,n).filter((function(e){return e.row()===t})).fold(o([]),(function(e){return[e]}))}))},i=function(e){return 1===e.rowspan()},u=function(){return br.getAt(e,t,0)};return gc(n,i,u)}))},hc={columns:mc,rows:pc},vc=function(e){var t=e.replace(/\./g,"-"),n=function(e){return t+"-"+e};return{resolve:n}},bc=vc("ephox-snooker"),wc={resolve:bc.resolve},yc=function(e,t,n,r,o){var i=Pe.fromTag("div");return ze(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),ve(i,{"data-column":e,role:"presentation"}),i},Cc=function(e,t,n,r,o){var i=Pe.fromTag("div");return ze(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),ve(i,{"data-row":e,role:"presentation"}),i},Sc={col:yc,row:Cc},xc=wc.resolve("resizer-bar"),Rc=wc.resolve("resizer-rows"),Tc=wc.resolve("resizer-cols"),Oc=7,Ac=function(e){var t=Wn(e.parent(),"."+xc);I(t,bn)},Dc=function(e,t,n){var r=e.origin();I(t,(function(t,o){t.each((function(t){var o=n(r,t);uc(o,xc),dn(e.parent(),o)}))}))},Ec=function(e,t,n,r){Dc(e,t,(function(e,t){var o=Sc.col(t.col(),t.x()-e.left(),n.top()-e.top(),Oc,r);return uc(o,Tc),o}))},Bc=function(e,t,n,r){Dc(e,t,(function(e,t){var o=Sc.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,Oc);return uc(o,Rc),o}))},Ic=function(e,t,n,r,o,i){var u=Au(t),c=n.length>0?o.positions(n,t):[];Bc(e,c,u,Ui(t));var a=r.length>0?i.positions(r,t):[];Ec(e,a,u,ji(t))},Nc=function(e,t,n,r){Ac(e);var o=sr.fromTable(t),i=br.generate(o),u=hc.rows(i),c=hc.columns(i);Ic(e,t,u,c,n,r)},kc=function(e,t){var n=Wn(e.parent(),"."+xc);I(n,t)},Pc=function(e){kc(e,(function(e){je(e,"display","none")}))},Mc=function(e){kc(e,(function(e){je(e,"display","block")}))},Wc=function(e){return lc(e,Rc)},_c=function(e){return lc(e,Tc)},Lc={refresh:Nc,hide:Pc,show:Mc,destroy:Ac,isRowBar:Wc,isColBar:_c},Hc=function(e,t,n){var r=e.cells(),o=r.slice(0,t),i=r.slice(t),u=o.concat([n]).concat(i);return zc(e,u)},jc=function(e,t,n){var r=e.cells();r[t]=n},zc=function(e,t){return Dn(t,e.section())},Fc=function(e,t){var n=e.cells(),r=B(n,t);return Dn(r,e.section())},Uc=function(e,t){return e.cells()[t]},Vc=function(e,t){return Uc(e,t).element()},qc=function(e){return e.cells().length},Gc={addCell:Hc,setCells:zc,mutateCell:jc,getCell:Uc,getCellElement:Vc,mapCells:Fc,cellLength:qc},Yc=function(e,t){return B(e,(function(e){return Gc.getCell(e,t)}))},Kc=function(e,t){return e[t]},Xc=function(e,t){if(0===e.length)return 0;var n=e[0],r=_(e,(function(e){return!t(n.element(),e.element())}));return r.fold((function(){return e.length}),(function(e){return e}))},$c=function(e,t,n,r){var i=Kc(e,t).cells().slice(n),u=Xc(i,r),c=Yc(e,n).slice(t),a=Xc(c,r);return{colspan:o(u),rowspan:o(a)}},Jc={subgrid:$c},Qc=function(e,t){var n=B(e,(function(e,t){return B(e.cells(),(function(e,t){return!1}))})),r=function(e,t,r,o){for(var i=e;i<e+r;i++)for(var u=t;u<t+o;u++)n[i][u]=!0};return B(e,(function(o,i){var u=H(o.cells(),(function(o,u){if(!1===n[i][u]){var c=Jc.subgrid(e,i,u,t);return r(i,u,c.rowspan(),c.colspan()),[xn(o.element(),c.rowspan(),c.colspan(),o.isNew())]}return[]}));return En(u,o.section())}))},Zc=function(e,t,n){for(var r=[],o=0;o<e.grid().rows();o++){for(var i=[],u=0;u<e.grid().columns();u++){var c=br.getAt(e,o,u).map((function(e){return On(e.element(),n)})).getOrThunk((function(){return On(t.gap(),!0)}));i.push(c)}var a=Dn(i,e.all()[o].section());r.push(a)}return r},ea={toDetails:Qc,toGrid:Zc},ta=function(e,t){return ea.toGrid(e,t,!1)},na=function(e,t){var n=function(e){var n=U(e,(function(e){return tn(e.element()).map((function(e){var t=tn(e).isNone();return On(e,t)}))}));return n.getOrThunk((function(){return On(t.row(),!0)}))};return B(e,(function(e){var t=n(e.details());return An(t.element(),e.details(),e.section(),t.isNew())}))},ra=function(e,t){var n=ea.toDetails(e,Yt);return na(n,t)},oa=function(e,t){var n=L(B(e.all(),(function(e){return e.cells()})));return W(n,(function(e){return Yt(t,e.element())}))},ia=function(e,t,n,r,i){return function(u,c,a,l,f){var s=sr.fromTable(c),d=br.generate(s),m=t(d,a).map((function(t){var n=ta(d,l),r=e(n,t,Yt,i(l)),u=ra(r.grid(),l);return{grid:o(u),cursor:r.cursor}}));return m.fold((function(){return p.none()}),(function(e){var t=Qu.render(c,e.grid());return n(c,e.grid(),f),r(c),Lc.refresh(u,c,Uu.height,f),p.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},ua=function(e,t){return ar.cell(t.element()).bind((function(t){return oa(e,t)}))},ca=function(e,t){return ar.cell(t.element()).bind((function(n){return oa(e,n).map((function(e){var n=Je(Je({},e),{generators:t.generators,clipboard:t.clipboard});return n}))}))},aa=function(e,t){var n=B(t.selection(),(function(t){return ar.cell(t).bind((function(t){return oa(e,t)}))})),r=Ku(n);return r.length>0?p.some({cells:r,generators:t.generators,clipboard:t.clipboard}):p.none()},la=function(e,t){return t.mergable()},fa=function(e,t){return t.unmergable()},sa=function(e,t){var n=B(t.selection(),(function(t){return ar.cell(t).bind((function(t){return oa(e,t)}))})),r=Ku(n);return r.length>0?p.some(r):p.none()},da=function(e){var t=function(t){return e===t},n=function(t){return da(e)},r=function(t){return da(e)},i=function(t){return da(t(e))},u=function(t){return da(e)},c=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},d=function(t){return t(e)},m=function(t){return t(e)},g=function(){return p.some(e)};return{is:t,isValue:f,isError:l,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:n,orThunk:r,fold:s,map:i,mapError:u,each:c,bind:a,exists:d,forall:m,toOption:g}},ma=function(e){var t=function(e){return e()},r=function(){return a(String(e))()},o=function(e){return e},u=function(e){return e()},c=function(t){return ma(e)},s=function(t){return ma(t(e))},d=function(t){return ma(e)},m=function(t,n){return t(e)};return{is:l,isValue:l,isError:f,getOr:i,getOrThunk:t,getOrDie:r,or:o,orThunk:u,fold:m,map:c,mapError:s,each:n,bind:d,exists:l,forall:f,toOption:p.none}},ga=function(e,t){return e.fold((function(){return ma(t)}),da)},pa={value:da,error:ma,fromOption:ga},ha=function(e,t,n){if(e.row()>=t.length||e.column()>Gc.cellLength(t[0]))return pa.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),i=r[0].cells().slice(e.column()),u=Gc.cellLength(n[0]),c=n.length;return pa.value({rowDelta:o(r.length-c),colDelta:o(i.length-u)})},va=function(e,t){var n=Gc.cellLength(e[0]),r=Gc.cellLength(t[0]);return{rowDelta:o(0),colDelta:o(n-r)}},ba=function(e,t){return B(e,(function(){return On(t.cell(),!0)}))},wa=function(e,t,n){return e.concat(fc(t,(function(t){return Gc.setCells(e[e.length-1],ba(e[e.length-1].cells(),n))})))},ya=function(e,t,n){return B(e,(function(e){return Gc.setCells(e,e.cells().concat(ba(sc(0,t),n)))}))},Ca=function(e,t,n){var r=t.colDelta()<0?ya:i,o=t.rowDelta()<0?wa:i,u=r(e,Math.abs(t.colDelta()),n),c=o(u,Math.abs(t.rowDelta()),n);return c},Sa={measure:ha,measureWidth:va,tailor:Ca},xa=function(e,t,n,r){if(0===e.length)return e;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)Gc.mutateCell(e[o],i,On(r(),!1));return e},Ra=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var u=0;u<Gc.cellLength(e[0]);u++){var c=Gc.getCellElement(e[i],u),a=n(c,t);!0===a&&!1===o?Gc.mutateCell(e[i],u,On(r(),!0)):!0===a&&(o=!1)}return e},Ta=function(e,t){return M(e,(function(e,n){return E(e,(function(e){return t(e.element(),n.element())}))?e:e.concat([n])}),[])},Oa=function(e,t,n,r){if(t>0&&t<e.length){var o=e[t-1].cells(),i=Ta(o,n);I(i,(function(o){for(var i=p.none(),u=function(t){for(var u=function(u){var c=e[t].cells()[u],a=n(c.element(),o.element());a&&(i.isNone()&&(i=p.some(r())),i.each((function(n){Gc.mutateCell(e[t],u,On(n,!0))})))},c=0;c<Gc.cellLength(e[0]);c++)u(c)},c=t;c<e.length;c++)u(c)}))}return e},Aa={merge:xa,unmerge:Ra,splitRows:Oa},Da=function(e,t,n,r){var o=Gc.getCell(e[t],n),i=u(r,o.element()),c=e[t];return e.length>1&&Gc.cellLength(c)>1&&(n>0&&i(Gc.getCellElement(c,n-1))||n<c.cells().length-1&&i(Gc.getCellElement(c,n+1))||t>0&&i(Gc.getCellElement(e[t-1],n))||t<e.length-1&&i(Gc.getCellElement(e[t+1],n)))},Ea=function(e,t,n,r,o){for(var i=e.row(),u=e.column(),c=n.length,a=Gc.cellLength(n[0]),l=i+c,f=u+a,s=i;s<l;s++)for(var d=u;d<f;d++){Da(t,s,d,o)&&Aa.unmerge(t,Gc.getCellElement(t[s],d),o,r.cell);var m=Gc.getCellElement(n[s-i],d-u),g=r.replace(m);Gc.mutateCell(t[s],d,On(g,!0))}return t},Ba=function(e,t,n,r,o){var i=Sa.measure(e,t,n);return i.map((function(i){var u=Sa.tailor(t,i,r);return Ea(e,u,n,r,o)}))},Ia=function(e,t,n,r,o){Aa.splitRows(t,e,o,r.cell);var i=Sa.measureWidth(n,t),u=Sa.tailor(n,i,r),c=Sa.measureWidth(t,u),a=Sa.tailor(t,c,r);return a.slice(0,e).concat(u).concat(a.slice(e,a.length))},Na={merge:Ba,insert:Ia},ka=function(e,t,n,r,o){var i=e.slice(0,t),u=e.slice(t),c=Gc.mapCells(e[n],(function(n,i){var u=t>0&&t<e.length&&r(Gc.getCellElement(e[t-1],i),Gc.getCellElement(e[t],i)),c=u?Gc.getCell(e[t],i):On(o(n.element(),r),!0);return c}));return i.concat([c]).concat(u)},Pa=function(e,t,n,r,o){return B(e,(function(e){var i=t>0&&t<Gc.cellLength(e)&&r(Gc.getCellElement(e,t-1),Gc.getCellElement(e,t)),u=i?Gc.getCell(e,t):On(o(Gc.getCellElement(e,n),r),!0);return Gc.addCell(e,t,u)}))},Ma=function(e,t,n,r,o){var i=n+1;return B(e,(function(e,u){var c=u===t,a=c?On(o(Gc.getCellElement(e,n),r),!0):Gc.getCell(e,n);return Gc.addCell(e,i,a)}))},Wa=function(e,t,n,r,o){var i=t+1,u=e.slice(0,i),c=e.slice(i),a=Gc.mapCells(e[t],(function(e,t){var i=t===n;return i?On(o(e.element(),r),!0):e}));return u.concat([a]).concat(c)},_a=function(e,t,n){var r=B(e,(function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Dn(r,e.section())}));return k(r,(function(e){return e.cells().length>0}))},La=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Ha={insertRowAt:ka,insertColumnAt:Pa,splitCellIntoColumns:Ma,splitCellIntoRows:Wa,deleteRowsAt:La,deleteColumnsAt:_a},ja=function(e,t,n,r){var o=function(e){return E(t,(function(t){return n(e.element(),t.element())}))};return B(e,(function(e){return Gc.mapCells(e,(function(e){return o(e)?On(r(e.element(),n),!0):e}))}))},za=function(e,t,n,r){return void 0!==Gc.getCellElement(e[t],n)&&t>0&&r(Gc.getCellElement(e[t-1],n),Gc.getCellElement(e[t],n))},Fa=function(e,t,n){return t>0&&n(Gc.getCellElement(e,t-1),Gc.getCellElement(e,t))},Ua=function(e,t,n,r){var o=H(e,(function(r,o){var i=za(e,o,t,n)||Fa(r,t,n);return i?[]:[Gc.getCell(r,t)]}));return ja(e,o,n,r)},Va=function(e,t,n,r){var o=e[t],i=H(o.cells(),(function(r,i){var u=za(e,t,i,n)||Fa(o,i,n);return u?[]:[r]}));return ja(e,i,n,r)},qa={replaceColumn:Ua,replaceRow:Va},Ga=bi.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ya=Je({},Ga),Ka=function(e,t){return 0===e.length?Ya.none():1===e.length?Ya.only(0):0===t?Ya.left(0,1):t===e.length-1?Ya.right(t-1,t):t>0&&t<e.length-1?Ya.middle(t-1,t,t+1):Ya.none()},Xa=function(e,t,n,r){var i=e.slice(0),u=Ka(e,t),c=function(e){return B(e,o(0))},a=o(c(i)),l=function(e){return r.singleColumnWidth(i[e],n)},f=function(e,t){if(n>=0){var o=Math.max(r.minCellWidth(),i[t]-n);return c(i.slice(0,e)).concat([n,o-i[t]]).concat(c(i.slice(t+1)))}var u=Math.max(r.minCellWidth(),i[e]+n),a=i[e]-u;return c(i.slice(0,e)).concat([u-i[e],a]).concat(c(i.slice(t+1)))},s=f,d=function(e,t,n){return f(t,n)},m=function(e,t){if(n>=0)return c(i.slice(0,t)).concat([n]);var o=Math.max(r.minCellWidth(),i[t]+n);return c(i.slice(0,t)).concat([o-i[t]])};return u.fold(a,l,s,d,m)},$a={determine:Xa},Ja=function(e,t){return we(e,t)&&parseInt(be(e,t),10)>1},Qa=function(e){return Ja(e,"colspan")},Za=function(e){return Ja(e,"rowspan")},el=function(e,t){return parseInt(Fe(e,t),10)},tl={hasColspan:Qa,hasRowspan:Za,minWidth:o(10),minHeight:o(10),getInt:el},nl=function(e,t,n){return Ve(e,t).fold((function(){return n(e)+"px"}),(function(e){return e}))},rl=function(e,t){return nl(e,"width",(function(e){return yu.getPixelWidth(e,t)}))},ol=function(e){return nl(e,"height",yu.getHeight)},il=function(e,t,n,r,o){var i=hc.columns(e),u=B(i,(function(e){return e.map(t.edge)}));return B(i,(function(e,t){var i=e.filter(c(tl.hasColspan));return i.fold((function(){var e=dc(u,t);return r(e)}),(function(e){return n(e,o)}))}))},ul=function(e){return e.map((function(e){return e+"px"})).getOr("")},cl=function(e,t,n){return il(e,t,rl,ul,n)},al=function(e,t,n){return il(e,t,yu.getPercentageWidth,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}),n)},ll=function(e,t,n){return il(e,t,yu.getPixelWidth,(function(e){return e.getOrThunk(n.minCellWidth)}),n)},fl=function(e,t,n,r){var o=hc.rows(e),i=B(o,(function(e){return e.map(t.edge)}));return B(o,(function(e,t){var o=e.filter(c(tl.hasRowspan));return o.fold((function(){var e=dc(i,t);return r(e)}),(function(e){return n(e)}))}))},sl=function(e,t){return fl(e,t,yu.getHeight,(function(e){return e.getOrThunk(tl.minHeight)}))},dl=function(e,t){return fl(e,t,ol,ul)},ml={getRawWidths:cl,getPixelWidths:ll,getPercentageWidths:al,getPixelHeights:sl,getRawHeights:dl},gl=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},pl=function(e,t){var n=br.justCells(e);return B(n,(function(e){var n=gl(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:o(n),colspan:e.colspan}}))},hl=function(e,t){var n=br.justCells(e);return B(n,(function(e){var n=gl(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:o(n),rowspan:e.rowspan}}))},vl=function(e,t){return B(e.all(),(function(e,n){return{element:e.element,height:o(t[n])}}))},bl={recalculateWidth:pl,recalculateHeight:hl,matchRowHeight:vl},wl=function(e,t){var n=parseFloat(e),r=Fi(t),i=function(e){return e/r*100},u=function(e,t){return[100-e]},c=function(){return tl.minWidth()/r*100},a=function(e,t,r){var o=r/100,i=o*n;yu.setPercentageWidth(e,n+i)};return{width:o(n),pixelWidth:o(r),getWidths:ml.getPercentageWidths,getCellDelta:i,singleColumnWidth:u,minCellWidth:c,setElementWidth:yu.setPercentageWidth,setTableWidth:a}},yl=function(e){var t=i,n=function(e,t){var n=Math.max(tl.minWidth(),e+t);return[n-e]},r=function(e,t,n){var r=P(t,(function(e,t){return e+t}),0);yu.setPixelWidth(e,r)};return{width:o(e),pixelWidth:o(e),getWidths:ml.getPixelWidths,getCellDelta:t,singleColumnWidth:n,minCellWidth:tl.minWidth,setElementWidth:yu.setPixelWidth,setTableWidth:r}},Cl=function(e,t){var n=yu.percentageBasedSizeRegex().exec(t);if(null!==n)return wl(n[1],e);var r=yu.pixelBasedSizeRegex().exec(t);if(null!==r){var o=parseInt(r[1],10);return yl(o)}var i=Fi(e);return yl(i)},Sl=function(e){var t=yu.getRawWidth(e);return t.fold((function(){var t=Fi(e);return yl(t)}),(function(t){return Cl(e,t)}))},xl={getTableSize:Sl},Rl=function(e){return br.generate(e)},Tl=function(e){return P(e,(function(e,t){return e+t}),0)},Ol=function(e){var t=sr.fromTable(e);return Rl(t)},Al=function(e,t,n,r){var o=xl.getTableSize(e),i=o.getCellDelta(t),u=Ol(e),c=o.getWidths(u,r,o),a=$a.determine(c,n,i,o),l=B(a,(function(e,t){return e+c[t]})),f=bl.recalculateWidth(u,l);I(f,(function(e){o.setElementWidth(e.element(),e.width())})),n===u.grid().columns()-1&&o.setTableWidth(e,l,i)},Dl=function(e,t,n,r){var o=Ol(e),i=ml.getPixelHeights(o,r),u=B(i,(function(e,r){return n===r?Math.max(t+e,tl.minHeight()):e})),c=bl.recalculateHeight(o,u),a=bl.matchRowHeight(o,u);I(a,(function(e){yu.setHeight(e.element(),e.height())})),I(c,(function(e){yu.setHeight(e.element(),e.height())}));var l=Tl(u);yu.setHeight(e,l)},El=function(e,t,n){var r=xl.getTableSize(e),o=Rl(t),i=r.getWidths(o,n,r),u=bl.recalculateWidth(o,i);I(u,(function(e){r.setElementWidth(e.element(),e.width())})),u.length>0&&r.setTableWidth(e,i,r.getCellDelta(0))},Bl={adjustWidth:Al,adjustHeight:Dl,adjustWidthTo:El},Il=function(e,t){return Nl(e,t,{validate:S,label:"function"})},Nl=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return te("required",t),re(t),function(r){var o=V(r),i=j(t,(function(e){return D(o,e)}));i||Z(t,o),e(t,o);var u=k(t,(function(e){return!n.validate(r[e],e)}));return u.length>0&&ne(u,n.label),r}},kl=function(e,t){var n=k(t,(function(t){return!D(e,t)}));n.length>0&&ee(n)},Pl=function(e){return Il(kl,e)},Ml=Pl(["cell","row","replace","gap"]),Wl=function(e){var t=we(e,"colspan")?parseInt(be(e,"colspan"),10):1,n=we(e,"rowspan")?parseInt(be(e,"rowspan"),10):1;return{element:o(e),colspan:o(t),rowspan:o(n)}},_l=function(e,n){void 0===n&&(n=Wl),Ml(e);var r=t(p.none()),o=function(t){return e.cell(t)},i=function(e){var t=n(e);return o(t)},u=function(e){var t=i(e);return r.get().isNone()&&r.set(p.some(t)),c=p.some({item:e,replacement:t}),t},c=p.none(),a=function(e,t){return c.fold((function(){return u(e)}),(function(n){return t(e,n.item)?n.replacement:u(e)}))};return{getOrInit:a,cursor:r.get}},Ll=function(e,n){return function(r){var o=t(p.none());Ml(r);var i=[],u=function(e,t){return W(i,(function(n){return t(n.item,e)}))},c=function(t){var u={scope:e},c=r.replace(t,n,u);return i.push({item:t,sub:c}),o.get().isNone()&&o.set(p.some(c)),c},a=function(e,t){return u(e,t).fold((function(){return c(e)}),(function(n){return t(e,n.item)?n.sub:c(e)}))};return{replaceOrInit:a,cursor:o.get}}},Hl=function(e){Ml(e);var n=t(p.none()),r=function(t){return n.get().isNone()&&n.set(p.some(t)),function(){var n=e.cell({element:o(t),colspan:o(1),rowspan:o(1)});return qe(n,"width"),qe(t,"width"),n}};return{combine:r,cursor:n.get}},jl={modification:_l,transform:Ll,merging:Hl},zl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Fl=function(e,t){var n=e.property().name(t);return D(["ol","ul"],n)},Ul=function(e,t){var n=e.property().name(t);return D(zl,n)},Vl=function(e,t){var n=e.property().name(t);return D(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},ql=function(e,t){var n=e.property().name(t);return D(["h1","h2","h3","h4","h5","h6"],n)},Gl=function(e,t){return D(["div","li","td","th","blockquote","body","caption"],e.property().name(t))},Yl=function(e,t){return D(["br","img","hr","input"],e.property().name(t))},Kl=function(e,t){return"iframe"===e.property().name(t)},Xl=function(e,t){return!(Ul(e,t)||Yl(e,t))&&"li"!==e.property().name(t)},$l={isBlock:Ul,isList:Fl,isFormatting:Vl,isHeading:ql,isContainer:Gl,isEmptyTag:Yl,isFrame:Kl,isInline:Xl},Jl=wo(),Ql=function(e){return $l.isBlock(Jl,e)},Zl=function(e){return $l.isList(Jl,e)},ef=function(e){return $l.isFormatting(Jl,e)},tf=function(e){return $l.isHeading(Jl,e)},nf=function(e){return $l.isContainer(Jl,e)},rf=function(e){return $l.isEmptyTag(Jl,e)},of=function(e){return $l.isFrame(Jl,e)},uf=function(e){return $l.isInline(Jl,e)},cf={isBlock:Ql,isList:Zl,isFormatting:ef,isHeading:tf,isContainer:nf,isEmptyTag:rf,isFrame:of,isInline:uf},af=function(e){var t=function(e){return"br"===le(e)},n=function(e){return j(e,(function(e){return t(e)||ge(e)&&0===Er(e).trim().length}))},r=function(e){return"li"===le(e)||Ln(e,cf.isList).isSome()},o=function(e){return on(e).map((function(e){return!!cf.isBlock(e)||!!cf.isEmptyTag(e)&&"img"!==le(e)})).getOr(!1)},i=function(e){return _r(e).bind((function(n){var i=o(n);return tn(n).map((function(o){return!0===i||r(o)||t(n)||cf.isBlock(o)&&!Yt(e,o)?[]:[Pe.fromTag("br")]}))})).getOr([])},u=function(){var t=H(e,(function(e){var t=un(e);return n(t)?[]:t.concat(i(e))}));return 0===t.length?[Pe.fromTag("br")]:t},c=u();vn(e[0]),hn(e[0],c)},lf={merge:af},ff=function(e){var t=ar.cells(e);0===t.length&&bn(e)},sf=J("grid","cursor"),df=function(e,t,n){return mf(e,t,n).orThunk((function(){return mf(e,0,0)}))},mf=function(e,t,n){return p.from(e[t]).bind((function(e){return p.from(e.cells()[n]).bind((function(e){return p.from(e.element())}))}))},gf=function(e,t,n){return sf(e,mf(e,t,n))},pf=function(e){return M(e,(function(e,t){return E(e,(function(e){return e.row()===t.row()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row()-t.row()}))},hf=function(e){return M(e,(function(e,t){return E(e,(function(e){return e.column()===t.column()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column()-t.column()}))},vf=function(e,t,n,r){var o=t.row(),i=t.row(),u=Ha.insertRowAt(e,i,o,n,r.getOrInit);return gf(u,i,t.column())},bf=function(e,t,n,r){var o=t[0].row(),i=t[0].row(),u=pf(t),c=M(u,(function(e,t){return Ha.insertRowAt(e,i,o,n,r.getOrInit)}),e);return gf(c,i,t[0].column())},wf=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),u=Ha.insertRowAt(e,i,o,n,r.getOrInit);return gf(u,i,t.column())},yf=function(e,t,n,r){var o=pf(t),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),c=M(o,(function(e,t){return Ha.insertRowAt(e,u,i,n,r.getOrInit)}),e);return gf(c,u,t[0].column())},Cf=function(e,t,n,r){var o=t.column(),i=t.column(),u=Ha.insertColumnAt(e,i,o,n,r.getOrInit);return gf(u,t.row(),i)},Sf=function(e,t,n,r){var o=hf(t),i=o[0].column(),u=o[0].column(),c=M(o,(function(e,t){return Ha.insertColumnAt(e,u,i,n,r.getOrInit)}),e);return gf(c,t[0].row(),u)},xf=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),u=Ha.insertColumnAt(e,i,o,n,r.getOrInit);return gf(u,t.row(),i)},Rf=function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),u=hf(t),c=M(u,(function(e,t){return Ha.insertColumnAt(e,i,o,n,r.getOrInit)}),e);return gf(c,t[0].row(),i)},Tf=function(e,t,n,r){var o=qa.replaceRow(e,t.row(),n,r.replaceOrInit);return gf(o,t.row(),t.column())},Of=function(e,t,n,r){var o=qa.replaceColumn(e,t.column(),n,r.replaceOrInit);return gf(o,t.row(),t.column())},Af=function(e,t,n,r){var o=qa.replaceRow(e,t.row(),n,r.replaceOrInit);return gf(o,t.row(),t.column())},Df=function(e,t,n,r){var o=qa.replaceColumn(e,t.column(),n,r.replaceOrInit);return gf(o,t.row(),t.column())},Ef=function(e,t,n,r){var o=Ha.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return gf(o,t.row(),t.column())},Bf=function(e,t,n,r){var o=Ha.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return gf(o,t.row(),t.column())},If=function(e,t,n,r){var o=hf(t),i=Ha.deleteColumnsAt(e,o[0].column(),o[o.length-1].column()),u=df(i,t[0].row(),t[0].column());return sf(i,u)},Nf=function(e,t,n,r){var o=pf(t),i=Ha.deleteRowsAt(e,o[0].row(),o[o.length-1].row()),u=df(i,t[0].row(),t[0].column());return sf(i,u)},kf=function(e,t,n,r){var i=t.cells();lf.merge(i);var u=Aa.merge(e,t.bounds(),n,o(i[0]));return sf(u,p.from(i[0]))},Pf=function(e,t,n,r){var o=P(t,(function(e,t){return Aa.unmerge(e,t,n,r.combine(t))}),e);return sf(o,p.from(t[0]))},Mf=function(e,t,n,r){var o=function(e,t){var n=sr.fromTable(e),r=br.generate(n);return ea.toGrid(r,t,!0)},i=o(t.clipboard(),t.generators()),u=Cn(t.row(),t.column()),c=Na.merge(u,e,i,t.generators(),n);return c.fold((function(){return sf(e,p.some(t.element()))}),(function(e){var n=df(e,t.row(),t.column());return sf(e,n)}))},Wf=function(e,t,n){var r=sr.fromPastedRows(e,n),o=br.generate(r);return ea.toGrid(o,t,!0)},_f=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),u=Wf(t.clipboard(),t.generators(),o),c=Na.insert(i,e,u,t.generators(),n),a=df(c,t.cells[0].row(),t.cells[0].column());return sf(c,a)},Lf=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),u=Wf(t.clipboard(),t.generators(),o),c=Na.insert(i,e,u,t.generators(),n),a=df(c,t.cells[0].row(),t.cells[0].column());return sf(c,a)},Hf=Bl.adjustWidthTo,jf={insertRowBefore:ia(vf,ua,n,n,jl.modification),insertRowsBefore:ia(bf,sa,n,n,jl.modification),insertRowAfter:ia(wf,ua,n,n,jl.modification),insertRowsAfter:ia(yf,sa,n,n,jl.modification),insertColumnBefore:ia(Cf,ua,Hf,n,jl.modification),insertColumnsBefore:ia(Sf,sa,Hf,n,jl.modification),insertColumnAfter:ia(xf,ua,Hf,n,jl.modification),insertColumnsAfter:ia(Rf,sa,Hf,n,jl.modification),splitCellIntoColumns:ia(Ef,ua,Hf,n,jl.modification),splitCellIntoRows:ia(Bf,ua,n,n,jl.modification),eraseColumns:ia(If,sa,Hf,ff,jl.modification),eraseRows:ia(Nf,sa,n,ff,jl.modification),makeColumnHeader:ia(Of,ua,n,n,jl.transform("row","th")),unmakeColumnHeader:ia(Df,ua,n,n,jl.transform(null,"td")),makeRowHeader:ia(Tf,ua,n,n,jl.transform("col","th")),unmakeRowHeader:ia(Af,ua,n,n,jl.transform(null,"td")),mergeCells:ia(kf,la,n,n,jl.merging),unmergeCells:ia(Pf,fa,Hf,n,jl.merging),pasteCells:ia(Mf,ca,Hf,n,jl.modification),pasteRowsBefore:ia(_f,aa,n,n,jl.modification),pasteRowsAfter:ia(Lf,aa,n,n,jl.modification)},zf=function(e){return Pe.fromDom(e.getBody())},Ff=function(e){return e.getBoundingClientRect().width},Uf=function(e){return e.getBoundingClientRect().height},Vf=function(e){return function(t){return Yt(t,zf(e))}},qf=function(e){return e?e.replace(/px$/,""):""},Gf=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},Yf=function(e){var t=Wn(e,"td[data-mce-style],th[data-mce-style]");ye(e,"data-mce-style"),I(t,(function(e){ye(e,"data-mce-style")}))},Kf=function(e){return"rtl"===Fe(e,"direction")?"rtl":"ltr"},Xf={isRtl:o(!1)},$f={isRtl:o(!0)},Jf=function(e){var t=Kf(e);return"rtl"===t?$f:Xf},Qf={directionAt:Jf},Zf="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",es={"border-collapse":"collapse",width:"100%"},ts={border:"1"},ns=function(e){return e.getParam("table_default_attributes",ts,"object")},rs=function(e){return e.getParam("table_default_styles",es,"object")},os=function(e){return e.getParam("table_resize_bars",!0,"boolean")},is=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},us=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},cs=function(e){return e.getParam("table_row_advtab",!0,"boolean")},as=function(e){return e.getParam("table_advtab",!0,"boolean")},ls=function(e){return e.getParam("table_appearance_options",!0,"boolean")},fs=function(e){return e.getParam("table_grid",!0,"boolean")},ss=function(e){return e.getParam("table_style_by_css",!1,"boolean")},ds=function(e){return e.getParam("table_cell_class_list",[],"array")},ms=function(e){return e.getParam("table_row_class_list",[],"array")},gs=function(e){return e.getParam("table_class_list",[],"array")},ps=function(e){return!0===e.getParam("table_responsive_width")},hs=function(e){return!1===e.getParam("table_responsive_width")},vs=function(e){return e.getParam("table_toolbar",Zf)},bs=function(e){var t=e.getParam("table_clone_elements");return w(t)?p.some(t.split(/[ ,]/)):Array.isArray(t)?p.some(t):p.none()},ws=function(e){var t=e.getParam("object_resizing",!0);return w(t)?"table"===t:t},ys=function(e,t){return e.fire("newrow",{node:t})},Cs=function(e,t){return e.fire("newcell",{node:t})},Ss=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},xs=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Rs=function(e,t,n,r,o){e.fire("TableSelectionChange",{cells:t,start:n,finish:r,otherCells:o})},Ts=function(e){e.fire("TableSelectionClear")},Os=J("element","offset"),As=(J("element","deltaOffset"),J("element","start","finish"),J("begin","end"),J("element","text"),function(e,t,n){return e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((function(t){return As(e,t,n).orThunk((function(){return p.some(t)}))})):p.none()}),Ds=function(e,t){if(e.property().isText(t))return e.property().getText(t).length;var n=e.property().children(t);return n.length},Es=function(e,t){var n=As(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return Os(n,Ds(e,n));var r=e.property().children(n);return r.length>0?Es(e,r[r.length-1]):Os(n,Ds(e,n))},Bs=Es,Is=wo(),Ns=function(e){return Bs(Is,e)},ks=function(e,t){var r=function(e){return"table"===le(zf(e))},o=function(t){var n=Yu.getGridSize(t);return!1===r(e)||n.rows()>1},i=function(t){var n=Yu.getGridSize(t);return!1===r(e)||n.columns()>1},u=bs(e),c=function(t,n,r,o){return function(i,c){Yf(i);var a=o(),l=Pe.fromDom(e.getDoc()),f=qu(Qf.directionAt),s=Jr.cellOperations(r,l,u);return n(i)?t(a,i,c,s,f).bind((function(t){return I(t.newRows(),(function(t){ys(e,t.dom())})),I(t.newCells(),(function(t){Cs(e,t.dom())})),t.cursor().map((function(t){var n=Ns(t),r=e.dom.createRng();return r.setStart(n.element().dom(),n.offset()),r.setEnd(n.element().dom(),n.offset()),r}))})):p.none()}},a=c(jf.eraseRows,o,n,t),l=c(jf.eraseColumns,i,n,t),s=c(jf.insertRowsBefore,f,n,t),d=c(jf.insertRowsAfter,f,n,t),m=c(jf.insertColumnsBefore,f,Su.halve,t),g=c(jf.insertColumnsAfter,f,Su.halve,t),h=c(jf.mergeCells,f,n,t),v=c(jf.unmergeCells,f,n,t),b=c(jf.pasteRowsBefore,f,n,t),w=c(jf.pasteRowsAfter,f,n,t),y=c(jf.pasteCells,f,n,t);return{deleteRow:a,deleteColumn:l,insertRowsBefore:s,insertRowsAfter:d,insertColumnsBefore:m,insertColumnsAfter:g,mergeCells:h,unmergeCells:v,pasteRowsBefore:b,pasteRowsAfter:w,pasteCells:y}},Ps=function(e,t,n){var r=sr.fromTable(e),o=br.generate(r),i=sa(o,t);return i.map((function(e){var t=ea.toGrid(o,n,!1),r=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),i=ra(r,n);return Qu.copy(i)}))},Ms={copyRows:Ps},Ws=tinymce.util.Tools.resolve("tinymce.util.Tools"),_s=function(e,t,n){var r,o=e.select("td,th",t),i=function(t,r){for(var o=0;o<r.length;o++){var i=e.getStyle(r[o],n);if("undefined"===typeof t&&(t=i),t!==i)return""}return t};return r=i(r,o),r},Ls=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},Hs=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},js=function(e,t){Ws.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))},zs=function(e,t){Ws.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))},Fs={applyAlign:Ls,applyVAlign:Hs,unApplyAlign:js,unApplyVAlign:zs,getTDTHOverallStyle:_s},Us=function(e,t,n){var r=function(e,n){return n=n||[],Ws.each(e,(function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t&&t(o)),n.push(o)})),n};return r(e,n||[])},Vs=function(e,t){var n=function(t){return Re(t,"rgb")?e.toHex(t):t},r=Ve(Pe.fromDom(t),"border-width").getOr(""),o=Ve(Pe.fromDom(t),"border-style").getOr(""),i=Ve(Pe.fromDom(t),"border-color").map(n).getOr(""),u=Ve(Pe.fromDom(t),"background-color").map(n).getOr("");return{borderwidth:r,borderstyle:o,bordercolor:i,backgroundcolor:u}},qs=function(e){var t=e[0],n=e.slice(1),r=V(t);return I(n,(function(e){I(r,(function(n){G(e,(function(e,r){var o=t[n];""!==o&&n===r&&o!==e&&(t[n]="")}))}))})),t},Gs=function(e){var t=[{name:"borderstyle",type:"selectbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],n={name:"borderwidth",type:"input",label:"Border width"},r="cell"===e?[n].concat(t):t;return{title:"Advanced",name:"advanced",items:r}},Ys=function(e,t,n,r,o){var i={};return Ws.each(e.split(" "),(function(e){r.formatter.matchNode(o,t+e)&&(i[n]=e)})),i[n]||(i[n]=""),i},Ks=u(Ys,"left center right"),Xs=u(Ys,"top middle bottom"),$s=function(e,t){var n=rs(e),r=ns(e),o=function(e){var t=function(t){return Re(t,"rgb")?e.toHex(t):t},r=X(n,"border-style").getOr(""),o=X(n,"border-color").getOr(""),i=X(n,"background-color").getOr("");return{borderstyle:r,bordercolor:t(o),backgroundcolor:t(i)}},i={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},u=function(){var t=n["border-width"];return ss(e)&&t?{border:t}:X(r,"border").fold((function(){return{}}),(function(e){return{border:e}}))},c=e.dom,a=t?o(c):{},l=function(){var e=X(n,"border-spacing").or(X(r,"cellspacing")).fold((function(){return{}}),(function(e){return{cellspacing:e}})),t=X(n,"border-padding").or(X(r,"cellpadding")).fold((function(){return{}}),(function(e){return{cellpadding:e}}));return Je(Je({},e),t)},f=Je(Je(Je(Je(Je(Je({},i),n),r),a),u()),l());return f},Js=function(e,t,n){var r=function(t,n){var r=Ve(Pe.fromDom(n),"border-width");return ss(e)&&r.isSome()?r.getOr(""):t.getAttrib(n,"border")||Fs.getTDTHOverallStyle(e.dom,n,"border-width")||Fs.getTDTHOverallStyle(e.dom,n,"border")},o=e.dom,i=Je(Je({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"),cellpadding:o.getAttrib(t,"cellpadding")||Fs.getTDTHOverallStyle(e.dom,t,"padding"),border:r(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class","")},Ks("align","align",e,t)),n?Vs(o,t):{});return i},Qs=function(e,t,n){var r=e.dom,o=Je(Je({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),class:r.getAttrib(t,"class",""),align:"",type:t.parentNode.nodeName.toLowerCase()},Ks("align","align",e,t)),n?Vs(r,t):{});return o},Zs=function(e,t,n){var r=e.dom,o=Je(Je(Je({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),celltype:t.nodeName.toLowerCase(),class:r.getAttrib(t,"class","")},Ks("align","halign",e,t)),Xs("valign","valign",e,t)),n?Vs(r,t):{});return o},ed={buildListItems:Us,extractAdvancedStyles:Vs,getSharedValues:qs,getAdvancedTab:Gs,extractDataFromTableElement:Js,extractDataFromRowElement:Qs,extractDataFromCellElement:Zs,extractDataFromSettings:$s},td=function(e){var t=ds(e),n=ed.buildListItems(t,(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})}));return t.length>0?p.some({name:"class",type:"selectbox",label:"Class",items:n}):p.none()},nd=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"selectbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"selectbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"selectbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"selectbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],rd=function(e){return td(e).fold((function(){return nd}),(function(e){return nd.concat(e)}))},od={getItems:rd},id=function(e,t){var n=function(n,r){e.setAttrib(t,n,r)},r=function(n,r){e.setStyle(t,n,r)};return{setAttrib:n,setStyle:r}},ud=function(e,t){var n=function(n,r){r&&e.setAttrib(t,n,r)},r=function(n,r){r&&e.setStyle(t,n,r)};return{setAttrib:n,setStyle:r}},cd={normal:id,ifTruthy:ud},ad=function(e,t){e.setAttrib("scope",t.scope),e.setAttrib("class",t.class),e.setStyle("width",Gf(t.width)),e.setStyle("height",Gf(t.height))},ld=function(e,t){e.setStyle("background-color",t.backgroundcolor),e.setStyle("border-color",t.bordercolor),e.setStyle("border-style",t.borderstyle),e.setStyle("border-width",Gf(t.borderwidth))},fd=function(e,t,n){var r=e.dom,o=n.celltype&&t[0].nodeName.toLowerCase()!==n.celltype?r.rename(t[0],n.celltype):t[0],i=cd.normal(r,o);ad(i,n),us(e)&&ld(i,n),Fs.unApplyAlign(e,o),Fs.unApplyVAlign(e,o),n.halign&&Fs.applyAlign(e,o,n.halign),n.valign&&Fs.applyVAlign(e,o,n.valign)},sd=function(e,t,n){var r=e.dom;Ws.each(t,(function(t){n.celltype&&t.nodeName.toLowerCase()!==n.celltype&&(t=r.rename(t,n.celltype));var o=cd.ifTruthy(r,t);ad(o,n),us(e)&&ld(o,n),n.halign&&Fs.applyAlign(e,t,n.halign),n.valign&&Fs.applyVAlign(e,t,n.valign)}))},dd=function(e,t,n){var r=n.getData();n.close(),e.undoManager.transact((function(){var n=1===t.length?fd:sd;n(e,t,r),e.focus()}))},md=function(e){var t,n=[];if(n=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!n.length&&t&&n.push(t),t=t||n[0],t){var r=Ws.map(n,(function(t){return ed.extractDataFromCellElement(e,t,us(e))})),o=ed.getSharedValues(r),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:od.getItems(e)},ed.getAdvancedTab("cell")]},c={type:"panel",items:[{type:"grid",columns:2,items:od.getItems(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:us(e)?i:c,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:u(dd,e,n)})}},gd={open:md},pd=function(e){var t=ms(e),n=ed.buildListItems(t,(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})}));return t.length>0?p.some({name:"class",type:"selectbox",label:"Class",items:n}):p.none()},hd=[{type:"selectbox",name:"type",label:"Row type",items:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],vd=function(e){return pd(e).fold((function(){return hd}),(function(e){return hd.concat(e)}))},bd={getItems:vd},wd=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),"tbody"===n&&"THEAD"===o.nodeName&&i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t),o.hasChildNodes()||e.remove(o)},yd=function(e,t){e.setStyle("background-color",t.backgroundcolor),e.setStyle("border-color",t.bordercolor),e.setStyle("border-style",t.borderstyle)},Cd=function(e,t,n,r){var o=e.dom,i=r.getData();r.close();var u=1===t.length?cd.normal:cd.ifTruthy;e.undoManager.transact((function(){Ws.each(t,(function(t){i.type!==t.parentNode.nodeName.toLowerCase()&&wd(e.dom,t,i.type);var r=u(o,t);r.setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",Gf(i.height)),cs(e)&&yd(r,i),i.align!==n.align&&(Fs.unApplyAlign(e,t),Fs.applyAlign(e,t,i.align))})),e.focus()}))},Sd=function(e){var t,n,r,o=e.dom,i=[];if(t=o.getParent(e.selection.getStart(),"table"),t&&(n=o.getParent(e.selection.getStart(),"td,th"),Ws.each(t.rows,(function(e){Ws.each(e.cells,(function(t){if((o.getAttrib(t,"data-mce-selected")||t===n)&&i.indexOf(e)<0)return i.push(e),!1}))})),r=i[0],r)){var c=Ws.map(i,(function(t){return ed.extractDataFromRowElement(e,t,cs(e))})),a=ed.getSharedValues(c),l={type:"tabpanel",tabs:[{title:"General",name:"general",items:bd.getItems(e)},ed.getAdvancedTab("row")]},f={type:"panel",items:[{type:"grid",columns:2,items:bd.getItems(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:cs(e)?l:f,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onSubmit:u(Cd,e,i,a)})}},xd={open:Sd},Rd=tinymce.util.Tools.resolve("tinymce.Env"),Td={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Od=function(){return Pe.fromTag("table")},Ad=function(){return Pe.fromTag("tbody")},Dd=function(){return Pe.fromTag("tr")},Ed=function(){return Pe.fromTag("th")},Bd=function(){return Pe.fromTag("td")},Id=function(e,t,n,r,o){void 0===o&&(o=Td);var i=Od();ze(i,o.styles),ve(i,o.attributes);var u=Ad();dn(i,u);for(var c=[],a=0;a<e;a++){for(var l=Dd(),f=0;f<t;f++){var s=a<n||f<r?Ed():Bd();f<r&&he(s,"scope","row"),a<n&&he(s,"scope","col"),dn(s,Pe.fromTag("br")),o.percentages&&je(s,"width",100/t+"%"),dn(l,s)}c.push(l)}return hn(u,c),i},Nd=function(e){return e.dom().innerHTML},kd=function(e){var t=Pe.fromTag("div"),n=Pe.fromDom(e.dom().cloneNode(!0));return dn(t,n),Nd(t)},Pd=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Md=function(e,t){Vn(t,"td,th").each(u(Pd,e))},Wd=function(e,t){I(Wn(t,"tr"),(function(t){ys(e,t.dom()),I(Wn(t,"th,td"),(function(t){Cs(e,t.dom())}))}))},_d=function(e){return w(e)&&-1!==e.indexOf("%")},Ld=function(e,t,n){var r=rs(e),o={styles:r,attributes:ns(e),percentages:_d(r.width)&&!hs(e)},i=Id(n,t,0,0,o);he(i,"data-mce-id","__mce");var u=kd(i);return e.insertContent(u),Vn(zf(e),'table[data-mce-id="__mce"]').map((function(t){return hs(e)&&je(t,"width",Fe(t,"width")),ye(t,"data-mce-id"),Wd(e,t),Md(e,t),t.dom()})).getOr(null)},Hd={insert:Ld},jd=function(e,t,n){var r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],i=ls(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],u=[{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],c=t?[{type:"selectbox",name:"class",label:"Class",items:ed.buildListItems(gs(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})}))}]:[];return r.concat(o).concat(i).concat(u).concat(c)},zd={getItems:jd},Fd=function(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)w(n)?e.setStyle(t,n,r):e.setStyle(t,n);else if(t.children)for(var o=0;o<t.children.length;o++)Fd(e,t.children[o],n,r)},Ud=function(e,t,n){var r=e.dom,o={},i={};if(o.class=n.class,i.height=Gf(n.height),r.getAttrib(t,"width")&&!ss(e)?o.width=qf(n.width):i.width=Gf(n.width),ss(e)?(i["border-width"]=Gf(n.border),i["border-spacing"]=Gf(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),ss(e)&&t.children)for(var u=0;u<t.children.length;u++)Fd(r,t.children[u],{"border-width":Gf(n.border),padding:Gf(n.cellpadding)}),as(e)&&Fd(r,t.children[u],{"border-color":n.bordercolor});as(e)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),o.style=r.serializeStyle(Je(Je({},rs(e)),i)),r.setAttribs(t,Je(Je({},ns(e)),o))},Vd=function(e,t,n){var r,o=e.dom,i=n.getData();n.close(),""===i.class&&delete i.class,e.undoManager.transact((function(){if(!t){var n=parseInt(i.cols,10)||1,u=parseInt(i.rows,10)||1;t=Hd.insert(e,n,u)}Ud(e,t,i),r=o.select("caption",t)[0],r&&!i.caption&&o.remove(r),!r&&i.caption&&(r=o.create("caption"),r.innerHTML=Rd.ie?Or:'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),""===i.align?Fs.unApplyAlign(e,t):Fs.applyAlign(e,t,i.align),e.focus(),e.addVisual()}))},qd=function(e,t){var n,r=e.dom,o=ed.extractDataFromSettings(e,as(e));!1===t?(n=r.getParent(e.selection.getStart(),"table"),n?o=ed.extractDataFromTableElement(e,n,as(e)):as(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",as(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=gs(e).length>0;i&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var c={type:"grid",columns:2,items:zd.getItems(e,i,t)},a=function(){return{type:"panel",items:[c]}},l=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[c]},ed.getAdvancedTab("table")]}},f=as(e)?l():a();e.windowManager.open({title:"Table Properties",size:"normal",body:f,onSubmit:u(Vd,e,n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Gd={open:qd},Yd=function(e){return function(t){return p.from(t.dom.getParent(t.selection.getStart(),e)).map(Pe.fromDom)}},Kd=Yd("th,td"),Xd=Yd("th,td,caption"),$d=Ws.each,Jd=function(e,t,r,o,i){var a=Vf(e),l=function(){Xd(e).each((function(t){var n=ar.table(t,a);n.filter(c(a)).each((function(t){var n=Pe.fromText("");if(fn(t,n),bn(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r),e.nodeChanged()}}))}))},f=function(e){return ar.table(e,a)},s=function(e){return{width:Ff(e.dom()),height:Ff(e.dom())}},d=function(e,t,n){var r=s(n);t.width===r.width&&t.height===r.height||(Ss(e,n.dom(),t.width,t.height),xs(e,n.dom(),r.width,r.height))},m=function(t){Kd(e).each((function(n){f(n).each((function(i){var u=Ii.forMenu(o,i,n),c=s(i);t(i,u).each((function(t){d(e,c,i),e.selection.setRng(t),e.focus(),r.clear(i),Yf(i)}))}))}))},g=function(t){return Kd(e).map((function(t){return f(t).bind((function(r){var i=Pe.fromDom(e.getDoc()),u=Ii.forMenu(o,r,t),c=Jr.cellOperations(n,i,p.none());return Ms.copyRows(r,u,c)}))}))},h=function(t){i.get().each((function(n){var i=B(n,(function(e){return zr(e)}));Kd(e).each((function(n){f(n).each((function(u){var c=Pe.fromDom(e.getDoc()),a=Jr.paste(c),l=Ii.pasteRows(o,u,n,i,a);t(u,l).each((function(t){e.selection.setRng(t),e.focus(),r.clear(u)}))}))}))}))};$d({mceTableSplitCells:function(){m(t.unmergeCells)},mceTableMergeCells:function(){m(t.mergeCells)},mceTableInsertRowBefore:function(){m(t.insertRowsBefore)},mceTableInsertRowAfter:function(){m(t.insertRowsAfter)},mceTableInsertColBefore:function(){m(t.insertColumnsBefore)},mceTableInsertColAfter:function(){m(t.insertColumnsAfter)},mceTableDeleteCol:function(){m(t.deleteColumn)},mceTableDeleteRow:function(){m(t.deleteRow)},mceTableCutRow:function(e){g().each((function(e){i.set(e),m(t.deleteRow)}))},mceTableCopyRow:function(e){g().each((function(e){i.set(e)}))},mceTablePasteRowBefore:function(e){h(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){h(t.pasteRowsAfter)},mceTableDelete:l},(function(t,n){e.addCommand(n,t)})),$d({mceInsertTable:u(Gd.open,e,!0),mceTableProps:u(Gd.open,e,!1),mceTableRowProps:u(xd.open,e),mceTableCellProps:u(gd.open,e)},(function(t,n){e.addCommand(n,(function(){t()}))}))},Qd={registerCommands:Jd},Zd=function(e){var t=p.from(e.dom().documentElement).map(Pe.fromDom).getOr(e);return{parent:o(t),view:o(e),origin:o(Ru(0,0))}},em=function(e,t){var n=function(){return Au(t)};return{parent:o(t),view:o(e),origin:n}},tm=function(e,t){return{parent:o(t),view:o(e),origin:o(Ru(0,0))}},nm={only:Zd,detached:em,body:tm},rm=function(e){var t=J.apply(null,e),n=[],r=function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},o=function(e){n=k(n,(function(t){return t!==e}))},i=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.apply(null,e);I(n,(function(e){e(o)}))};return{bind:r,unbind:o,trigger:i}},om=function(e){var t=Y(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),n=Y(e,(function(e){return e.trigger}));return{registry:t,trigger:n}},im={create:om},um=function(e,t,n,r,i,u,c){return{target:o(e),x:o(t),y:o(n),stop:r,prevent:i,kill:u,raw:o(c)}},cm=function(e){var t=Pe.fromDom(e.target),n=function(){e.stopPropagation()},o=function(){e.preventDefault()},i=r(o,n);return um(t,e.clientX,e.clientY,n,o,i,e)},am=function(e,t){return function(n){e(n)&&t(cm(n))}},lm=function(e,t,n,r,o){var i=am(n,r);return e.dom().addEventListener(t,i,o),{unbind:u(sm,e,t,i,o)}},fm=function(e,t,n,r){return lm(e,t,n,r,!1)},sm=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},dm=o(!0),mm=function(e,t,n){return fm(e,t,dm,n)},gm=cm,pm=vc("ephox-dragster"),hm={resolve:pm.resolve},vm=function(e){var t=Je({layerClass:hm.resolve("blocker")},e),n=Pe.fromTag("div");he(n,"role","presentation"),ze(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),uc(n,hm.resolve("blocker")),uc(n,t.layerClass);var r=function(){return n},o=function(){bn(n)};return{element:r,destroy:o}},bm=Pl(["compare","extract","mutate","sink"]),wm=Pl(["element","start","stop","destroy"]),ym=Pl(["forceDrop","drop","move","delayDrop"]),Cm=function(e,t){return Ru(t.left()-e.left(),t.top()-e.top())},Sm=function(e){return p.some(Ru(e.x(),e.y()))},xm=function(e,t){e.mutate(t.left(),t.top())},Rm=function(e,t){var n=vm(t),r=mm(n.element(),"mousedown",e.forceDrop),o=mm(n.element(),"mouseup",e.drop),i=mm(n.element(),"mousemove",e.move),u=mm(n.element(),"mouseout",e.delayDrop),c=function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()},a=function(e){dn(e,n.element())},l=function(){bn(n.element())};return wm({element:n.element,start:a,stop:l,destroy:c})},Tm=bm({compare:Cm,extract:Sm,sink:Rm,mutate:xm}),Om=function(t,n){var r=null,o=function(){null!==r&&(e.clearTimeout(r),r=null)},i=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==r&&e.clearTimeout(r),r=e.setTimeout((function(){t.apply(null,o),r=null}),n)};return{cancel:o,throttle:i}};function Am(){var e=p.none(),t=function(){e=p.none()},n=function(t,n){var r=e.map((function(e){return t.compare(e,n)}));return e=p.some(n),r},r=function(e,t){var r=t.extract(e);r.each((function(e){var r=n(t,e);r.each((function(e){o.trigger.move(e)}))}))},o=im.create({move:rm(["info"])});return{onEvent:r,reset:t,events:o.registry}}function Dm(){return{onEvent:n,reset:n}}function Em(){var e=Dm(),t=Am(),n=e,r=function(){n.reset(),n=t},o=function(){n.reset(),n=e},i=function(e,t){n.onEvent(e,t)},u=function(){return n===t};return{on:r,off:o,isOn:u,onEvent:i,events:t.events}}var Bm=function(e,t,n){var r=!1,o=im.create({start:rm([]),stop:rm([])}),i=Em(),u=function(){m.stop(),i.isOn()&&(i.off(),o.trigger.stop())},c=Om(u,200),a=function(e){m.start(e),i.on(),o.trigger.start()},l=function(e){c.cancel(),i.onEvent(e,t)};i.events.move.bind((function(n){t.mutate(e,n.info())}));var f=function(){r=!0},s=function(){r=!1},d=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r&&e.apply(null,t)}},m=t.sink(ym({forceDrop:u,drop:d(u),move:d(l),delayDrop:d(c.throttle)}),n),g=function(){m.destroy()};return{element:m.element,go:a,on:f,off:s,destroy:g,events:o.registry}},Im={setup:Bm},Nm=function(e,t){void 0===t&&(t={});var n=void 0!==t.mode?t.mode:Tm;return Im.setup(e,n,t)},km={transform:Nm},Pm=function(){var e=im.create({drag:rm(["xDelta","yDelta"])}),t=function(t,n){e.trigger.drag(t,n)};return{mutate:t,events:e.registry}},Mm=function(){var e=im.create({drag:rm(["xDelta","yDelta","target"])}),t=p.none(),n=Pm();n.events.drag.bind((function(n){t.each((function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)}))}));var r=function(e){t=p.some(e)},o=function(){return t};return{assign:r,get:o,mutate:n.mutate,events:e.registry}},Wm=function(e){return"true"===be(e,"contenteditable")},_m=function(e,t){return qn(e,"[contenteditable]",t)},Lm=wc.resolve("resizer-bar-dragging"),Hm=function(e,t,n){var r=Mm(),o=km.transform(r,{}),i=p.none(),c=function(e,t){return p.from(be(e,t))};r.events.drag.bind((function(e){c(e.target(),"data-row").each((function(t){var n=tl.getInt(e.target(),"top");je(e.target(),"top",n+e.yDelta()+"px")})),c(e.target(),"data-column").each((function(t){var n=tl.getInt(e.target(),"left");je(e.target(),"left",n+e.xDelta()+"px")}))}));var a=function(e,t){var n=tl.getInt(e,t),r=parseInt(be(e,"data-initial-"+t),10);return n-r};o.events.stop.bind((function(){r.get().each((function(r){i.each((function(o){c(r,"data-row").each((function(e){var t=a(r,"top");ye(r,"data-initial-top"),v.trigger.adjustHeight(o,t,parseInt(e,10))})),c(r,"data-column").each((function(e){var t=a(r,"left");ye(r,"data-initial-left"),v.trigger.adjustWidth(o,t,parseInt(e,10))})),Lc.refresh(e,o,n,t)}))}))}));var l=function(t,n){v.trigger.startAdjust(),r.assign(t),he(t,"data-initial-"+n,parseInt(Fe(t,n),10)),uc(t,Lm),je(t,"opacity","0.2"),o.go(e.parent())},f=mm(e.parent(),"mousedown",(function(e){Lc.isRowBar(e.target())&&l(e.target(),"top"),Lc.isColBar(e.target())&&l(e.target(),"left")})),s=function(t){return Yt(t,e.view())},d=function(e){return qn(e,"table",s).filter((function(e){return _m(e,s).exists(Wm)}))},m=mm(e.view(),"mouseover",(function(r){d(r.target()).fold((function(){Me(r.target())&&Lc.destroy(e)}),(function(r){i=p.some(r),Lc.refresh(e,r,n,t)}))})),g=function(){f.unbind(),m.unbind(),o.destroy(),Lc.destroy(e)},h=function(r){Lc.refresh(e,r,n,t)},v=im.create({adjustHeight:rm(["table","delta","row"]),adjustWidth:rm(["table","delta","column"]),startAdjust:rm([])});return{destroy:g,refresh:h,on:o.on,off:o.off,hideBars:u(Lc.hide,e),showBars:u(Lc.show,e),events:v.registry}},jm=function(e,t){var n=Uu.height,r=Hm(e,t,n),o=im.create({beforeResize:rm(["table"]),afterResize:rm(["table"]),startDrag:rm([])});return r.events.adjustHeight.bind((function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Bl.adjustHeight(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())})),r.events.startAdjust.bind((function(e){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Bl.adjustWidth(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}},zm={create:jm},Fm=function(){var e=Pe.fromTag("div");return ze(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),dn(We(),e),e},Um=function(e,t){return e.inline?nm.body(zf(e),Fm()):nm.only(Pe.fromDom(e.getDoc()))},Vm=function(e,t){e.inline&&bn(t.parent())},qm={get:Um,remove:Vm},Gm=function(e,t){return Ff(e.dom())/Ff(t.dom())*100+"%"},Ym=function(e){var t=Pe.fromDom(e);tn(t).map((function(e){return Gm(t,e)})).each((function(e){je(t,"width",e),I(Wn(t,"tr"),(function(e){I(un(e),(function(t){je(t,"width",Gm(t,e))}))}))}))},Km=function(e){je(Pe.fromDom(e),"width",Ff(e).toString()+"px")},Xm=function(e){var t,n,r=p.none(),o=p.none(),i=p.none(),u=/(\d+(\.\d+)?)%/,c=function(e){return"TABLE"===e.nodeName},a=function(t){var n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return p.from(n).filter((function(e){return e.length>0}))},l=function(){return o},f=function(){return i.getOr(nm.only(Pe.fromDom(e.getBody())))},s=function(){o.each((function(e){e.destroy()})),i.each((function(t){qm.remove(e,t)}))};return e.on("init",(function(){var t=qu(Qf.directionAt),n=qm.get(e);if(i=p.some(n),ws(e)&&os(e)){var u=zm.create(n,t);u.on(),u.events.startDrag.bind((function(t){r=p.some(e.selection.getRng())})),u.events.beforeResize.bind((function(t){var n=t.table().dom();Ss(e,n,Ff(n),Uf(n))})),u.events.afterResize.bind((function(t){var n=t.table(),o=n.dom();Yf(n),r.each((function(t){e.selection.setRng(t),e.focus()})),xs(e,o,Ff(o),Uf(o)),e.undoManager.add()})),o=p.some(u)}})),e.on("ObjectResizeStart",(function(r){var o=r.target;if(c(o)){var i=a(o).map((function(e){return u.test(e)})).getOr(!1);i&&hs(e)?Km(o):!i&&ps(e)&&Ym(o),t=r.width,n=a(o).getOr("")}})),e.on("ObjectResized",(function(r){var o=r.target;if(c(o)){var i=o;if(u.test(n)){var a=parseFloat(u.exec(n)[1]),l=r.width*a/t;e.dom.setStyle(i,"width",l+"%")}else{var f=[];Ws.each(i.rows,(function(t){Ws.each(t.cells,(function(t){var n=e.dom.getStyle(t,"width",!0);f.push({cell:t,width:n})}))})),Ws.each(f,(function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)}))}}})),e.on("SwitchMode",(function(){l().each((function(t){e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),{lazyResize:l,lazyWire:f,destroy:s}},$m=bi.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Jm=function(e){return void 0===e&&(e=void 0),$m.none(e)},Qm=Je(Je({},$m),{none:Jm}),Zm=function(e,t){return ar.table(e,t).bind((function(t){var n=ar.cells(t),r=_(n,(function(t){return Yt(e,t)}));return r.map((function(e){return{index:o(e),all:o(n)}}))}))},eg=function(e,t){var n=Zm(e,t);return n.fold((function(){return Qm.none(e)}),(function(t){return t.index()+1<t.all().length?Qm.middle(e,t.all()[t.index()+1]):Qm.last(e)}))},tg=function(e,t){var n=Zm(e,t);return n.fold((function(){return Qm.none()}),(function(t){return t.index()-1>=0?Qm.middle(e,t.all()[t.index()-1]):Qm.first(e)}))},ng={next:eg,prev:tg},rg=J("start","soffset","finish","foffset"),og={create:rg},ig=bi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ug=function(e,t,n,r){return e.fold(t,n,r)},cg=function(e){return e.fold(i,i,i)},ag=ig.before,lg=ig.on,fg=ig.after,sg={before:ag,on:lg,after:fg,cata:ug,getStart:cg},dg=bi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),mg=function(e){return dg.exact(e.start(),e.soffset(),e.finish(),e.foffset())},gg=function(e){return e.match({domRange:function(e){return Pe.fromDom(e.startContainer)},relative:function(e,t){return sg.getStart(e)},exact:function(e,t,n,r){return e}})},pg=dg.domRange,hg=dg.relative,vg=dg.exact,bg=function(e){var t=gg(e);return en(t)},wg=og.create,yg={domRange:pg,relative:hg,exact:vg,exactFromRange:mg,getWin:bg,range:wg},Cg=function(e,t){var n=e.document.createRange();return Sg(n,t),n},Sg=function(e,t){e.selectNodeContents(t.dom())},xg=function(e,t){t.fold((function(t){e.setStartBefore(t.dom())}),(function(t,n){e.setStart(t.dom(),n)}),(function(t){e.setStartAfter(t.dom())}))},Rg=function(e,t){t.fold((function(t){e.setEndBefore(t.dom())}),(function(t,n){e.setEnd(t.dom(),n)}),(function(t){e.setEndAfter(t.dom())}))},Tg=function(e,t,n){var r=e.document.createRange();return xg(r,t),Rg(r,n),r},Og=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},Ag=function(e){return{left:o(e.left),top:o(e.top),right:o(e.right),bottom:o(e.bottom),width:o(e.width),height:o(e.height)}},Dg=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?p.some(n).map(Ag):p.none()},Eg=bi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Bg=function(e,t,n){return t(Pe.fromDom(n.startContainer),n.startOffset,Pe.fromDom(n.endContainer),n.endOffset)},Ig=function(e,t){return t.match({domRange:function(e){return{ltr:o(e),rtl:p.none}},relative:function(t,n){return{ltr:De((function(){return Tg(e,t,n)})),rtl:De((function(){return p.some(Tg(e,n,t))}))}},exact:function(t,n,r,o){return{ltr:De((function(){return Og(e,t,n,r,o)})),rtl:De((function(){return p.some(Og(e,r,o,t,n))}))}}})},Ng=function(e,t){var n=t.ltr();if(n.collapsed){var r=t.rtl().filter((function(e){return!1===e.collapsed}));return r.map((function(e){return Eg.rtl(Pe.fromDom(e.endContainer),e.endOffset,Pe.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return Bg(e,Eg.ltr,n)}))}return Bg(e,Eg.ltr,n)},kg=function(e,t){var n=Ig(e,t);return Ng(e,n)},Pg=function(e,t){var n=kg(e,t);return n.match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})},Mg=(Eg.ltr,Eg.rtl,function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,u=1;u<o;u++){var c=e(u),a=Math.abs(t-c.left);if(n<=c.bottom){if(n<c.top||a>i)return u-1;i=a}}return 0}),Wg=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},_g=function(e,t,n,r,o){var i=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},u=function(e){var t=i(e);return t.getBoundingClientRect()},c=Er(t).length,a=Mg(u,n,r,o.right,c);return i(a)},Lg=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getClientRects(),u=U(i,(function(e){return Wg(e,n,r)?p.some(e):p.none()}));return u.map((function(o){return _g(e,t,n,r,o)}))},Hg=function(e,t,n,r){var o=e.dom().createRange(),i=un(t);return U(i,(function(t){return o.selectNode(t.dom()),Wg(o.getBoundingClientRect(),n,r)?jg(e,t,n,r):p.none()}))},jg=function(e,t,n,r){return ge(t)?Lg(e,t,n,r):Hg(e,t,n,r)},zg=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return jg(e,t,u,c)},Fg=!0,Ug=!1,Vg=function(e,t){return t-e.left<e.right-t?Fg:Ug},qg=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},Gg=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var o=r.getBoundingClientRect(),i=Vg(o,n),u=i===Fg?Wr:_r;return u(t).map((function(t){return qg(e,t,i)}))},Yg=function(e,t,n){var r=t.dom().getBoundingClientRect(),o=Vg(r,n);return p.some(qg(e,t,o))},Kg=function(e,t,n){var r=0===un(t).length?Yg:Gg;return r(e,t,n)},Xg=function(e,t,n){return p.from(e.dom().caretPositionFromPoint(t,n)).bind((function(t){if(null===t.offsetNode)return p.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),p.some(n)}))},$g=function(e,t,n){return p.from(e.dom().caretRangeFromPoint(t,n))},Jg=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return zg(e,t,u,c)},Qg=function(e,t,n){return Pe.fromPoint(e,t,n).bind((function(r){var o=function(){return Kg(e,r,t)};return 0===un(r).length?o():Jg(e,r,t,n).orThunk(o)}))},Zg=document.caretPositionFromPoint?Xg:document.caretRangeFromPoint?$g:Qg,ep=function(e,t,n){var r=Pe.fromDom(e.document);return Zg(r,t,n).map((function(e){return og.create(Pe.fromDom(e.startContainer),e.startOffset,Pe.fromDom(e.endContainer),e.endOffset)}))},tp=function(e,t){var n=le(e);return"input"===n?sg.after(e):D(["br","img"],n)?0===t?sg.before(e):sg.after(e):sg.on(e,t)},np=function(e,t){var n=e.fold(sg.before,tp,sg.after),r=t.fold(sg.before,tp,sg.after);return yg.relative(n,r)},rp=function(e,t,n,r){var o=tp(e,t),i=tp(n,r);return yg.relative(o,i)},op=function(e){return e.match({domRange:function(e){var t=Pe.fromDom(e.startContainer),n=Pe.fromDom(e.endContainer);return rp(t,e.startOffset,n,e.endOffset)},relative:np,exact:rp})},ip=function(e,t,n,r){var o=Zt(e),i=o.dom().createRange();return i.setStart(e.dom(),t),i.setEnd(n.dom(),r),i},up=function(e,t,n,r){var o=ip(e,t,n,r),i=Yt(e,n)&&t===r;return o.collapsed&&!i},cp=function(e,t){p.from(e.getSelection()).each((function(e){e.removeAllRanges(),e.addRange(t)}))},ap=function(e,t,n,r,o){var i=Og(e,t,n,r,o);cp(e,i)},lp=function(e,t,n,r,o,i){t.collapse(n.dom(),r),t.extend(o.dom(),i)},fp=function(e,t){return kg(e,t).match({ltr:function(t,n,r,o){ap(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(i.extend)try{lp(e,i,t,n,r,o)}catch(u){ap(e,r,o,t,n)}else ap(e,r,o,t,n)}})},sp=function(e,t,n,r,o){var i=rp(t,n,r,o);fp(e,i)},dp=function(e,t,n){var r=np(t,n);fp(e,r)},mp=function(e){var t=yg.getWin(e).dom(),n=function(e,n,r,o){return Og(t,e,n,r,o)},r=op(e);return kg(t,r).match({ltr:n,rtl:n})},gp=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return p.some(og.create(Pe.fromDom(t.startContainer),t.startOffset,Pe.fromDom(n.endContainer),n.endOffset))}return p.none()},pp=function(e){var t=Pe.fromDom(e.anchorNode),n=Pe.fromDom(e.focusNode);return up(t,e.anchorOffset,n,e.focusOffset)?p.some(og.create(t,e.anchorOffset,n,e.focusOffset)):gp(e)},hp=function(e,t){var n=Cg(e,t);cp(e,n)},vp=function(e){return p.from(e.getSelection()).filter((function(e){return e.rangeCount>0})).bind(pp)},bp=function(e){return vp(e).map((function(e){return yg.exact(e.start(),e.soffset(),e.finish(),e.foffset())}))},wp=function(e,t){var n=Pg(e,t);return Dg(n)},yp=function(e,t,n){return ep(e,t,n)},Cp=function(e){var t=e.getSelection();t.removeAllRanges()},Sp=tinymce.util.Tools.resolve("tinymce.util.VK"),xp=function(e,t,n,r){return Ap(e,t,ng.next(n),r)},Rp=function(e,t,n,r){return Ap(e,t,ng.prev(n),r)},Tp=function(e,t){var n=yg.exact(t,0,t,0);return mp(n)},Op=function(e,t){var n=Wn(t,"tr");return F(n).bind((function(t){return Vn(t,"td,th").map((function(t){return Tp(e,t)}))}))},Ap=function(e,t,n,r,o){return n.fold(p.none,p.none,(function(t,n){return Wr(n).map((function(t){return Tp(e,t)}))}),(function(n){return ar.table(n,t).bind((function(t){var o=Ii.noMenu(n);return e.undoManager.transact((function(){r.insertRowsAfter(t,o)})),Op(e,t)}))}))},Dp=["table","li","dl"],Ep=function(e,t,n,r){if(e.keyCode===Sp.TAB){var o=zf(t),i=function(e){var t=le(e);return Yt(e,o)||D(Dp,t)},u=t.selection.getRng();if(u.collapsed){var c=Pe.fromDom(u.startContainer);ar.cell(c,i).each((function(o){e.preventDefault();var u=e.shiftKey?Rp:xp,c=u(t,i,o,n,r);c.each((function(e){t.selection.setRng(e)}))}))}}},Bp={handle:Ep},Ip=J("selection","kill"),Np={create:Ip},kp=function(e,t,n,r){return{start:o(sg.on(e,t)),finish:o(sg.on(n,r))}},Pp={create:kp},Mp=function(e,t){var n=Pg(e,t);return og.create(Pe.fromDom(n.startContainer),n.startOffset,Pe.fromDom(n.endContainer),n.endOffset)},Wp=Pp.create,_p={convertToRange:Mp,makeSitus:Wp},Lp=function(e,t,n,r,o,i,u){return Yt(n,o)&&r===i?p.none():qn(n,"td,th",t).bind((function(n){return qn(o,"td,th",t).bind((function(r){return Hp(e,t,n,r,u)}))}))},Hp=function(e,t,n,r,o){return Yt(n,r)?p.none():ii.identify(n,r,t).bind((function(t){var r=t.boxes().getOr([]);return r.length>0?(o(e,r,t.start(),t.finish()),p.some(Np.create(p.some(_p.makeSitus(n,0,n,Nr(n))),!0))):p.none()}))},jp=function(e,t,n,r,o){var i=function(e){return o.clearBeforeUpdate(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()};return ii.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(i)},zp={sync:Lp,detect:Hp,update:jp},Fp=J("item","mode"),Up=function(e,t,n,r){return void 0===r&&(r=Vp),e.property().parent(t).map((function(e){return Fp(e,r)}))},Vp=function(e,t,n,r){return void 0===r&&(r=qp),n.sibling(e,t).map((function(e){return Fp(e,r)}))},qp=function(e,t,n,r){void 0===r&&(r=qp);var o=e.property().children(t),i=n.first(o);return i.map((function(e){return Fp(e,r)}))},Gp=[{current:Up,next:Vp,fallback:p.none()},{current:Vp,next:qp,fallback:p.some(Up)},{current:qp,next:qp,fallback:p.some(Vp)}],Yp=function(e,t,n,r,o){void 0===o&&(o=Gp);var i=W(o,(function(e){return e.current===n}));return i.bind((function(n){return n.current(e,t,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return Yp(e,t,n,r)}))}))}))},Kp=function(){var e=function(e,t){return e.query().prevSibling(t)},t=function(e){return e.length>0?p.some(e[e.length-1]):p.none()};return{sibling:e,first:t}},Xp=function(){var e=function(e,t){return e.query().nextSibling(t)},t=function(e){return e.length>0?p.some(e[0]):p.none()};return{sibling:e,first:t}},$p={left:Kp,right:Xp},Jp=function(e,t,n,r,o,i){var u=Yp(e,t,r,o);return u.bind((function(t){return i(t.item())?p.none():n(t.item())?p.some(t.item()):Jp(e,t.item(),n,t.mode(),o,i)}))},Qp=function(e,t,n,r){return Jp(e,t,n,Vp,$p.left(),r)},Zp=function(e,t,n,r){return Jp(e,t,n,Vp,$p.right(),r)},eh=function(e){return function(t){return 0===e.property().children(t).length}},th=function(e,t,n){return rh(e,t,eh(e),n)},nh=function(e,t,n){return oh(e,t,eh(e),n)},rh=Qp,oh=Zp,ih=wo(),uh=function(e,t){return th(ih,e,t)},ch=function(e,t){return nh(ih,e,t)},ah=function(e,t,n){return rh(ih,e,t,n)},lh=function(e,t,n){return oh(ih,e,t,n)},fh=function(e,t,n){return Ln(e,t,n).isSome()},sh=bi.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),dh=function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right},mh=function(e){return qn(e,"tr")},gh=function(e,t,n,r,o,i,u){return qn(r,"td,th",u).bind((function(n){return qn(t,"td,th",u).map((function(t){return Yt(n,t)?Yt(r,n)&&Nr(n)===o?i(t):sh.none("in same cell"):Xo.sharedOne(mh,[n,t]).fold((function(){return dh(e,t,n)?sh.success():i(t)}),(function(e){return i(t)}))}))})).getOr(sh.none("default"))},ph=function(e,t,n,r,o){return e.fold(t,n,r,o)},hh=Je(Je({},sh),{verify:gh,cata:ph}),vh=(J("ancestor","descendants","element","index"),J("parent","children","element","index")),bh=function(e){return tn(e).bind((function(t){var n=un(t);return wh(n,e).map((function(r){return vh(t,n,e,r)}))}))},wh=function(e,t){return _(e,u(Yt,t))},yh=function(e){return"br"===le(e)},Ch=function(e,t,n){return t(e,n).bind((function(e){return ge(e)&&0===Er(e).trim().length?Ch(e,t,n):p.some(e)}))},Sh=function(e,t,n){return n.traverse(t).orThunk((function(){return Ch(t,n.gather,e)})).map(n.relative)},xh=function(e,t){return cn(e,t).filter(yh).orThunk((function(){return cn(e,t-1).filter(yh)}))},Rh=function(e,t,n,r){return xh(t,n).bind((function(t){return r.traverse(t).fold((function(){return Ch(t,r.gather,e).map(r.relative)}),(function(e){return bh(e).map((function(e){return sg.on(e.parent(),e.index())}))}))}))},Th=function(e,t,n,r){var i=yh(t)?Sh(e,t,r):Rh(e,t,n,r);return i.map((function(e){return{start:o(e),finish:o(e)}}))},Oh=function(e){return hh.cata(e,(function(e){return p.none()}),(function(){return p.none()}),(function(e){return p.some(Os(e,0))}),(function(e){return p.some(Os(e,Nr(e)))}))},Ah={tryBr:Th,process:Oh},Dh=oe(["left","top","right","bottom"],[]),Eh=function(e,t){return Dh({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},Bh=function(e,t){return Dh({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},Ih=function(e,t){var n=e.bottom()-e.top();return Dh({left:e.left(),top:t-n,right:e.right(),bottom:t})},Nh=function(e,t){var n=e.bottom()-e.top();return Dh({left:e.left(),top:t,right:e.right(),bottom:t+n})},kh=function(e,t,n){return Dh({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},Ph=function(e){return e.top()},Mh=function(e){return e.bottom()},Wh=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"},_h={nu:Dh,moveUp:Bh,moveDown:Eh,moveBottomTo:Ih,moveTopTo:Nh,getTop:Ph,getBottom:Mh,translate:kh,toString:Wh},Lh=function(e,t,n){return n>=0&&n<Nr(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):p.none()},Hh=function(e){return _h.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},jh=function(e,t){return p.some(e.getRect(t))},zh=function(e,t,n){return me(t)?jh(e,t).map(Hh):ge(t)?Lh(e,t,n).map(Hh):p.none()},Fh=function(e,t){return me(t)?jh(e,t).map(Hh):ge(t)?e.getRangedRect(t,0,t,Nr(t)).map(Hh):p.none()},Uh={getBoxAt:zh,getEntireBox:Fh},Vh=5,qh=100,Gh=bi.generate([{none:[]},{retry:["caret"]}]),Yh=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},Kh=function(e,t,n){return Hn(t,cf.isBlock).fold(o(!1),(function(t){return Uh.getEntireBox(e,t).exists((function(e){return Yh(n,e)}))}))},Xh=function(e,t,n,r,o){var i=_h.moveDown(o,Vh);return Math.abs(n.bottom()-r.bottom())<1?Gh.retry(i):n.top()>o.bottom()?Gh.retry(i):n.top()===o.bottom()?Gh.retry(_h.moveDown(o,1)):Kh(e,t,o)?Gh.retry(_h.translate(i,Vh,0)):Gh.none()},$h=function(e,t,n,r,o){var i=_h.moveUp(o,Vh);return Math.abs(n.top()-r.top())<1?Gh.retry(i):n.bottom()<o.top()?Gh.retry(i):n.bottom()===o.top()?Gh.retry(_h.moveUp(o,1)):Kh(e,t,o)?Gh.retry(_h.translate(i,Vh,0)):Gh.none()},Jh={point:_h.getTop,adjuster:$h,move:_h.moveUp,gather:uh},Qh={point:_h.getBottom,adjuster:Xh,move:_h.moveDown,gather:ch},Zh=function(e,t,n){return e.elementFromPoint(t,n).filter((function(e){return"table"===le(e)})).isSome()},ev=function(e,t,n,r,o){return tv(e,t,n,t.move(r,Vh),o)},tv=function(e,t,n,r,o){return 0===o?p.some(r):Zh(e,r.left(),t.point(r))?ev(e,t,n,r,o-1):e.situsFromPoint(r.left(),t.point(r)).bind((function(i){return i.start().fold(p.none,(function(i){return Uh.getEntireBox(e,i).bind((function(u){return t.adjuster(e,i,u,n,r).fold(p.none,(function(r){return tv(e,t,n,r,o-1)}))})).orThunk((function(){return p.some(r)}))}),p.none)}))},nv=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+Vh)},rv=function(e,t){return e.situsFromPoint(t.left(),t.top()-Vh)},ov=function(e,t,n){return e.point(t)>n.getInnerHeight()?p.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?p.some(-e.point(t)):p.none()},iv=function(e,t,n){var r=e.move(n,Vh),o=tv(t,e,n,r,qh).getOr(r);return ov(e,o,t).fold((function(){return t.situsFromPoint(o.left(),e.point(o))}),(function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)}))},uv={tryUp:u(iv,Jh),tryDown:u(iv,Qh),ieTryUp:rv,ieTryDown:nv,getJumpSize:o(Vh)},cv=20,av=jt(),lv=function(e,t,n){return e.getSelection().bind((function(r){return Ah.tryBr(t,r.finish(),r.foffset(),n).fold((function(){return p.some(Os(r.finish(),r.foffset()))}),(function(o){var i=e.fromSitus(o),u=hh.verify(e,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,t);return Ah.process(u)}))}))},fv=function(e,t,n,r,o,i){return 0===i?p.none():mv(e,t,n,r,o).bind((function(u){var c=e.fromSitus(u),a=hh.verify(e,n,r,c.finish(),c.foffset(),o.failure,t);return hh.cata(a,(function(){return p.none()}),(function(){return p.some(u)}),(function(u){return Yt(n,u)&&0===r?sv(e,n,r,_h.moveUp,o):fv(e,t,u,0,o,i-1)}),(function(u){return Yt(n,u)&&r===Nr(u)?sv(e,n,r,_h.moveDown,o):fv(e,t,u,Nr(u),o,i-1)}))}))},sv=function(e,t,n,r,o){return Uh.getBoxAt(e,t,n).bind((function(t){return dv(e,o,r(t,uv.getJumpSize()))}))},dv=function(e,t,n){return av.browser.isChrome()||av.browser.isSafari()||av.browser.isFirefox()||av.browser.isEdge()?t.otherRetry(e,n):av.browser.isIE()?t.ieRetry(e,n):p.none()},mv=function(e,t,n,r,o){return Uh.getBoxAt(e,n,r).bind((function(t){return dv(e,o,t)}))},gv=function(e,t,n){return lv(e,t,n).bind((function(r){return fv(e,t,r.element(),r.offset(),n,cv).map(e.fromSitus)}))},pv={handle:gv},hv=jt(),vv=function(e,t){return fh(e,(function(e){return tn(e).exists((function(e){return Yt(e,t)}))}))},bv=function(e,t,n,r,i){return qn(r,"td,th",t).bind((function(r){return qn(r,"table",t).bind((function(u){return vv(i,u)?pv.handle(e,t,n).bind((function(e){return qn(e.finish(),"td,th",t).map((function(t){return{start:o(r),finish:o(t),range:o(e)}}))})):p.none()}))}))},wv=function(e,t,n,r,o,i){return hv.browser.isIE()?p.none():i(r,t).orThunk((function(){return bv(e,t,n,r,o).map((function(e){var t=e.range();return Np.create(p.some(_p.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)}))}))},yv=function(e,t){return qn(e,"tr",t).bind((function(e){return qn(e,"table",t).bind((function(n){var r=Wn(n,"tr");return Yt(e,r[0])?ah(n,(function(e){return _r(e).isSome()}),t).map((function(e){var t=Nr(e);return Np.create(p.some(_p.makeSitus(e,t,e,t)),!0)})):p.none()}))}))},Cv=function(e,t){return qn(e,"tr",t).bind((function(e){return qn(e,"table",t).bind((function(n){var r=Wn(n,"tr");return Yt(e,r[r.length-1])?lh(n,(function(e){return Wr(e).isSome()}),t).map((function(e){return Np.create(p.some(_p.makeSitus(e,0,e,0)),!0)})):p.none()}))}))},Sv=function(e,t,n,r,o,i,u){return bv(e,n,r,o,i).bind((function(e){return zp.detect(t,n,e.start(),e.finish(),u)}))},xv={navigate:wv,select:Sv,firstUpCheck:yv,lastDownCheck:Cv},Rv=function(e,t){return qn(e,"td,th",t)};function Tv(e,t,n,r){var o=p.none(),i=function(){o=p.none()},u=function(e){r.clear(t),o=Rv(e.target(),n)},c=function(i){o.each((function(o){r.clearBeforeUpdate(t),Rv(i.target(),n).each((function(i){ii.identify(o,i,n).each((function(n){var u=n.boxes().getOr([]);(u.length>1||1===u.length&&!Yt(o,i))&&(r.selectRange(t,u,n.start(),n.finish()),e.selectContents(i))}))}))}))},a=function(e){o.each(i)};return{mousedown:u,mouseover:c,mouseup:a}}var Ov={traverse:on,gather:ch,relative:sg.before,otherRetry:uv.tryDown,ieRetry:uv.ieTryDown,failure:hh.failedDown},Av={traverse:rn,gather:uh,relative:sg.before,otherRetry:uv.tryUp,ieRetry:uv.ieTryUp,failure:hh.failedUp},Dv={down:Ov,up:Av},Ev=function(e){return function(t){return t===e}},Bv=Ev(38),Iv=Ev(40),Nv=function(e){return e>=37&&e<=40},kv={ltr:{isBackward:Ev(37),isForward:Ev(39)},rtl:{isBackward:Ev(39),isForward:Ev(37)},isUp:Bv,isDown:Iv,isNavigation:Nv},Pv=function(e){return{left:e.left(),top:e.top(),right:e.right(),bottom:e.bottom(),width:e.width(),height:e.height()}},Mv={toRaw:Pv},Wv=(jt().browser.isSafari(),function(t){var n=void 0!==t?t.dom():e.document,r=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return Ru(r,o)}),_v=function(t,n,r){var o=void 0!==r?r.dom():e.document,i=o.defaultView;i.scrollBy(t,n)},Lv=function(e){var t=function(t,n){return Pe.fromPoint(Pe.fromDom(e.document),t,n)},n=function(e){return e.dom().getBoundingClientRect()},r=function(t,n,r,o){var i=yg.exact(t,n,r,o);return wp(e,i).map(Mv.toRaw)},o=function(){return bp(e).map((function(t){return _p.convertToRange(e,t)}))},i=function(t){var n=yg.relative(t.start(),t.finish());return _p.convertToRange(e,n)},u=function(t,n){return yp(e,t,n).map((function(e){return Pp.create(e.start(),e.soffset(),e.finish(),e.foffset())}))},c=function(){Cp(e)},a=function(t){void 0===t&&(t=!1),bp(e).each((function(n){return n.fold((function(e){return e.collapse(t)}),(function(n,r){var o=t?n:r;dp(e,o,o)}),(function(n,r,o,i){var u=t?n:o,c=t?r:i;sp(e,u,c,u,c)}))}))},l=function(t){hp(e,t)},f=function(t){sp(e,t.start(),t.soffset(),t.finish(),t.foffset())},s=function(t,n){dp(e,t,n)},d=function(){return e.innerHeight},m=function(){var t=Wv(Pe.fromDom(e.document));return t.top()},g=function(t,n){_v(t,n,Pe.fromDom(e.document))};return{elementFromPoint:t,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:u,clearSelection:c,collapseSelection:a,setSelection:f,setRelativeSelection:s,selectContents:l,getInnerHeight:d,getScrollY:m,scrollBy:g}},Hv=J("rows","cols"),jv=function(e,t,n,r){var o=Lv(e),i=Tv(o,t,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},zv=function(e,t,n,r){var o=Lv(e),i=function(){return r.clear(t),p.none()},c=function(e,c,a,l,f,s){var d=e.raw(),m=d.which,g=!0===d.shiftKey,h=ii.retrieve(t,r.selectedSelector()).fold((function(){return kv.isDown(m)&&g?u(xv.select,o,t,n,Dv.down,l,c,r.selectRange):kv.isUp(m)&&g?u(xv.select,o,t,n,Dv.up,l,c,r.selectRange):kv.isDown(m)?u(xv.navigate,o,n,Dv.down,l,c,xv.lastDownCheck):kv.isUp(m)?u(xv.navigate,o,n,Dv.up,l,c,xv.firstUpCheck):p.none}),(function(e){var n=function(n){return function(){var i=U(n,(function(n){return zp.update(n.rows(),n.cols(),t,e,r)}));return i.fold((function(){return ii.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(e){var n=kv.isDown(m)||s.isForward(m)?sg.after:sg.before;return o.setRelativeSelection(sg.on(e.first(),0),n(e.table())),r.clear(t),Np.create(p.none(),!0)}))}),(function(e){return p.some(Np.create(p.none(),!0))}))}};return kv.isDown(m)&&g?n([Hv(1,0)]):kv.isUp(m)&&g?n([Hv(-1,0)]):s.isBackward(m)&&g?n([Hv(0,-1),Hv(-1,0)]):s.isForward(m)&&g?n([Hv(0,1),Hv(1,0)]):kv.isNavigation(m)&&!1===g?i:p.none}));return h()},a=function(e,o,i,u,c){return ii.retrieve(t,r.selectedSelector()).fold((function(){var a=e.raw(),l=a.which,f=!0===a.shiftKey;return!1===f?p.none():kv.isNavigation(l)?zp.sync(t,n,o,i,u,c,r.selectRange):p.none()}),p.none)};return{keydown:c,keyup:a}},Fv=function(e,t,n,r){var o=Lv(e);return function(e,i){r.clearBeforeUpdate(t),ii.identify(e,i,n).each((function(e){var n=e.boxes().getOr([]);r.selectRange(t,n,e.start(),e.finish()),o.selectContents(i),o.collapseSelection()}))}},Uv={mouse:jv,keyboard:zv,external:Fv},Vv=function(e,t){I(t,(function(t){ac(e,t)}))},qv=function(e){return function(t){uc(t,e)}},Gv=function(e){return function(t){Vv(t,e)}},Yv=function(e){var t=qv(e.selected()),n=Gv([e.selected(),e.lastSelected(),e.firstSelected()]),r=function(t){var r=Wn(t,e.selectedSelector());I(r,n)},o=function(n,o,i,u){r(n),I(o,t),uc(i,e.firstSelected()),uc(u,e.lastSelected())};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Kv=function(e,t,n){var r=function(t){ye(t,e.selected()),ye(t,e.firstSelected()),ye(t,e.lastSelected())},o=function(t){he(t,e.selected(),"1")},i=function(e){u(e),n()},u=function(t){var n=Wn(t,e.selectedSelector());I(n,r)},c=function(n,r,u,c){i(n),I(r,o),he(u,e.firstSelected(),"1"),he(c,e.lastSelected(),"1"),t(r,u,c)};return{clearBeforeUpdate:u,clear:i,selectRange:c,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Xv={byClass:Yv,byAttr:Kv},$v=function(e,t,n){var r=e.slice(0,t[t.length-1].row()+1),o=ra(r,n);return H(o,(function(e){var n=e.cells().slice(0,t[t.length-1].column()+1);return B(n,(function(e){return e.element()}))}))},Jv=function(e,t,n){var r=e.slice(t[0].row()+t[0].rowspan()-1,e.length),o=ra(r,n);return H(o,(function(e){var n=e.cells().slice(t[0].column()+t[0].colspan()-1,+e.cells().length);return B(n,(function(e){return e.element()}))}))},Qv=function(e,t,n){var r=sr.fromTable(e),o=br.generate(r),i=sa(o,t);return i.map((function(e){var t=ea.toGrid(o,n,!1),r=$v(t,e,n),i=Jv(t,e,n);return{upOrLeftCells:r,downOrRightCells:i}}))},Zv={getOtherCells:Qv},eb=function(e){return!1===lc(Pe.fromDom(e.target),"ephox-snooker-resizer-bar")};function tb(e,r,o){var i=oe(["mousedown","mouseover","mouseup","keyup","keydown"],[]),u=p.none(),c=bs(e),a=function(t,r,i){o.targets().each((function(o){var u=ar.table(r);u.each((function(u){var a=Pe.fromDom(e.getDoc()),l=Jr.cellOperations(n,a,c),f=Zv.getOtherCells(u,o,l);Rs(e,t,r,i,f)}))}))},l=function(){Ts(e)},f=Xv.byAttr(hi,a,l);e.on("init",(function(o){var c=e.getWin(),a=zf(e),l=Vf(e),s=function(){var t=e.selection,r=Pe.fromDom(t.getStart()),o=Pe.fromDom(t.getEnd()),i=Xo.sharedOne(ar.table,[r,o]);i.fold((function(){f.clear(a)}),n)},d=Uv.mouse(c,a,l,f),m=Uv.keyboard(c,a,l,f),g=Uv.external(c,a,l,f),h=function(e){return!0===e.raw().shiftKey};e.on("TableSelectorChange",(function(e){g(e.start,e.finish)}));var v=function(t,n){h(t)&&(n.kill()&&t.kill(),n.selection().each((function(t){var n=yg.relative(t.start(),t.finish()),r=Pg(c,n);e.selection.setRng(r)})))},b=function(t){var n=gm(t);if(n.raw().shiftKey&&kv.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=Pe.fromDom(r.startContainer),i=Pe.fromDom(r.endContainer);m.keyup(n,o,r.startOffset,i,r.endOffset).each((function(e){v(n,e)}))}},w=function(t){var n=gm(t);r().each((function(e){e.hideBars()}));var o=e.selection.getRng(),i=Pe.fromDom(e.selection.getStart()),u=Pe.fromDom(o.startContainer),c=Pe.fromDom(o.endContainer),a=Qf.directionAt(i).isRtl()?kv.rtl:kv.ltr;m.keydown(n,u,o.startOffset,c,o.endOffset,a).each((function(e){v(n,e)})),r().each((function(e){e.showBars()}))},y=function(e){return 0===e.button},C=function(e){return void 0===e.buttons||(!(!Rd.browser.isEdge()||0!==e.buttons)||0!==(1&e.buttons))},S=function(e){y(e)&&eb(e)&&d.mousedown(gm(e))},x=function(e){C(e)&&eb(e)&&d.mouseover(gm(e))},R=function(e){y(e)&&eb(e)&&d.mouseup(gm(e))},T=function(){var e=t(Pe.fromDom(a)),n=t(0),r=function(t){var r=Pe.fromDom(t.target);if("td"===le(r)||"th"===le(r)){var o=e.get(),i=n.get();Yt(o,r)&&t.timeStamp-i<300&&(t.preventDefault(),g(r,r))}e.set(r),n.set(t.timeStamp)};return{touchEnd:r}},O=T();e.on("mousedown",S),e.on("mouseover",x),e.on("mouseup",R),e.on("touchend",O.touchEnd),e.on("keyup",b),e.on("keydown",w),e.on("NodeChange",s),u=p.some(i({mousedown:S,mouseover:x,mouseup:R,keyup:b,keydown:w}))}));var s=function(){u.each((function(e){}))};return{clear:f.clear,destroy:s}}var nb=function(e){var t=function(){var t=zf(e);return ai.retrieve(t,hi.selectedSelector()).fold((function(){return void 0===e.selection.getStart()?Ci.none():Ci.single(e.selection)}),(function(e){return Ci.multiple(e)}))};return{get:t}},rb=function(e,n){var r=t(p.none()),o=t([]),i=function(){return Xd(e).bind((function(e){var t=ar.table(e);return t.map((function(t){return"caption"===le(e)?Ii.notCell(e):Ii.forMenu(n,t,e)}))}))},u=function(){r.set(De(i)()),I(o.get(),(function(e){return e()}))},c=function(e,t){var n=function(){return r.get().fold((function(){e.setDisabled(!0)}),(function(n){e.setDisabled(t(n))}))};return n(),o.set(o.get().concat([n])),function(){o.set(k(o.get(),(function(e){return e!==n})))}},a=function(e){return c(e,(function(e){return!1}))},l=function(e){return c(e,(function(e){return"caption"===le(e.element())}))},f=function(e){return c(e,(function(e){return e.mergable().isNone()}))},s=function(e){return c(e,(function(e){return e.unmergable().isNone()}))};return e.on("NodeChange TableSelectorChange",u),{onSetupTable:a,onSetupCellOrRow:l,onSetupMergeable:f,onSetupUnmergeable:s,resetTargets:u,targets:function(){return r.get()}}},ob=function(e,t){e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}});var n=function(t){return function(){return e.execCommand(t)}};e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:n("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:n("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:n("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:n("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:n("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:n("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:n("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:n("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:n("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:n("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:n("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:n("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",onAction:n("mceTableCutRow"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",onAction:n("mceTableCopyRow"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",onAction:n("mceTablePasteRowBefore"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",onAction:n("mceTablePasteRowAfter"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:n("mceInsertTable"),icon:"table"})},ib=function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=vs(e);n.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:n,scope:"node",position:"node"})},ub={addButtons:ob,addToolbars:ib},cb=function(e,t){var n=function(t){return function(){return e.execCommand(t)}},r=function(t){var n=t.numRows,r=t.numColumns;e.undoManager.transact((function(){Hd.insert(e,r,n)})),e.addVisual()},o={text:"Table properties",onSetup:t.onSetupTable,onAction:n("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:n("mceTableDelete")},u=[{type:"menuitem",text:"Insert row before",icon:"table-insert-row-above",onAction:n("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Insert row after",icon:"table-insert-row-after",onAction:n("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Delete row",icon:"table-delete-row",onAction:n("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Row properties",icon:"table-row-properties",onAction:n("mceTableRowProps"),onSetup:t.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Cut row",onAction:n("mceTableCutRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Copy row",onAction:n("mceTableCopyRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Paste row before",onAction:n("mceTablePasteRowBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Paste row after",onAction:n("mceTablePasteRowAfter"),onSetup:t.onSetupCellOrRow}],c={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return u}},a=[{type:"menuitem",text:"Insert column before",icon:"table-insert-column-before",onAction:n("mceTableInsertColBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Insert column after",icon:"table-insert-column-after",onAction:n("mceTableInsertColAfter"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Delete column",icon:"table-delete-column",onAction:n("mceTableDeleteCol"),onSetup:t.onSetupCellOrRow}],l={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return a}},f=[{type:"menuitem",text:"Cell properties",icon:"table-cell-properties",onAction:n("mceTableCellProps"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Merge cells",icon:"table-merge-cells",onAction:n("mceTableMergeCells"),onSetup:t.onSetupMergeable},{type:"menuitem",text:"Split cell",icon:"table-split-cells",onAction:n("mceTableSplitCells"),onSetup:t.onSetupUnmergeable}],s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return f}};!1===fs(e)?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",o),e.ui.registry.addMenuItem("deletetable",i),e.ui.registry.addNestedMenuItem("row",c),e.ui.registry.addNestedMenuItem("column",l),e.ui.registry.addNestedMenuItem("cell",s),e.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold((function(){return""}),(function(e){return"caption"===le(e.element())?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})},ab={addMenuItems:cb},lb=function(e){return e.get().fold((function(){}),(function(e){return B(e,(function(e){return e.dom()}))}))},fb=function(e,t){var n=B(e,Pe.fromDom);t.set(p.from(n))},sb=function(e,t,n,r){return{insertTable:function(t,n){return Hd.insert(e,t,n)},setClipboardRows:function(e){return fb(e,t)},getClipboardRows:function(){return lb(t)},resizeHandler:n,selectionTargets:r}};function db(e){var n=nb(e),r=rb(e,n),o=Xm(e),i=tb(e,o.lazyResize,r),u=ks(e,o.lazyWire),c=t(p.none());return Qd.registerCommands(e,u,i,n,c),Wi.registerEvents(e,n,u,i),ab.addMenuItems(e,r),ub.addButtons(e,r),ub.addToolbars(e),e.on("PreInit",(function(){e.serializer.addTempAttr(hi.firstSelected()),e.serializer.addTempAttr(hi.lastSelected())})),is(e)&&e.on("keydown",(function(t){Bp.handle(t,e,u,o.lazyWire)})),e.on("remove",(function(){o.destroy(),i.destroy()})),sb(e,c,o,r)}function mb(){h.add("table",db)}mb()})(window)}}]);