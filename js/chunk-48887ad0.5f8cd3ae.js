(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48887ad0","chunk-48887ad0"],{"040d":function(e,t,n){},23083:function(e,t,n){"use strict";var a=n("c1a6"),o=n.n(a);o.a},3402:function(e,t,n){"use strict";var a=n("4d51"),o=n.n(a);o.a},"4d51":function(e,t,n){},"9ab5":function(e,t,n){"use strict";var a=n("040d"),o=n.n(a);o.a},c1a6:function(e,t,n){},c1f0:function(e,t,n){"use strict";var a=n("d142"),o=n.n(a);o.a},c954:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("a-form-item",{attrs:{label:"表名"}},[n("a-input",{attrs:{placeholder:"请输入表名"},model:{value:e.queryParam.tableName,callback:function(t){e.$set(e.queryParam,"tableName",t)},expression:"queryParam.tableName"}})],1)],1),n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"highlight"},on:{click:e.doCgformButton}},[e._v("自定义按钮")]),n("a-button",{attrs:{type:"primary",icon:"strikethrough"},on:{click:e.doEnhanceJs}},[e._v("JS增强")]),n("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:e.doEnhanceSql}},[e._v("SQL增强")]),n("a-button",{attrs:{type:"primary",icon:"tool"},on:{click:e.doEnhanceJava}},[e._v("Java增强")]),e.selectedRowKeys.length>0?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchDel}},[n("a-icon",{attrs:{type:"delete"}}),e._v("\n          删除\n        ")],1)],1),n("a-button",[e._v(" 批量操作\n        "),n("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),n("div",[n("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[n("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v("\n      已选择\n      "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("\n      项\n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),n("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("更多\n            "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{on:{click:function(t){return e.goPageOnline(a)}}},[e._v("功能测试")])]),n("a-menu-item",[n("a",{on:{click:function(t){return e.handleOnlineUrlShow(a)}}},[e._v("配置地址")])]),n("a-menu-item",[n("a",{on:{click:function(t){return e.handleRemoveRecord(a.id)}}},[e._v("移除")])])],1)],1)]}},{key:"dbsync",fn:function(t){return["Y"===t?n("span",{staticStyle:{color:"limegreen"}},[e._v("已同步")]):e._e(),"N"===t?n("span",{staticStyle:{color:"red"}},[e._v("未同步")]):e._e()]}}])})],1),n("onl-cgform-head-modal",{ref:"modalForm",attrs:{"action-button":!1},on:{ok:e.modalFormOk}}),n("a-modal",{attrs:{title:e.onlineUrlTitle,visible:e.onlineUrlVisible},on:{cancel:e.handleOnlineUrlClose}},[n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleOnlineUrlClose}},[e._v("关闭")]),n("a-button",{staticClass:"copy-this-text",attrs:{type:"primary","data-clipboard-text":e.onlineUrl},on:{click:e.onCopyUrl}},[e._v("复制")])],1),n("p",[e._v(e._s(e.onlineUrl))])],2),n("enhance-js",{ref:"ehjs"}),n("enhance-sql",{ref:"ehsql"}),n("enhance-java",{ref:"ehjava"}),n("trans-db2-online",{ref:"transd2o",on:{ok:e.transOk}}),n("onl-cgform-button-list",{ref:"btnList"})],1)},o=[],s=n("0fea"),i=n("b65a"),l=n("b311"),c=n.n(l),r=n("ca00"),d={name:"OnlCgformHeadList",mixins:[i["a"]],components:{},data:function(){return{description:"Online表单视图",columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,n){return parseInt(n)+1}},{title:"视图表名",align:"center",dataIndex:"tableName"},{title:"视图表描述",align:"center",dataIndex:"tableTxt"},{title:"原表版本",align:"center",dataIndex:"tableVersion"},{title:"视图版本",align:"center",dataIndex:"copyVersion"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],url:{list:"/online/cgform/head/list",delete:"/online/cgform/head/delete",deleteBatch:"/online/cgform/head/deleteBatch",removeRecord:"/online/cgform/head/removeRecord"},tableTypeDictOptions:[],sexDictOptions:[],syncModalVisible:!1,syncFormId:"",synMethod:"normal",syncLoading:!1,onlineUrlTitle:"",onlineUrlVisible:!1,onlineUrl:"",selectedRowKeys:[],selectedRows:[],physicId:""}},watch:{$route:function(){this.loadData()}},methods:{getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter,this.filters);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,e.copyType=1,e.physicId=this.physicId,Object(r["h"])(e)},loadData:function(e){var t=this;if(!this.$route.params.code)return!1;if(this.physicId=this.$route.params.code,this.url.list){1===e&&(this.ipagination.current=1);var n=this.getQueryParams();this.loading=!0,Object(s["getAction"])(this.url.list,n).then((function(e){e.success&&(t.dataSource=e.result.records,t.ipagination.total=e.result.total),510===e.code&&t.$message.warning(e.message),t.loading=!1}))}else this.$message.error("请设置url.list属性!")},goPageOnline:function(e){"Y"==e.isTree?this.$router.push({path:"/online/cgformTreeList/"+e.id}):this.$router.push({path:"/online/cgformList/"+e.id})},handleOnlineUrlClose:function(){this.onlineUrlTitle="",this.onlineUrlVisible=!1},handleOnlineUrlShow:function(e){"Y"==e.isTree?this.onlineUrl="/online/cgformTreeList/".concat(e.id):this.onlineUrl="/online/cgformList/".concat(e.id),this.onlineUrlVisible=!0,this.onlineUrlTitle="菜单链接["+e.tableTxt+"]"},handleRemoveRecord:function(e){var t=this;this.$confirm({title:"确认要移除此记录?",onOk:function(){Object(s["deleteAction"])(t.url.removeRecord,{id:e}).then((function(e){e.success?(t.$message.success("移除成功"),t.loadData()):t.$message.warning(e.message)}))},onCancel:function(){}})},doEnhanceJs:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.ehjs.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},doEnhanceSql:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.ehsql.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},doEnhanceJava:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.ehjava.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},doCgformButton:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.btnList.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},importOnlineForm:function(){this.$refs.transd2o.show()},transOk:function(){this.loadData()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},onCopyUrl:function(){var e=this,t=new c.a(".copy-this-text");t.on("success",(function(){t.destroy(),e.$message.success("复制成功"),e.handleOnlineUrlClose()})),t.on("error",(function(){e.$message.error("该浏览器不支持自动复制"),t.destroy()}))},showMyCopyInfo:function(e){console.log("查看复制表单的信息",e)},copyConfig:function(e){var t=this;Object(s["postAction"])("".concat(this.url.copyOnline,"?code=").concat(e)).then((function(e){e.success?(t.$message.success("复制成功"),t.loadData()):t.$message.error("复制失败>>"+e.message)}))}}},h=d,u=(n("3402"),n("9ab5"),n("2877")),m=Object(u["a"])(h,a,o,!1,null,"0892f48b",null);t["default"]=m.exports},d142:function(e,t,n){},e3a7:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("a-form-item",{attrs:{label:"表名"}},[n("a-input",{attrs:{placeholder:"请输入表名"},model:{value:e.queryParam.tableName,callback:function(t){e.$set(e.queryParam,"tableName",t)},expression:"queryParam.tableName"}})],1)],1),n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("a-form-item",{attrs:{label:"表类型"}},[n("j-dict-select-tag",{attrs:{dictCode:"cgform_table_type"},model:{value:e.queryParam.tableType,callback:function(t){e.$set(e.queryParam,"tableType",t)},expression:"queryParam.tableType"}})],1)],1),n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("a-form-item",{attrs:{label:"表描述"}},[n("a-input",{attrs:{placeholder:"请输入表描述"},model:{value:e.queryParam.tableTxt,callback:function(t){e.$set(e.queryParam,"tableTxt",t)},expression:"queryParam.tableTxt"}})],1)],1),n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),n("a-button",{attrs:{type:"primary",icon:"highlight"},on:{click:e.doCgformButton}},[e._v("自定义按钮")]),n("a-button",{attrs:{type:"primary",icon:"strikethrough"},on:{click:e.doEnhanceJs}},[e._v("JS增强")]),n("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:e.doEnhanceSql}},[e._v("SQL增强")]),n("a-button",{attrs:{type:"primary",icon:"tool"},on:{click:e.doEnhanceJava}},[e._v("Java增强")]),n("a-button",{attrs:{type:"primary",icon:"database"},on:{click:e.importOnlineForm}},[e._v("从数据库导入表单")]),n("a-button",{attrs:{type:"primary",icon:"database"},on:{click:e.goGenerateCode}},[e._v("代码生成")]),e.selectedRowKeys.length>0?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchDel}},[n("a-icon",{attrs:{type:"delete"}}),e._v("删除\n        ")],1)],1),n("a-button",[e._v("\n        批量操作\n        "),n("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),n("div",[n("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[n("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v("\n      已选择\n      "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("\n      项\n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),n("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("\n            更多\n            "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},["Y"!=a.isDbSynch?n("a-menu-item",[n("a",{on:{click:function(t){return e.openSyncModal(a.id)}}},[e._v("同步数据库")])]):e._e(),"Y"==a.isDbSynch&&3!==a.tableType?[n("a-menu-item",[n("a",{on:{click:function(t){return e.goPageOnline(a)}}},[e._v("功能测试")])]),n("a-menu-item",[n("a",{on:{click:function(t){return e.handleOnlineUrlShow(a)}}},[e._v("配置地址")])])]:e._e(),n("a-menu-item",[n("a",{on:{click:function(t){return e.copyConfig(a.id)}}},[e._v("复制视图")])]),1==a.hascopy?n("a-menu-item",[n("a",{on:{click:function(t){return e.showMyCopyInfo(a.id)}}},[e._v("配置视图")])]):e._e(),n("a-menu-item",[n("a",{on:{click:function(t){return e.handleRemoveRecord(a.id)}}},[e._v("移除")])]),n("a-menu-item",[n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a.id)}}},[n("a",[e._v("删除")])])],1)],2)],1)]}},{key:"dbsync",fn:function(t){return["Y"===t?n("span",{staticStyle:{color:"limegreen"}},[e._v("已同步")]):e._e(),"N"===t?n("span",{staticStyle:{color:"red"}},[e._v("未同步")]):e._e()]}}])})],1),n("onl-cgform-head-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),n("a-modal",{staticStyle:{top:"5%",height:"95%"},attrs:{width:500,height:300,title:"同步数据库",visible:e.syncModalVisible},on:{cancel:e.handleCancleDbSync}},[n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleCancleDbSync}},[e._v("关闭")]),n("a-button",{attrs:{type:"primary",loading:e.syncLoading},on:{click:e.handleDbSync}},[e._v("确定")])],1),n("a-radio-group",{model:{value:e.synMethod,callback:function(t){e.synMethod=t},expression:"synMethod"}},[n("a-radio",{staticStyle:{display:"block",width:"30px",height:"30px"},attrs:{value:"normal"}},[e._v("普通同步(保留表数据)")]),n("a-radio",{staticStyle:{display:"block",width:"30px",height:"30px"},attrs:{value:"force"}},[e._v("强制同步(删除表,重新生成)")])],1)],2),n("a-modal",{attrs:{title:e.onlineUrlTitle,visible:e.onlineUrlVisible},on:{cancel:e.handleOnlineUrlClose}},[n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleOnlineUrlClose}},[e._v("关闭")]),n("a-button",{staticClass:"copy-this-text",attrs:{type:"primary","data-clipboard-text":e.onlineUrl},on:{click:e.onCopyUrl}},[e._v("复制")])],1),n("p",[e._v(e._s(e.onlineUrl))])],2),n("enhance-js",{ref:"ehjs"}),n("enhance-sql",{ref:"ehsql"}),n("enhance-java",{ref:"ehjava"}),n("trans-db2-online",{ref:"transd2o",on:{ok:e.transOk}}),n("code-generator",{ref:"cg"}),n("onl-cgform-button-list",{ref:"btnList"})],1)},o=[],s=n("89f2"),i=n("0fea"),l=n("7b16"),c=n("b65a"),r=n("b311"),d=n.n(r),h=n("ca00"),u={name:"OnlCgformHeadList",mixins:[c["a"]],components:{JDictSelectTag:l["default"]},data:function(){var e=this;return{description:"Online表单开发管理页面",columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,n){return parseInt(n)+1}},{title:"表类型",align:"center",dataIndex:"tableType",customRender:function(t,n){var a=Object(s["a"])(e.tableTypeDictOptions,"".concat(t));return"Y"===n.isTree&&(a+="(树)"),a}},{title:"表名",align:"center",dataIndex:"tableName"},{title:"表描述",align:"center",dataIndex:"tableTxt"},{title:"版本",align:"center",dataIndex:"tableVersion"},{title:"同步数据库状态",align:"center",dataIndex:"isDbSynch",scopedSlots:{customRender:"dbsync"}},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],url:{list:"/online/cgform/head/list",delete:"/online/cgform/head/delete",deleteBatch:"/online/cgform/head/deleteBatch",doDbSynch:"/online/cgform/api/doDbSynch/",removeRecord:"/online/cgform/head/removeRecord",copyOnline:"/online/cgform/head/copyOnline"},tableTypeDictOptions:[],sexDictOptions:[],syncModalVisible:!1,syncFormId:"",synMethod:"normal",syncLoading:!1,onlineUrlTitle:"",onlineUrlVisible:!1,onlineUrl:"",selectedRowKeys:[],selectedRows:[]}},created:function(){var e=this;Object(s["c"])("cgform_table_type").then((function(t){t.success&&(e.tableTypeDictOptions=t.result)}))},methods:{doDbSynch:function(e){var t=this;Object(i["postAction"])(this.url.doDbSynch+e,{synMethod:"1"}).then((function(e){e.success?(t.$message.success(e.message),t.loadData()):t.$message.warning(e.message)}))},getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter,this.filters);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,e.copyType=0,Object(h["h"])(e)},handleCancleDbSync:function(){this.syncModalVisible=!1},handleDbSync:function(){var e=this;this.syncLoading=!0,Object(i["postAction"])(this.url.doDbSynch+this.syncFormId+"/"+this.synMethod).then((function(t){e.syncModalVisible=!1,e.syncLoading=!1,t.success?(e.$message.success(t.message),e.loadData()):e.$message.warning(t.message)})),setTimeout((function(){e.syncLoading&&(e.syncModalVisible=!1,e.syncLoading=!1,e.$message.success("网络延迟,已自动刷新!"),e.loadData())}),1e4)},openSyncModal:function(e){this.syncModalVisible=!0,this.syncLoading=!1,this.syncFormId=e},goPageOnline:function(e){"erp"===e.themeTemplate?this.$router.push({path:"/online/cgformErpList/"+e.id}):"Y"==e.isTree?this.$router.push({path:"/online/cgformTreeList/"+e.id}):this.$router.push({path:"/online/cgformList/"+e.id})},handleOnlineUrlClose:function(){this.onlineUrlTitle="",this.onlineUrlVisible=!1},handleOnlineUrlShow:function(e){"Y"==e.isTree?this.onlineUrl="/online/cgformTreeList/".concat(e.id):this.onlineUrl="/online/cgformList/".concat(e.id),this.onlineUrlVisible=!0,this.onlineUrlTitle="菜单链接["+e.tableTxt+"]"},handleRemoveRecord:function(e){var t=this;this.$confirm({title:"确认要移除此记录?",onOk:function(){Object(i["deleteAction"])(t.url.removeRecord,{id:e}).then((function(e){e.success?(t.$message.success("移除成功"),t.loadData()):t.$message.warning(e.message)}))},onCancel:function(){}})},doEnhanceJs:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.ehjs.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},doEnhanceSql:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.ehsql.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},doEnhanceJava:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.ehjava.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},doCgformButton:function(){this.selectedRowKeys&&1==this.selectedRowKeys.length?this.$refs.btnList.show(this.selectedRowKeys[0]):this.$message.warning("请先选中一条记录")},importOnlineForm:function(){this.$refs.transd2o.show()},transOk:function(){this.loadData()},goGenerateCode:function(){if(this.selectedRowKeys&&1==this.selectedRowKeys.length){var e=this.selectedRows[0];e.isDbSynch&&"N"!=e.isDbSynch?3!=e.tableType?this.$refs.cg.show(this.selectedRowKeys[0]):this.$message.warning("请选中该表对应的主表生成代码"):this.$message.warning("请先同步数据库!")}else this.$message.warning("请先选中一条记录")},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},onCopyUrl:function(){var e=this,t=new d.a(".copy-this-text");t.on("success",(function(){t.destroy(),e.$message.success("复制成功"),e.handleOnlineUrlClose()})),t.on("error",(function(){e.$message.error("该浏览器不支持自动复制"),t.destroy()}))},showMyCopyInfo:function(e){this.$router.push({path:"/online/copyform/"+e})},copyConfig:function(e){var t=this;Object(i["postAction"])("".concat(this.url.copyOnline,"?code=").concat(e)).then((function(e){e.success?(t.$message.success("复制成功"),t.loadData()):t.$message.error("复制失败>>"+e.message)}))}}},m=u,y=(n("c1f0"),n("23083"),n("2877")),g=Object(y["a"])(m,a,o,!1,null,"0d95d4cb",null);t["default"]=g.exports}}]);