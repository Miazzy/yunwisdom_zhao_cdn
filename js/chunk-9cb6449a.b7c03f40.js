(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9cb6449a"],{1478:function(t,e,a){},"19f2":function(t,e,a){"use strict";var i=a("40b6"),n=a.n(i);n.a},"1d80":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-search"},[a("a-spin",{attrs:{spinning:t.loading}},[a("div",{staticClass:"search-content"},[a("a-form",{staticClass:"m-t-md",attrs:{form:t.form},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("a-form-item",{attrs:{label:"标题",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"[\n                                          'title',\n                                          ]"}],attrs:{placeholder:"搜索项目内任务"}})],1),a("a-form-item",{attrs:{label:"执行者",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["executor"],expression:"[\n                                          'executor',\n                                          ]"}],attrs:{mode:"multiple",showSearch:"",allowClear:"",placeholder:"请选择",optionFilterProp:"children"}},t._l(t.projectMemberList,(function(e){return a("a-select-option",{key:e.code},[a("div",{staticClass:"task-search-member-item"},[a("a-avatar",{staticClass:"m-r-sm",attrs:{size:24,icon:"user",src:e.avatar}}),a("div",[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"muted"},[t._v(t._s(e.email))])])],1)])})),1)],1),a("a-form-item",{attrs:{label:"创建者",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["creator"],expression:"[\n                                          'creator',\n                                          ]"}],attrs:{mode:"multiple",showSearch:"",allowClear:"",placeholder:"请选择",optionFilterProp:"children"}},t._l(t.projectMemberList,(function(e){return a("a-select-option",{key:e.code},[a("div",{staticClass:"task-search-member-item"},[a("a-avatar",{staticClass:"m-r-sm",attrs:{size:24,icon:"user",src:e.avatar}}),a("div",[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"muted"},[t._v(t._s(e.email))])])],1)])})),1)],1),a("a-form-item",{attrs:{label:"参与者",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["joiner"],expression:"[\n                                          'joiner',\n                                          ]"}],attrs:{mode:"multiple",showSearch:"",allowClear:"",placeholder:"请选择",optionFilterProp:"children"}},t._l(t.projectMemberList,(function(e){return a("a-select-option",{key:e.code},[a("div",{staticClass:"task-search-member-item"},[a("a-avatar",{staticClass:"m-r-sm",attrs:{size:24,icon:"user",src:e.avatar}}),a("div",[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"muted"},[t._v(t._s(e.email))])])],1)])})),1)],1),a("a-form-item",{attrs:{label:"是否完成",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["done",{initialValue:-1}],expression:"[\n                                          'done',\n                                           {initialValue: -1}\n\n                                          ]"}],attrs:{allowClear:"",placeholder:"请选择",optionFilterProp:"children"}},[a("a-select-option",{key:-1},[t._v("全部")]),a("a-select-option",{key:1},[t._v("是")]),a("a-select-option",{key:0},[t._v("否")])],1)],1),a("a-form-item",{attrs:{label:"优先级",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pri"],expression:"[\n                                          'pri',\n                                          ]"}],attrs:{mode:"multiple",showSearch:"",allowClear:"",placeholder:"请选择",optionFilterProp:"children"}},[a("a-select-option",{key:0},[t._v("普通")]),a("a-select-option",{key:1},[t._v("紧急")]),a("a-select-option",{key:2},[t._v("非常紧急")])],1)],1),a("a-form-item",{attrs:{label:"截止日期",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time"],expression:"[\n                                          'end_time',\n                                          ]"}],staticStyle:{width:"100%"},attrs:{allowClear:"",format:"YYYY-MM-DD"}})],1),a("a-form-item",{attrs:{label:"创建日期",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["create_time"],expression:"[\n                                          'create_time',\n                                          ]"}],staticStyle:{width:"100%"},attrs:{allowClear:"",format:"YYYY-MM-DD"}})],1),a("a-form-item",{attrs:{label:"完成日期",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["done_time"],expression:"[\n                                          'done_time',\n                                          ]"}],staticStyle:{width:"100%"},attrs:{allowClear:"",format:"YYYY-MM-DD"}})],1),a("a-form-item",{attrs:{label:"开始日期",colon:!1,labelCol:{span:6},wrapperCol:{span:18}}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["begin_time"],expression:"[\n                                          'begin_time',\n                                          ]"}],staticStyle:{width:"100%"},attrs:{allowClear:"",format:"YYYY-MM-DD"}})],1)],1),a("div",{staticClass:"footer m-t-md"},[a("a-button",{staticClass:"m-r",attrs:{type:"primary",size:"large"},on:{click:t.handleSubmit}},[t._v("搜索")]),a("a-button",{attrs:{size:"large"},on:{click:t.resetForm}},[t._v("重置")])],1)],1)])],1)},n=[],o=(a("c5f6"),a("2ef0"),a("c030")),r=a("9f09"),s=(a("97a8"),{name:"taskSearch",props:{projectCode:{type:[String,Number],default:function(){return""}}},data:function(){return{moment:moment,form:this.$form.createForm(this),loading:!1,projectMemberList:[],taskStageList:[]}},watch:{projectCode:function(){this.init()}},created:function(){this.init()},methods:{init:function(){this.projectCode&&(this.resetForm(),this.loading=!0,this.getProjectMemberList(),this.getTaskStageList())},getProjectMemberList:function(){var t=this;Object(o["c"])({projectCode:this.projectCode,pageSize:300}).then((function(e){t.projectMemberList=e.data.list,t.loading=!1}))},getTaskStageList:function(){var t=this;Object(r["a"])({projectCode:this.projectCode}).then((function(e){t.taskStageList=e.data,t.loading=!1}))},resetForm:function(){this.form.resetFields()},handleSubmit:function(){var t=this;this.form.validateFields((function(e,a){if(!e){var i=t.form.getFieldsValue();i.executor=JSON.stringify(i.executor),i.creator=JSON.stringify(i.creator),i.joiner=JSON.stringify(i.joiner),console.log(i),i.end_time&&i.end_time.length?i.endTime=JSON.stringify([moment(i.end_time[0]).format("YYYY-MM-DD"),moment(i.end_time[1]).format("YYYY-MM-DD")]):i.endTime=void 0,i.begin_time&&i.begin_time.length?i.beginTime=JSON.stringify([moment(i.begin_time[0]).format("YYYY-MM-DD"),moment(i.begin_time[1]).format("YYYY-MM-DD")]):i.beginTime=void 0,i.create_time&&i.create_time.length?i.createTime=JSON.stringify([moment(i.create_time[0]).format("YYYY-MM-DD"),moment(i.create_time[1]).format("YYYY-MM-DD")]):i.createTime=void 0,i.done_time&&i.done_time.length?i.doneTime=JSON.stringify([moment(i.done_time[0]).format("YYYY-MM-DD"),moment(i.done_time[1]).format("YYYY-MM-DD")]):i.doneTime=void 0,console.log(i),t.$emit("search",i)}}))}}}),c=s,l=(a("19f2"),a("2877")),d=Object(l["a"])(c,i,n,!1,null,null,null);e["default"]=d.exports},"24d2":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return r}));var i=a("22b6");function n(t){return i["a"].post("project/project",t)}function o(t){return i["a"].post("project/project/selfList",t)}function r(t){return i["a"].post("project/project/read",{projectCode:t})}},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"40b6":function(t,e,a){},"51e2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-tabs",{attrs:{tabPosition:"left",defaultActiveKey:"1",animated:!1},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"check-square"}}),t._v("任务\n    ")],1)]),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"link"}}),t._v("文件\n    ")],1)]),a("div",{staticClass:"config-content"},[a("vue-scroll",[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("a-list",[t.showLoadingMore?a("div",{style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"},attrs:{slot:"loadMore"},slot:"loadMore"},[t.loadingMore?a("a-spin"):a("a-button",{on:{click:t.onLoadMore}},[t._v("加载更多")])],1):t._e(),t._l(t.list,(function(e,i){return a("a-list-item",{key:i},[a("a-list-item-meta",[a("div",{attrs:{slot:"title"},slot:"title"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:"1"==t.tabKey,expression:"tabKey == '1'"}],staticClass:"text-default",attrs:{to:"/project/space/task/"+t.code+"/detail/"+e.code}},[t._v(t._s(e.name))]),a("a",{directives:[{name:"show",rawName:"v-show",value:"2"==t.tabKey,expression:"tabKey == '2'"}],staticClass:"text-default",attrs:{target:"_blank",href:e.file_url}},[t._v(t._s(e.fullName))])],1),a("div",{attrs:{slot:"description"},slot:"description"},[t._v(t._s(t.showTaskTime(e.deleted_time)))])]),a("a",{staticClass:"muted",attrs:{slot:"actions"},on:{click:function(a){return t.recoveryTask(e,i)}},slot:"actions"},[a("a-tooltip",{attrs:{title:"恢复内容"}},[a("a-icon",{attrs:{type:"undo"}})],1)],1),a("a",{staticClass:"muted",attrs:{slot:"actions"},on:{click:function(a){return t.deleteItem(e,i)}},slot:"actions"},[a("a-tooltip",{attrs:{title:"彻底删除"}},[a("a-icon",{attrs:{type:"delete"}})],1)],1)],1)}))],2)],1)])])],1)],1)},n=[],o=a("2f14"),r=a("ca8d"),s=a("0610"),c=a("1b80"),l=a("81fe"),d={name:"recycleBin",props:{code:{type:[String],default:function(){return""}}},mixins:[c["a"]],data:function(){return{loading:!1,tabKey:"1",project:{},list:[],showLoadingMore:!1,loadingMore:!1}},watch:{code:function(){this.init()},tabKey:function(t){this.init()}},created:function(){this.init()},methods:{init:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;switch(t&&(this.list=[],this.pagination.page=1,this.pagination.pageSize=10,this.showLoadingMore=!1),this.requestData.deleted=1,this.requestData.projectCode=this.code,e.loading=!0,this.tabKey){case"1":e.getTasks();break;case"2":e.getFiles();break}},getTasks:function(){var t=this;Object(r["j"])(t.requestData).then((function(e){t.list=t.list.concat(e.data.list),t.pagination.total=e.data.total,t.showLoadingMore=t.pagination.total>t.list.length,t.loading=!1,t.loadingMore=!1}))},getFiles:function(){var t=this;Object(s["b"])(t.requestData).then((function(e){t.list=t.list.concat(e.data.list),t.pagination.total=e.data.total,t.showLoadingMore=t.pagination.total>t.list.length,t.loading=!1,t.loadingMore=!1}))},onLoadMore:function(){this.loadingMore=!0,this.pagination.page++,this.init(!1)},showTaskTime:function(t){return Object(l["b"])(t)},recoveryTask:function(t,e){var a=this;switch(this.tabKey){case"1":this.$confirm({title:"确定恢复内容？",content:"恢复后可在任务列表中查看",okText:"恢复内容",okType:"primary",cancelText:"再想想",onOk:function(){return Object(r["k"])(t.code).then((function(i){Object(o["a"])(i)&&(a.list.splice(e,1),a.$emit("update",t))})),Promise.resolve()}});break;case"2":this.$confirm({title:"确定恢复文件？",content:"恢复后可在我的文件中查看",okText:"恢复文件",okType:"primary",cancelText:"再想想",onOk:function(){return Object(s["c"])(t.code).then((function(i){Object(o["a"])(i)&&(a.list.splice(e,1),a.$emit("update",t))})),Promise.resolve()}});break}},deleteItem:function(t,e){var a=this;switch(this.tabKey){case"1":this.$confirm({title:"确定彻底删除任务？",content:"彻底删除任务后，该任务及其子任务将会被永久被删除。",okText:"彻底删除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(r["e"])(t.code).then((function(i){Object(o["a"])(i)&&(a.list.splice(e,1),a.$emit("update",t))})),Promise.resolve()}});break;case"2":this.$confirm({title:"确认彻底删除该文件？",content:"彻底删除文件后，相关的关联资源将会失效。",okText:"彻底删除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(s["a"])(t.code).then((function(i){Object(o["a"])(i)&&(a.list.splice(e,1),a.$emit("update",t))})),Promise.resolve()}});break}}}},m=d,u=(a("c9b7"),a("2877")),p=Object(u["a"])(m,i,n,!1,null,null,null);e["default"]=p.exports},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d8e8"),o=a("4bf8"),r=a("79e5"),s=[].sort,c=[1,2,3];i(i.P+i.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),n(t))}})},7934:function(t,e,a){"use strict";var i=a("d22a"),n=a.n(i);n.a},"81fe":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return r}));a("3b2b"),a("a481");var i=function(t,e){e||(e=moment());var a=moment(e).diff(moment(t),"hours");if(a<=1)return moment(t).fromNow();moment(e).get("date"),moment(t).get("date");var i=moment(t).format("H:mm"),n=moment(t).format("YYYY-MM-DD"),o=moment().weekday(0).format("YYYY-MM-DD"),r=moment().weekday(6).format("YYYY-MM-DD"),s="";return s=n<o?"[上周]dd "+i:n>r?"[下周]dd "+i:"[周]dd "+i,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+i,nextWeek:s,lastDay:"[昨天 ]"+i,lastWeek:s,sameElse:"M月D日 H:mm"})},n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=moment(t).format("H:mm");e||(a="");var i=moment(t).format("YYYY-MM-DD"),n=moment().weekday(0).format("YYYY-MM-DD"),o=moment().weekday(6).format("YYYY-MM-DD"),r="";return r=i<n?"[上周]dd "+a:i>o?"[下周]dd "+a:"[周]dd "+a,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+a,nextWeek:r,lastDay:"[昨天 ]"+a,lastWeek:r,sameElse:"M月D日 H:mm"})},o=function(t,e){return!e&&t?n(t)+" 开始":t?n(t)+" - "+n(e):n(e)+" 截止"},r=function(t){var e="";void 0==t&&(t=new Date);var a=t.getHours();return a>=0&&a<=4&&(e="深夜了，注意身体，"),a>=4&&a<7&&(e="清晨好， "),a>=7&&a<12&&(e="早安，"),a>=12&&a<=13&&(e="午饭时间到了，"),a>=13&&a<=17&&(e="下午好，"),a>=17&&a<=18&&(e="进入傍晚了，"),a>=18&&a<=20&&(e="吃过晚饭了吗，"),a>=20&&a<=24&&(e="在加班吗？辛苦了，"),e}},c9b7:function(t,e,a){"use strict";var i=a("1478"),n=a.n(i);n.a},d22a:function(t,e,a){},dd5e:function(t,e,a){},e3cc:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-tabs",{staticClass:"task-tag-index",attrs:{tabPosition:"left",defaultActiveKey:"1",animated:!1},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[t._l(t.taskTagList,(function(e){return a("a-tab-pane",{key:e.code},[a("div",{attrs:{slot:"tab"},slot:"tab"},[a("div",{staticClass:"tag-item"},[a("a-badge",{class:"badge-"+e.color,attrs:{status:"success"}}),t._v("\n          "+t._s(e.name)+"\n        ")],1)]),a("div",{staticClass:"config-content"},[a("vue-scroll",[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("a-list",{attrs:{loading:{spinning:t.loading,delay:300}}},[t.showLoadingMore?a("div",{style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"},attrs:{slot:"loadMore"},slot:"loadMore"},[t.loadingMore?a("a-spin"):a("a-button",{on:{click:t.onLoadMore}},[t._v("加载更多")])],1):t._e(),t._l(t.list,(function(e,i){return a("a-list-item",{key:i},[a("a-list-item-meta",[a("div",{staticClass:"task-list",class:{done:e.done},attrs:{slot:"title"},slot:"title"},[a("div",[a("router-link",{staticClass:"text-default task-content",attrs:{to:"/project/space/task/"+t.code+"/detail/"+e.code}},[e.executor&&e.executor.avatar?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e.executor.name))])]),a("img",{staticClass:"avatar task-executor img-circle img-24 hinted m-r-sm",attrs:{src:e.executor.avatar,title:e.executor.name}})],2):a("a-avatar",{staticClass:"m-r-sm",attrs:{size:"small",icon:"user"}}),a("span",{staticClass:"task-name m-r"},[t._v(t._s(e.name))]),t._l(e.tags,(function(e){return a("span",{key:e.code,staticClass:"muted flex m-r tag-name"},[a("a-badge",{class:"badge-"+e.tag.color+" m-r-xs",attrs:{status:"success"}}),t._v("\n                            "+t._s(e.tag.name)+"\n                          ")],1)}))],2)],1),e.end_time?a("div",{staticClass:"label task-time",class:t.showTimeLabel(e.end_time)},[t._v(t._s(t.showTaskTime(e.begin_time,e.end_time)))]):t._e()])])],1)}))],2)],1)])])],1)])})),t.loading||t.list.length?t._e():a("div",{staticClass:"m-t text-center"},[a("strong",[a("h2",[t._v("项目中还没有标签")])])])],2)],1)},n=[],o=a("2f14"),r=a("db9e6"),s=a("1b80"),c=a("81fe"),l=a("ca8d"),d={name:"taskTag",props:{code:{type:[String],default:function(){return""}}},mixins:[s["a"]],data:function(){return{loading:!1,tabKey:"0",project:{},taskTagList:[],list:[],showLoadingMore:!1,loadingMore:!1}},watch:{code:function(){this.init()},tabKey:function(t){this.getTaskList()}},created:function(){this.init()},methods:{init:function(){var t=this;this.requestData.projectCode=this.code,t.getTaskTags()},getTaskTags:function(){var t=this;Object(r["c"])(t.requestData).then((function(e){t.taskTagList=e.data,e.data.length&&(t.tabKey=e.data[0].code)}))},getTaskList:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.tabKey)return!1;var e=this;e.loading=!0,t&&(this.list=[],this.pagination.page=1,this.pagination.pageSize=10,this.showLoadingMore=!1),Object(l["h"])({taskTagCode:this.tabKey}).then((function(t){e.list=e.list.concat(t.data.list),e.pagination.total=t.data.total,e.showLoadingMore=e.pagination.total>e.list.length,e.loading=!1,e.loadingMore=!1}))},onLoadMore:function(){this.loadingMore=!0,this.pagination.page++,this.getTaskList(!1)},showTaskTime:function(t,e){return Object(c["a"])(t,e)},showTimeLabel:function(t){var e="label-primary";if(null==t)return e;var a=moment(moment(t).format("YYYY-MM-DD")).diff(moment().format("YYYY-MM-DD"),"days");return a<0?e="label-danger":0==a?e="label-warning":a>7&&(e="label-normal"),e},deleteItem:function(t,e){var a=this;switch(this.tabKey){case"1":this.$confirm({title:"确定彻底删除任务？",content:"彻底删除任务后，该任务及其子任务将会被永久被删除。",okText:"彻底删除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(r["a"])(t.code).then((function(i){Object(o["a"])(i)&&(a.list.splice(e,1),a.$emit("update",t))})),Promise.resolve()}});break;case"2":this.$confirm({title:"确认彻底删除该文件？",content:"彻底删除文件后，相关的关联资源将会失效。",okText:"彻底删除",okType:"danger",cancelText:"再想想",onOk:function(){return delFile(t.code).then((function(i){Object(o["a"])(i)&&(a.list.splice(e,1),a.$emit("update",t))})),Promise.resolve()}});break}}}},m=d,u=(a("f9ef"),a("2877")),p=Object(u["a"])(m,i,n,!1,null,null,null);e["default"]=p.exports},f8c7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentProject?a("div",{attrs:{id:"project-select"}},[a("a-dropdown",{staticClass:"action-item",attrs:{trigger:["click"],placement:"bottomCenter"},model:{value:t.visibleMenu,callback:function(e){t.visibleMenu=e},expression:"visibleMenu"}},[a("a-tooltip",{attrs:{mouseEnterDelay:.3,title:t.currentProject.name}},[a("a",{staticClass:"project-select",staticStyle:{color:"#333"},on:{click:function(e){t.visibleMenu=!0}}},[a("span",[t._v(t._s(t.currentProject.name))]),a("span",{staticClass:"m-l-xs"},[a("a-icon",{attrs:{type:"down"}})],1)])]),a("div",{staticClass:"middle-menu member-menu project-select-menu",attrs:{slot:"overlay"},slot:"overlay"},[a("div",{staticClass:"search-content"},[a("a-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("div",{staticClass:"member-list"},[a("vue-scroll",[a("div",{staticClass:"list-group"},[a("a-list",{staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.projectList,locale:{emptyText:t.keyword&&t.keyword.length>1?"没有找到该项目":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(a){return t.changeProject(e.code)}}},[a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.cover},slot:"avatar"})],1)],1)}}],null,!1,3141279394)})],1)])],1)])],1)],1):t._e()},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("386d"),a("bd86")),r=a("2ef0"),s=a.n(r),c=a("5880"),l=a("24d2"),d=a("1b80");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"ProjectSelect",props:{code:{type:[String],default:function(){return""}}},data:function(){return{visibleMenu:!1,keyword:"",loading:!1,currentProject:null,projectList:[],projectListCopy:[],projectTotal:0}},mixins:[d["a"]],computed:u({},Object(c["mapState"])({currentOrganization:function(t){return t.currentOrganization},organizationList:function(t){return t.organizationList}})),watch:{code:function(){this.init()},keyword:function(){this.search()}},created:function(){this.init()},methods:{init:function(){this.getProject(),this.getProjectList(!0)},getProject:function(){var t=this;Object(l["b"])(this.code).then((function(e){t.currentProject=e.data}))},getProjectList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=e,this.requestData.pageSize=50,this.requestData.archive=-1,Object(l["c"])(this.requestData).then((function(e){t.projectList=e.data.list,t.projectListCopy=e.data.list,t.projectTotal=e.data.total,t.loading=!1}))},changeProject:function(t){this.visibleMenu=!1,this.$router.push("/project/space/task/"+t)},showCheck:function(t){if(t==this.code)return!0},search:s.a.debounce((function(){var t=this;if(this.keyword=this.keyword.trim(),this.keyword||(this.projectList=JSON.parse(JSON.stringify(this.projectListCopy))),this.keyword.length<=1)return!1;this.projectList=this.projectList.filter((function(e){return-1!=e.name.indexOf(t.keyword)}))}),500),getPopup:function(){return document.getElementById("project-select")}}},f=p,h=(a("7934"),a("2877")),v=Object(h["a"])(f,i,n,!1,null,null,null);e["default"]=v.exports},f9ef:function(t,e,a){"use strict";var i=a("dd5e"),n=a.n(i);n.a}}]);