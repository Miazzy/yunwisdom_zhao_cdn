(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7defbe3b","chunk-7defbe3b"],{"0d4e":function(t,e,a){},"1a75":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-department member-menu"},[a("div",{staticClass:"header"},[t._v(t._s(t.actionType)+t._s(t.actionTitle))]),a("div",{staticClass:"search-content"},[a("a-input",{attrs:{size:"large",placeholder:t.actionTitle+"名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("a-icon",{staticClass:"muted",attrs:{slot:"prefix",type:"bulb"},slot:"prefix"})],1),t.parentDepartmentCode?a("div",{staticClass:"info"},[a("span",{staticClass:"muted"},[t._v("隶属于："+t._s(t.parentDepartment.name))])]):t._e()],1),a("div",{staticClass:"actions"},[a("a-button",{staticClass:"middle-btn",attrs:{type:"primary",size:"large",block:"",loading:t.loading,disabled:t.disabled||t.loading},on:{click:t.doAction,pressEnter:t.doAction}},[t._v(t._s(t.actionType))])],1)])},o=[],i=(a("7f7f"),a("2ef0"),a("0e8f")),n=a("2f14"),r=a("97a8"),c={name:"createDepartment",props:{departmentCode:{type:[String,Boolean],default:function(){return""}},parentDepartmentCode:{type:[String,Boolean],default:function(){return""}}},data:function(){return{name:"",loading:!1,department:{},parentDepartment:{}}},computed:{actionType:function(){return this.departmentCode?"编辑":"创建"},actionTitle:function(){return this.parentDepartmentCode?"子部门":"部门"},disabled:function(){return!this.name.trim()}},created:function(){this.init()},methods:{init:function(){var t=this;this.departmentCode&&Object(i["b"])(this.departmentCode).then((function(e){t.department=e.data,t.name=e.data.name})),this.parentDepartmentCode&&Object(i["b"])(this.parentDepartmentCode).then((function(e){t.parentDepartment=e.data}))},doAction:function(){var t=this;if(this.name=this.name.trim(),!this.name)return!1;var e={departmentCode:this.departmentCode,parentDepartmentCode:this.parentDepartmentCode,name:this.name};this.loading=!0,Object(i["a"])(e).then((function(e){if(t.loading=!1,!Object(n["a"])(e))return!1;Object(r["b"])({title:"".concat(t.actionType,"部门成功")},"notice","success"),t.$emit("update",e.data),t.departmentCode&&t.$emit("edit",t.name)}))}}},l=c,u=(a("aeb2"),a("2877")),d=Object(u["a"])(l,s,o,!1,null,null,null);e["default"]=d.exports},"39bf":function(t,e,a){},"3ed7":function(t,e,a){"use strict";var s=a("0d4e"),o=a.n(s);o.a},"58bf":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-tabs",{attrs:{tabPosition:"left",defaultActiveKey:"1",animated:!1},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"heat-map"}}),t._v("概览 ")],1),a("div",{staticClass:"config-content"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目封面")]),a("div",{staticClass:"cover-item"},[t.project.cover?[a("img",{staticClass:"avatar",attrs:{src:t.project.cover}})]:t._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.project.cover,expression:"!project.cover"}],staticClass:"no-avatar"}),a("a-upload",{staticClass:"cover-uploader",attrs:{name:"cover",showUploadList:!1,headers:t.headers,action:t.uploadAction,beforeUpload:t.beforeUpload},on:{change:t.handleChange}},[a("a-button",{staticClass:"upload",attrs:{size:"large"}},[t._v("上传新封面")]),a("p",{staticClass:"upload-tips muted"},[t._v("最佳图片比例为300*150")])],1)],2)])]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目名称")]),a("a-input",{attrs:{size:"large"},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1),a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目进度 (%)")]),a("a-input-number",{attrs:{size:"large",min:0,max:100},model:{value:t.project.schedule,callback:function(e){t.$set(t.project,"schedule",e)},expression:"project.schedule"}})],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目简介")]),a("a-input",{attrs:{type:"textarea",rows:3,size:"large",placeholder:"介绍一下这个项目"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}})],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目公开性")]),a("a-select",{attrs:{size:"large"},model:{value:t.project.private,callback:function(e){t.$set(t.project,"private",e)},expression:"project.private"}},[a("a-select-option",{key:0},[t._v("公开项目（所有人都可通过链接访问，仅项目成员可编辑）")]),a("a-select-option",{key:1},[t._v("私有项目（仅项目成员可查看和编辑）")])],1)],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目拥有者")]),a("div",{staticClass:"m-t"},[a("a-avatar",{attrs:{src:t.project.owner_avatar}}),a("span",{staticClass:"m-l"},[t._v(t._s(t.project.owner_name))])],1)])]),a("a-divider"),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("a-button",{staticClass:"middle-btn pull-right",attrs:{type:"primary",size:"large"},on:{click:t.saveProject}},[t._v("保存")])],1)])],1)]),a("a-tab-pane",{key:"2",attrs:{forceRender:""}},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"eye"}}),t._v("项目偏好 ")],1),a("div",{staticClass:"config-content task-config"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("看板风格")]),a("div",{staticClass:"item-tips muted"},[t._v("\n            切换任务看板的主题风格，内置两种风格。\n          ")]),a("a-radio-group",{on:{change:t.saveProject},model:{value:t.project.task_board_theme,callback:function(e){t.$set(t.project,"task_board_theme",e)},expression:"project.task_board_theme"}},[a("a-radio",{staticStyle:{display:"block",height:"30px","line-height":"30px"},attrs:{value:"default"}},[t._v("默认")]),a("a-radio",{staticStyle:{display:"block",height:"30px","line-height":"30px"},attrs:{value:"simple"}},[t._v("简约")])],1)],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("自动更新项目进度")]),a("div",{staticClass:"item-tips muted"},[t._v("\n            根据当前任务的完成情况自动计算项目进度。\n          ")])]),a("a-switch",{on:{change:t.saveProject},model:{value:t.project.auto_update_schedule,callback:function(e){t.$set(t.project,"auto_update_schedule",e)},expression:"project.auto_update_schedule"}})],1)])]),a("a-tab-pane",{key:"3"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"check-square"}}),t._v("任务设置 ")],1),a("div",{staticClass:"config-content task-config"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目ID")]),a("div",{staticClass:"item-tips muted"},[t._v("\n            设置项目编号，编号将作为 ID 前缀，用以区别项目。支持 2-6 位字母。\n          ")]),a("a-input",{staticClass:"prefix-input",attrs:{size:"large",placeholder:"如 Pear Project 可以设置为 EP",disabled:!t.project.open_prefix},model:{value:t.project.prefix,callback:function(e){t.$set(t.project,"prefix",e)},expression:"project.prefix"}}),a("a-button",{staticClass:"middle-btn",attrs:{size:"large",type:"primary",disabled:!t.project.open_prefix},on:{click:t.saveProject}},[t._v("保存")])],1),a("a-switch",{on:{change:t.saveProject},model:{value:t.project.open_prefix,callback:function(e){t.$set(t.project,"open_prefix",e)},expression:"project.open_prefix"}})],1),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("任务开始时间")]),a("div",{staticClass:"item-tips muted"},[t._v("\n            为任务设置开始时间，更科学地规划工作。\n          ")])]),a("a-switch",{on:{change:t.saveProject},model:{value:t.project.open_begin_time,callback:function(e){t.$set(t.project,"open_begin_time",e)},expression:"project.open_begin_time"}})],1),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("新任务默认开启隐私模式")]),a("div",{staticClass:"item-tips muted"},[t._v("\n            对本项目内的新任务默认开启隐私模式，创建成功后仅参与者可见\n          ")])]),a("a-switch",{on:{change:t.saveProject},model:{value:t.project.open_task_private,callback:function(e){t.$set(t.project,"open_task_private",e)},expression:"project.open_task_private"}})],1)])]),a("a-tab-pane",{key:"4",attrs:{forceRender:""}},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"deployment-unit"}}),t._v("任务流转 ")],1),a("div",{staticClass:"config-content"},[a("div",{staticClass:"content-item task-workflow"},[a("div",{staticClass:"infos",staticStyle:{"padding-right":"0"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.doTaskWorkflowView,expression:"!doTaskWorkflowView"}]},[a("p",[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.doTaskWorkflow(null)}}},[t._v("创建规则")])],1),a("a-list",{staticClass:"task-workflow-list",attrs:{itemLayout:"horizontal",dataSource:t.taskWorkflowList},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a-tooltip",{attrs:{placement:"top",title:"编辑"}},[a("a",{staticClass:"muted m-r-sm",on:{click:function(a){return t.doTaskWorkflow(e)}}},[a("a-icon",{attrs:{type:"edit"}})],1)]),a("a-tooltip",{attrs:{placement:"top",title:"删除"}},[a("a",{staticClass:"muted",on:{click:function(a){return t.delTaskWorkflow(e.code)}}},[a("a-icon",{attrs:{type:"delete"}})],1)])],1),a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])],1)}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.doTaskWorkflowView,expression:"doTaskWorkflowView"}]},[a("div",{staticClass:"header"},[a("p",[a("a-button",{staticClass:"middle-btn m-r-sm",attrs:{size:"large"},on:{click:function(e){return t.saveTaskWorkflow(!1)}}},[t._v("取消")]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large",type:"primary",disabled:!t.canSaveTaskWorkflow},on:{click:function(e){return t.saveTaskWorkflow(!0)}}},[t._v("保存")])],1)]),a("div",{staticClass:"workflow-content"},[t.loadingWorkflowRule?t._e():[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("规则名称")]),a("a-input",{attrs:{size:"large"},model:{value:t.currentTaskWorkflowRule.taskWorkflowName,callback:function(e){t.$set(t.currentTaskWorkflowRule,"taskWorkflowName",e)},expression:"currentTaskWorkflowRule.taskWorkflowName"}})],1),a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("选择任务列表")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"firstObj")}},model:{value:t.currentTaskWorkflowRule.firstObj,callback:function(e){t.$set(t.currentTaskWorkflowRule,"firstObj",e)},expression:"currentTaskWorkflowRule.firstObj"}},t._l(t.taskStages,(function(e,s){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1),t.currentTaskWorkflowRule.firstObj?[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("选择条件")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"firstAction.action")}},model:{value:t.currentTaskWorkflowRule.firstAction.action,callback:function(e){t.$set(t.currentTaskWorkflowRule.firstAction,"action",e)},expression:"currentTaskWorkflowRule.firstAction.action"}},t._l(t.taskWorkflowRuleActions,(function(e,s){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),-1!=t.currentTaskWorkflowRule.firstAction.action?[3==t.currentTaskWorkflowRule.firstAction.action?[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("选择执行者")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"firstAction.value")}},model:{value:t.currentTaskWorkflowRule.firstAction.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.firstAction,"value",e)},expression:"currentTaskWorkflowRule.firstAction.value"}},t._l(t.projectMembers,(function(e,s){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1)]:t._e(),a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("选择结果")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"firstResult.action")}},model:{value:t.currentTaskWorkflowRule.firstResult.action,callback:function(e){t.$set(t.currentTaskWorkflowRule.firstResult,"action",e)},expression:"currentTaskWorkflowRule.firstResult.action"}},t._l(t.taskWorkflowRuleTypes,(function(e,s){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),0===t.currentTaskWorkflowRule.firstResult.action?[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("流转任务列表")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"firstResult.value")}},model:{value:t.currentTaskWorkflowRule.firstResult.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.firstResult,"value",e)},expression:"currentTaskWorkflowRule.firstResult.value"}},t._l(t.taskStages,(function(e,s){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1),t.currentTaskWorkflowRule.firstResult.value?[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("选择执行者")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"lastResult.value")}},model:{value:t.currentTaskWorkflowRule.lastResult.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.lastResult,"value",e)},expression:"currentTaskWorkflowRule.lastResult.value"}},t._l(t.projectMembers,(function(e,s){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1)]:t._e(),[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("修改任务状态")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"state.value")}},model:{value:t.currentTaskWorkflowRule.state.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.state,"value",e)},expression:"currentTaskWorkflowRule.state.value"}},t._l(t.taskStates,(function(e,s){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)]]:t._e(),3===t.currentTaskWorkflowRule.firstResult.action?[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("选择执行者")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"firstAction.action")}},model:{value:t.currentTaskWorkflowRule.firstResult.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.firstResult,"value",e)},expression:"currentTaskWorkflowRule.firstResult.value"}},t._l(t.projectMembers,(function(e,s){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1),t.currentTaskWorkflowRule.firstResult.value?[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("流转任务列表")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"lastResult.value")}},model:{value:t.currentTaskWorkflowRule.lastResult.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.lastResult,"value",e)},expression:"currentTaskWorkflowRule.lastResult.value"}},t._l(t.taskStages,(function(e,s){return a("a-select-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1)]:t._e(),[a("div",{staticClass:"workflow-rule-item"},[a("p",[t._v("修改任务状态")]),a("a-select",{attrs:{size:"large"},on:{change:function(e){return t.workflowRuleChange(e,"state.value")}},model:{value:t.currentTaskWorkflowRule.state.value,callback:function(e){t.$set(t.currentTaskWorkflowRule.state,"value",e)},expression:"currentTaskWorkflowRule.state.value"}},t._l(t.taskStates,(function(e,s){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)]]:t._e()]:t._e()]:t._e()],a("div",{staticClass:"text-center"},[a("a-spin",{attrs:{spinning:t.loadingWorkflowRule}})],1)],2)])])])])]),a("a-tab-pane",{key:"5"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"ellipsis"}}),t._v("更多 ")],1),a("div",{staticClass:"config-content more-config"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目操作")]),a("div",{staticClass:"item-tips muted"},[t._v("您可以执行以下操作")]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large"},on:{click:t.archiveProject}},[t.project.archive?a("span",[t._v("取消归档")]):t._e(),t.project.archive?t._e():a("span",[t._v("归档项目")])]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large"},on:{click:t.quitProject}},[t._v("退出")]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large",type:"danger"},on:{click:t.delProject}},[t.project.deleted?a("span",[t._v("恢复项目")]):t._e(),t.project.deleted?t._e():a("span",[t._v("移至回收站")])])],1)])])])],1)},o=[],i=(a("ac6a"),a("a481"),a("c5f6"),a("7f7f"),a("6be7")),n=a("5f8b"),r=a("9f09"),c=a("c030"),l=a("97a8"),u=a("2f14"),d={name:"projectConfig",props:{code:{type:[String],default:function(){return""}}},data:function(){return{loading:!1,tabKey:"1",project:{},taskWorkflowList:[],doTaskWorkflowView:!1,loadingWorkflowRule:!1,taskWorkflow:null,taskWorkflowRuleList:[],currentTaskWorkflowRule:{taskWorkflowName:"",firstObj:"",firstAction:{action:-1,value:""},firstResult:{action:-1,value:""},lastResult:{action:-1,value:""},state:{action:-1,value:-1}},taskWorkflowRuleActions:[{id:-1,name:"请选择"},{id:0,name:"增加任务、被移动"},{id:1,name:"被完成"},{id:2,name:"被重做"},{id:3,name:"设置执行人"}],taskWorkflowRuleTypes:[{id:-1,name:"请选择"},{id:0,name:"自动流转到"},{id:3,name:"默认指派给"}],taskStates:[{id:-1,name:"不做修改"},{id:1,name:"已完成"},{id:2,name:"未完成"}],projectMembers:[],taskStages:[],uploadLoading:!1,uploadAction:Object(u["c"])("project/project/uploadCover")}},computed:{headers:function(){return Object(u["d"])()},canSaveTaskWorkflow:function(){return this.currentTaskWorkflowRule.taskWorkflowName.trim()&&this.currentTaskWorkflowRule.firstObj&&-1!=this.currentTaskWorkflowRule.firstAction.action&&-1!=this.currentTaskWorkflowRule.firstResult.action&&this.currentTaskWorkflowRule.firstResult.value}},watch:{code:function(){this.getProject()}},created:function(){this.getProject(),this.getTaskWorkflowList()},methods:{getProject:function(){var t=this;this.loading=!0,Object(i["h"])(this.code).then((function(e){t.loading=!1,t.project=e.data,t.project.open_prefix=!!e.data.open_prefix,t.project.open_begin_time=!!e.data.open_begin_time,t.project.open_task_private=!!e.data.open_task_private,t.project.auto_update_schedule=!!e.data.auto_update_schedule}))},getTaskWorkflowList:function(){var t=this;Object(n["d"])({projectCode:this.code}).then((function(e){t.taskWorkflowList=e.data}))},saveProject:function(){var t=this,e=this.project;Object(i["e"])({projectCode:e.code,name:e.name,description:e.description,cover:e.cover,private:e.private,prefix:e.prefix,task_board_theme:e.task_board_theme,open_prefix:Number(e.open_prefix),open_begin_time:Number(e.open_begin_time),open_task_private:Number(e.open_task_private),schedule:Number(e.schedule),auto_update_schedule:Number(e.auto_update_schedule)}).then((function(e){Object(u["a"])(e)&&(t.$emit("update",t.project),Object(l["b"])({title:"保存成功"},"notice","success"))}))},archiveProject:function(){var t=this;t.project.archive?this.$confirm({title:"取消归档项目？",content:"取消归档「".concat(this.project.name,"」后就可以正常使用了"),okText:"取消归档",okType:"primary",cancelText:"再想想",onOk:function(){return Object(i["j"])(t.code).then((function(e){Object(u["a"])(e)&&t.$router.replace("/project/list/my")})),Promise.resolve()}}):this.$confirm({title:"归档项目",content:"一旦将项目「".concat(this.project.name,"」归档，本项目和所含信息将会被移到「归档项目」内，其中的内容依然会被统计和搜索收录，归档项目可以随时恢复并继续使用。"),okText:"归档",okType:"danger",cancelText:"再想想",onOk:function(){return Object(i["d"])(t.code).then((function(e){Object(u["a"])(e)&&t.$router.replace("/project/archive")})),Promise.resolve()}})},delProject:function(){var t=this;t.project.deleted?this.$confirm({title:"确定恢复项目？",content:"恢复「".concat(this.project.name,"」后就可以正常使用了"),okText:"恢复项目",okType:"primary",cancelText:"再想想",onOk:function(){return Object(i["i"])(t.code).then((function(e){Object(u["a"])(e)&&t.$router.replace("/project/list/my")})),Promise.resolve()}}):this.$confirm({title:"确定放入回收站？",content:"一旦将项目「".concat(this.project.name,"」放入回收站，所有与项目有关的信息将会被放入回收站"),okText:"放入回收站",okType:"danger",cancelText:"再想想",onOk:function(){return Object(i["k"])(t.code).then((function(e){Object(u["a"])(e)&&t.$router.replace("/project/recycle")})),Promise.resolve()}})},quitProject:function(){var t=this;this.$confirm({title:"退出项目",content:"一旦你退出了该项目，你将不能查看任何关于该项目的信息。退出项目后，如果想重新加入，请联系项目管理员。",okText:"确定退出",okType:"primary",cancelText:"再想想",onOk:function(){return Object(i["g"])(t.code).then((function(e){Object(u["a"])(e)&&t.$router.replace("/project/list/my")})),Promise.resolve()}})},doTaskWorkflow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getTaskStages(),this.getProjectMembers(),this.taskWorkflow=t,t?(this.loadingWorkflowRule=!0,this.currentTaskWorkflowRule.taskWorkflowName=t.name,this.getTaskWorkflowRules(t.code)):this.currentTaskWorkflowRule={taskWorkflowName:"",firstObj:"",firstAction:{action:-1,value:""},firstResult:{action:-1,value:""},lastResult:{action:-1,value:""},state:{action:-1,value:-1},taskStates:[{id:-1,name:"不做修改"},{id:1,name:"已完成"},{id:2,name:"未完成"}]},this.doTaskWorkflowView=!0},saveTaskWorkflow:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.currentTaskWorkflowRule.firstResult.action?this.currentTaskWorkflowRule.lastResult.action=0:this.currentTaskWorkflowRule.lastResult.action=3;var a={taskWorkflowName:this.currentTaskWorkflowRule.taskWorkflowName,taskWorkflowRules:JSON.stringify(this.currentTaskWorkflowRule)};e&&(this.taskWorkflow?(a.taskWorkflowCode=this.taskWorkflow.code,Object(n["c"])(a).then((function(e){t.getTaskWorkflowList()}))):(a.projectCode=this.code,Object(n["e"])(a).then((function(e){t.getTaskWorkflowList()})))),this.doTaskWorkflowView=!1},getTaskStages:function(){var t=this;Object(r["a"])({projectCode:this.code}).then((function(e){var a=[{code:"",name:"不选择"}];e.data.forEach((function(t){a.push(t)})),t.taskStages=a}))},getTaskWorkflowRules:function(t){var e=this;Object(n["a"])({taskWorkflowCode:t}).then((function(t){e.loadingWorkflowRule=!1;var a=t.data;e.taskWorkflowRuleList=a,a&&(e.currentTaskWorkflowRule.firstObj=a[0].object_code,e.currentTaskWorkflowRule.firstAction.action=a[1].action,e.currentTaskWorkflowRule.firstAction.value=a[1].object_code,e.currentTaskWorkflowRule.firstResult.action=a[2].action,e.currentTaskWorkflowRule.firstResult.value=a[2].object_code,a.length>=4&&(a[3].object_code?(e.currentTaskWorkflowRule.lastResult.action=a[3].action,e.currentTaskWorkflowRule.lastResult.value=a[3].object_code):(e.currentTaskWorkflowRule.state.action=a[3].action,e.currentTaskWorkflowRule.state.value=a[3].action),a.length>=5&&(a[4].object_code?(e.currentTaskWorkflowRule.lastResult.action=a[4].action,e.currentTaskWorkflowRule.lastResult.value=a[4].object_code):(e.currentTaskWorkflowRule.state.action=a[4].action,e.currentTaskWorkflowRule.state.value=a[4].action))))}))},delTaskWorkflow:function(t){var e=this;this.$confirm({title:"删除规则?",content:"您确定要删除该规则吗？",okText:"删除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(n["b"])({taskWorkflowCode:t}).then((function(t){Object(u["a"])(t)&&e.getTaskWorkflowList()})),Promise.resolve()}})},getProjectMembers:function(){var t=this;Object(c["c"])({projectCode:this.code,pageSize:100}).then((function(e){var a=[{code:"",name:"不选择"}];e.data.list.forEach((function(t){a.push(t)})),t.projectMembers=a}))},workflowRuleChange:function(t,e){console.log(t),console.log(e),"firstAction.action"==e&&(this.currentTaskWorkflowRule.firstAction.value=""),"firstResult.value"==e&&(this.currentTaskWorkflowRule.lastResult.value=""),"firstResult.action"==e&&(this.currentTaskWorkflowRule.firstResult.value="",this.currentTaskWorkflowRule.lastResult.value="")},handleChange:function(t){var e=this;"uploading"!==t.file.status?"done"===t.file.status&&Object(u["e"])(t.file.originFileObj,(function(){e.project.cover=t.file.response.data.url,e.uploadLoading=!1,Object(l["b"])({title:"封面上传成功"},"notice","success")})):this.uploadLoading=!0},beforeUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("图片不能超过2MB!"),e}}},f=d,p=(a("9c6f"),a("2877")),m=Object(p["a"])(f,s,o,!1,null,null,null);e["default"]=m.exports},5922:function(t,e,a){},7934:function(t,e,a){"use strict";var s=a("d22a"),o=a.n(s);o.a},"9c6f":function(t,e,a){"use strict";var s=a("39bf"),o=a.n(s);o.a},aeb2:function(t,e,a){"use strict";var s=a("5922"),o=a.n(s);o.a},c87a:function(t,e,a){},d22a:function(t,e,a){},d3a1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"invite-project-member",attrs:{width:500,title:t.actionInfo.modalTitle,footer:null},on:{cancel:t.cancel},model:{value:t.actionInfo.modalStatus,callback:function(e){t.$set(t.actionInfo,"modalStatus",e)},expression:"actionInfo.modalStatus"}},[a("div",{staticClass:"header"},[a("span",[t._v("账号邀请")]),a("a",{on:{click:t.createInviteLink}},[t._v("通过链接邀请")])]),a("div",{staticClass:"search-content m-b"},[a("a-input",{attrs:{placeholder:"输入昵称或邮箱查找"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("vue-scroll",[a("div",{staticClass:"member-list"},[a("a-list",{staticClass:"project-list",attrs:{itemLayout:"horizontal",loading:t.searching,dataSource:t.list,locale:{emptyText:t.keyword&&t.keyword.length>1?"没有搜索到相关成员":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("span",{attrs:{slot:"actions"},slot:"actions"},[e.joined?[a("a-icon",{attrs:{type:"user"}}),a("span",[t._v("已加入")])]:a("a-button",{attrs:{size:"small",type:"dashed",icon:"user-add"},on:{click:function(a){return t.invite(e)}}},[t._v("邀请")])],2),a("a-list-item-meta",{attrs:{description:e.email}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1)])],1),a("a-modal",{staticClass:"invite-link",attrs:{width:600,title:t.linkInfo.modalTitle,footer:null},model:{value:t.linkInfo.modalStatus,callback:function(e){t.$set(t.linkInfo,"modalStatus",e)},expression:"linkInfo.modalStatus"}},[a("div",{staticClass:"header"},[a("p",[t._v("链接有效日期："+t._s(t.linkInfo.overTime))]),a("a-input-search",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.linkInfo.link,expression:"linkInfo.link",arg:"copy"}],attrs:{size:"large",enterButton:"复制链接"},model:{value:t.linkInfo.link,callback:function(e){t.$set(t.linkInfo,"link",e)},expression:"linkInfo.link"}})],1)])],1)},o=[],i=(a("28a5"),a("b54a"),a("386d"),a("c5f6"),a("2ef0")),n=a.n(i),r=a("9f5d"),c=a("2f14"),l=a("82f8"),u={name:"inviteProjectMember",props:{value:{type:Boolean,default:function(){return!1}},projectCode:{type:[String,Number],default:function(){return""}}},data:function(){return{form:this.$form.createForm(this),actionInfo:{modalStatus:this.value,confirmLoading:!1,modalTitle:"邀请新成员"},linkInfo:{modalStatus:!1,confirmLoading:!1,modalTitle:"邀请成员",link:"",overTime:""},keyword:"",searching:!1,list:[]}},watch:{value:function(t){this.actionInfo.modalStatus=t},keyword:function(){this.search()}},created:function(){this.getMembers()},methods:{getMembers:function(){var t=this;Object(r["a"])({projectCode:t.projectCode}).then((function(e){t.list=e.data}))},invite:function(t){Object(r["b"])(t.memberCode,this.projectCode).then((function(e){var a=Object(c["a"])(e);a&&(t.joined=!0)}))},createInviteLink:function(){var t=this;this.linkInfo.link?this.linkInfo.modalStatus=!0:Object(l["a"])({inviteType:"project",sourceCode:this.projectCode}).then((function(e){var a=Object(c["a"])(e);a&&(t.linkInfo.modalStatus=!0,t.linkInfo.link=window.location.href.split("#")[0]+"#/invite_from_link/"+e.data.code,t.linkInfo.overTime=moment(e.data.code.over_time).format("YYYY年M月D日 HH:mm"))}))},search:n.a.debounce((function(){var t=this;if(this.keyword||(this.list=[]),this.keyword.length<=1)return this.getMembers(),!1;this.searching=!0,Object(r["d"])(this.keyword,this.projectCode).then((function(e){t.searching=!1,t.list=e.data}))}),500),cancel:function(){this.actionInfo.modalStatus=!1,this.$emit("input",this.actionInfo.modalStatus)}}},d=u,f=(a("3ed7"),a("2877")),p=Object(f["a"])(d,s,o,!1,null,null,null);e["default"]=p.exports},e8d3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"member-menu project-member-menu"},[a("a-spin",{attrs:{spinning:t.projectMemberLoading||t.taskMemberLoading}},[a("div",{staticClass:"search-content"},[a("a-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("div",{staticClass:"member-list"},[a("vue-scroll",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.keyword,expression:"!keyword"}],staticClass:"list-group"},[a("span",{staticClass:"title muted"},[t._v("参与者")]),a("a-list",{directives:[{name:"show",rawName:"v-show",value:t.taskMemberList.length,expression:"taskMemberList.length"}],staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.taskMemberList},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{staticClass:"member-list-item",class:{owner:e.is_owner},nativeOn:{click:function(a){return t.addToInvite(e.code,e.is_owner)}}},[a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1),a("div",{staticClass:"list-group"},[a("span",{staticClass:"title muted"},[t._v("其他成员")]),a("div",{staticClass:"member-list-item ant-list-item",on:{click:function(e){return t.addToInvite("all")}}},[a("div",{staticClass:"ant-list-item-meta"},[a("div",{staticClass:"ant-list-item-meta-avatar"},[a("a-avatar",{attrs:{icon:"user"}})],1),a("div",{staticClass:"ant-list-item-meta-content"},[a("h4",{staticClass:"ant-list-item-meta-title"},[a("span",[t._v("所有项目成员")])])])]),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.showCheck("all"),expression:"showCheck('all')"}],staticClass:"ant-list-item-action"},[a("li",[a("span",[a("a-icon",{attrs:{type:"check"}})],1)])])]),a("a-list",{staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.projectMemberList,locale:{emptyText:t.keyword&&t.keyword.length>1?"该成员不在项目成员列表中":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return t.showMember(e)?a("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(a){return t.addToInvite(e.code,!1)}}},[a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1):t._e()}}],null,!0)})],1)])],1),a("div",{staticClass:"footer"},[a("a-button",{attrs:{type:"primary",size:"large",block:""},on:{click:t.inviteTaskMember}},[t._v("确定")])],1)])],1)},o=[],i=(a("7f7f"),a("20d6"),a("7514"),a("ac6a"),a("386d"),a("c5f6"),a("2ef0")),n=a.n(i),r=a("9f5d"),c=a("d8bc"),l={name:"projectMemberMenu",props:{projectCode:{type:[String,Number],default:function(){return""}},taskCode:{type:[String,Number],default:function(){return""}}},data:function(){return{keyword:"",searching:!1,taskMemberLoading:!0,projectMemberLoading:!0,showInviteMember:!1,taskMemberList:[],projectMemberList:[],listTemp:[],projectMemberListCopy:[],initAllMember:!1}},created:function(){this.init()},watch:{keyword:function(){this.search()}},methods:{init:function(){var t=this;this.projectMemberLoading=!0,this.taskMemberLoading=!0,this.projectCode&&Object(r["c"])({projectCode:this.projectCode,pageSize:300}).then((function(e){t.projectMemberList=e.data.list,t.projectMemberListCopy=e.data.list,t.projectMemberLoading=!1})),this.taskCode&&Object(c["b"])({taskCode:this.taskCode,pageSize:300}).then((function(e){t.taskMemberList=e.data.list,e.data.list.forEach((function(e){t.listTemp.push(e.code)})),t.taskMemberLoading=!1}))},showMember:function(t){var e=!0;return this.taskMemberList.forEach((function(a){t.code==a.code&&(e=!1)})),e},showCheck:function(t){if("all"==t&&!this.initAllMember)return!1;var e=this.listTemp.find((function(e){return e==t}));return!!e||void 0},addToInvite:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return!1;"all"==t&&(this.initAllMember=!0);var a=this.listTemp.findIndex((function(e){return e==t}));-1!==a?this.listTemp.splice(a,1):this.listTemp.push(t)},inviteTaskMember:function(){var t=this,e=[];this.taskMemberList.forEach((function(a){var s=t.listTemp.findIndex((function(t){return t==a.code}));-1===s&&e.push(a.code)})),this.listTemp.forEach((function(a){var s=t.taskMemberList.findIndex((function(t){return a==t.code}));-1===s&&e.push(a)})),e?Object(c["a"])({memberCodes:JSON.stringify(e),taskCode:this.taskCode}).then((function(){t.$emit("close")})):this.$emit("close")},search:n.a.debounce((function(){var t=this;if(this.keyword=this.keyword.trim(),this.keyword||(this.projectMemberList=JSON.parse(JSON.stringify(this.projectMemberListCopy))),this.keyword.length<=1)return!1;this.searching=!0,this.projectMemberList=this.projectMemberList.filter((function(e){return-1!=e.name.indexOf(t.keyword)}))}),500)}},u=l,d=a("2877"),f=Object(d["a"])(u,s,o,!1,null,null,null);e["default"]=f.exports},f044:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"invite-department-member",attrs:{width:360,title:t.actionInfo.modalTitle,footer:null},on:{cancel:t.cancel},model:{value:t.actionInfo.modalStatus,callback:function(e){t.$set(t.actionInfo,"modalStatus",e)},expression:"actionInfo.modalStatus"}},[a("div",{staticClass:"header"},[a("span",[t._v("账号邀请")]),t.departmentCode?t._e():a("a",{on:{click:t.createInviteLink}},[t._v("通过链接邀请")])]),a("div",{staticClass:"search-content"},[a("a-input",{attrs:{placeholder:"输入昵称或邮箱查找"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("div",{staticClass:"member-list"},[a("a-list",{staticClass:"project-list",attrs:{itemLayout:"horizontal",loading:t.searching,dataSource:t.list,locale:{emptyText:t.keyword&&t.keyword.length>1?"没有搜索到相关成员":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("span",{attrs:{slot:"actions"},slot:"actions"},[e.joined?[a("a-icon",{attrs:{type:"user"}}),a("span",[t._v("已加入")])]:a("a-button",{attrs:{size:"small",type:"dashed",icon:"user-add"},on:{click:function(a){return t.invite(e)}}},[t._v("添加")])],2),a("a-list-item-meta",{attrs:{description:e.email}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1)]),a("a-modal",{staticClass:"invite-link",attrs:{width:600,title:t.linkInfo.modalTitle,footer:null},model:{value:t.linkInfo.modalStatus,callback:function(e){t.$set(t.linkInfo,"modalStatus",e)},expression:"linkInfo.modalStatus"}},[a("div",{staticClass:"header"},[a("p",[t._v("链接有效日期："+t._s(t.linkInfo.overTime))]),a("a-input-search",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.linkInfo.link,expression:"linkInfo.link",arg:"copy"}],attrs:{size:"large",enterButton:"复制链接"},model:{value:t.linkInfo.link,callback:function(e){t.$set(t.linkInfo,"link",e)},expression:"linkInfo.link"}})],1)])],1)},o=[],i=(a("28a5"),a("b54a"),a("386d"),a("c5f6"),a("2ef0")),n=a.n(i),r=a("7dc6"),c=a("2f14"),l=a("82f8"),u={name:"inviteDepartmentMember",props:{value:{type:Boolean,default:function(){return!1}},departmentCode:{type:[String,Number],default:function(){return""}}},data:function(){return{form:this.$form.createForm(this),actionInfo:{modalStatus:this.value,confirmLoading:!1,modalTitle:this.departmentCode?"添加成员至部门":"添加成员至组织"},linkInfo:{modalStatus:!1,confirmLoading:!1,modalTitle:"邀请成员",link:"",overTime:""},keyword:"",searching:!1,list:[]}},watch:{value:function(t){this.actionInfo.modalStatus=t},keyword:function(){this.search()}},created:function(){var t=this;this.departmentCode&&(this.searching=!0,Object(r["b"])(this.keyword,this.departmentCode).then((function(e){t.searching=!1,t.list=e.data})))},methods:{invite:function(t){var e=this;Object(r["a"])(t.accountCode,this.departmentCode).then((function(a){var s=Object(c["a"])(a);s&&(t.joined=!0,e.$emit("update",t))}))},createInviteLink:function(){var t=this;this.linkInfo.link?this.linkInfo.modalStatus=!0:Object(l["a"])({inviteType:"organization",sourceCode:this.$store.state.currentOrganization.code}).then((function(e){var a=Object(c["a"])(e);a&&(t.linkInfo.modalStatus=!0,t.linkInfo.link=window.location.href.split("#")[0]+"#/invite_from_link/"+e.data.code,t.linkInfo.overTime=moment(e.data.over_time).format("YYYY年M月D日 HH:mm"))}))},search:n.a.debounce((function(){var t=this;if(this.keyword||(this.list=[]),this.keyword.length<=1)return!1;this.searching=!0,Object(r["b"])(this.keyword,this.departmentCode).then((function(e){t.searching=!1,t.list=e.data}))}),500),cancel:function(){this.actionInfo.modalStatus=!1,this.$emit("input",this.actionInfo.modalStatus)}}},d=u,f=(a("f09a"),a("2877")),p=Object(f["a"])(d,s,o,!1,null,null,null);e["default"]=p.exports},f09a:function(t,e,a){"use strict";var s=a("c87a"),o=a.n(s);o.a},f8c7:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentProject?a("div",{attrs:{id:"project-select"}},[a("a-dropdown",{staticClass:"action-item",attrs:{trigger:["click"],placement:"bottomCenter"},model:{value:t.visibleMenu,callback:function(e){t.visibleMenu=e},expression:"visibleMenu"}},[a("a-tooltip",{attrs:{mouseEnterDelay:.3,title:t.currentProject.name}},[a("a",{staticClass:"project-select",staticStyle:{color:"#333"},on:{click:function(e){t.visibleMenu=!0}}},[a("span",[t._v(t._s(t.currentProject.name))]),a("span",{staticClass:"m-l-xs"},[a("a-icon",{attrs:{type:"down"}})],1)])]),a("div",{staticClass:"middle-menu member-menu project-select-menu",attrs:{slot:"overlay"},slot:"overlay"},[a("div",{staticClass:"search-content"},[a("a-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("div",{staticClass:"member-list"},[a("vue-scroll",[a("div",{staticClass:"list-group"},[a("a-list",{staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.projectList,locale:{emptyText:t.keyword&&t.keyword.length>1?"没有找到该项目":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(a){return t.changeProject(e.code)}}},[a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.cover},slot:"avatar"})],1)],1)}}],null,!1,3141279394)})],1)])],1)])],1)],1):t._e()},o=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("386d"),a("bd86")),n=a("2ef0"),r=a.n(n),c=a("5880"),l=a("24d2"),u=a("1b80");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"ProjectSelect",props:{code:{type:[String],default:function(){return""}}},data:function(){return{visibleMenu:!1,keyword:"",loading:!1,currentProject:null,projectList:[],projectListCopy:[],projectTotal:0}},mixins:[u["a"]],computed:f({},Object(c["mapState"])({currentOrganization:function(t){return t.currentOrganization},organizationList:function(t){return t.organizationList}})),watch:{code:function(){this.init()},keyword:function(){this.search()}},created:function(){this.init()},methods:{init:function(){this.getProject(),this.getProjectList(!0)},getProject:function(){var t=this;Object(l["b"])(this.code).then((function(e){t.currentProject=e.data}))},getProjectList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=e,this.requestData.pageSize=50,this.requestData.archive=-1,Object(l["c"])(this.requestData).then((function(e){t.projectList=e.data.list,t.projectListCopy=e.data.list,t.projectTotal=e.data.total,t.loading=!1}))},changeProject:function(t){this.visibleMenu=!1,this.$router.push("/project/space/task/"+t)},showCheck:function(t){if(t==this.code)return!0},search:r.a.debounce((function(){var t=this;if(this.keyword=this.keyword.trim(),this.keyword||(this.projectList=JSON.parse(JSON.stringify(this.projectListCopy))),this.keyword.length<=1)return!1;this.projectList=this.projectList.filter((function(e){return-1!=e.name.indexOf(t.keyword)}))}),500),getPopup:function(){return document.getElementById("project-select")}}},m=p,k=(a("7934"),a("2877")),v=Object(k["a"])(m,s,o,!1,null,null,null);e["default"]=v.exports}}]);