(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2011c0bd","chunk-2011c0bd"],{"092e":function(e,t,a){},"25f0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),e.selectedRowKeys.length>0?a("a-button",{attrs:{ghost:"",type:"primary",icon:"delete"},on:{click:e.batchDel}},[e._v("批量删除\n    ")]):e._e()],1),a("div",[a("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[a("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v("已选择 "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项  \n      "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),a("a-table",{attrs:{columns:e.columns,size:"middle",pagination:!1,dataSource:e.dataSource,loading:e.loading,expandedRowKeys:e.expandedRowKeys,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{expandedRowsChange:e.handleExpandedRowsChange},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("\n            更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDetail(n)}}},[e._v("详情")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSub(n)}}},[e._v("添加子菜单")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDataRule(n)}}},[e._v("数据规则")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[e._v("删除")])])],1)],1)],1)],1)}},{key:"url",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e,length:25}})],1)}},{key:"component",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e}})],1)}}])})],1),a("permission-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),a("permission-data-rule-list",{ref:"PermissionDataRuleList",on:{ok:e.modalFormOk}})],1)},s=[],r=a("b90e"),o=a("4ec3"),i=a("b65a"),l=a("56cd"),c=a("d579"),d=[{title:"菜单名称",dataIndex:"name",key:"name"},{title:"菜单类型",dataIndex:"menuType",key:"menuType",customRender:function(e){return 0==e?"菜单":1==e?"菜单":2==e?"按钮/权限":e}},{title:"icon",dataIndex:"icon",key:"icon"},{title:"组件",dataIndex:"component",key:"component",scopedSlots:{customRender:"component"}},{title:"路径",dataIndex:"url",key:"url",scopedSlots:{customRender:"url"}},{title:"排序",dataIndex:"sortNo",key:"sortNo"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],u={name:"PermissionList",mixins:[i["a"]],components:{PermissionDataRuleList:l["default"],PermissionModal:r["default"],JEllipsis:c["default"]},data:function(){return{description:"这是菜单管理页面",columns:d,loading:!1,expandedRowKeys:[],url:{list:"/sys/permission/list",delete:"/sys/permission/delete",deleteBatch:"/sys/permission/deleteBatch"}}},methods:{loadData:function(){var e=this;this.dataSource=[],Object(o["u"])().then((function(t){t.success&&(console.log(t.result),e.dataSource=t.result)}))},handleDataRule:function(e){this.$refs.PermissionDataRuleList.edit(e)},handleAddSub:function(e){this.$refs.modalForm.title="添加子菜单",this.$refs.modalForm.localMenuType=1,this.$refs.modalForm.disableSubmit=!1,this.$refs.modalForm.edit({status:"1",permsType:"1",route:!0,parentId:e.id})},handleExpandedRowsChange:function(e){this.expandedRowKeys=e}}},m=u,p=(a("27a3"),a("2877")),y=Object(p["a"])(m,n,s,!1,null,"278adfbc",null);t["default"]=y.exports},"27a3":function(e,t,a){"use strict";var n=a("ad77"),s=a.n(n);s.a},2977:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",[a("a-tabs",{attrs:{defaultActiveKey:"1"},on:{change:e.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"登录日志"}}),a("a-tab-pane",{key:"2",attrs:{tab:"操作日志"}})],1)],1),a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery(t)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:8}},[a("a-form-item",{attrs:{label:"搜索日志"}},[a("a-input",{attrs:{placeholder:"请输入搜索关键词"},model:{value:e.queryParam.keyWord,callback:function(t){e.$set(e.queryParam,"keyWord",t)},expression:"queryParam.keyWord"}})],1)],1),a("a-col",{attrs:{md:6,sm:10}},[a("a-form-item",{attrs:{label:"创建时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-range-picker",{staticStyle:{width:"210px"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:e.onDateChange,ok:e.onDateOk},model:{value:e.queryParam.createTimeRange,callback:function(t){e.$set(e.queryParam,"createTimeRange",t)},expression:"queryParam.createTimeRange"}})],1)],1),"2"===e.tabKey?a("a-col",{attrs:{md:5,sm:8}},[a("a-form-item",{staticStyle:{left:"10px"},attrs:{label:"操作类型"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择操作类型",dictCode:"operate_type"},model:{value:e.queryParam.operateType,callback:function(t){e.$set(e.queryParam,"operateType",t)},expression:"queryParam.operateType"}})],1)],1):e._e(),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-button",{staticStyle:{left:"10px"},attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px",left:"10px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)],1)],1)],1)],1),a("a-table",{ref:"table",attrs:{size:"middle",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.queryParam.logType,expression:"queryParam.logType==2"}],staticStyle:{margin:"0"}},[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("a-badge",{staticStyle:{"vertical-align":"middle"},attrs:{status:"success"}}),a("span",{staticStyle:{"vertical-align":"middle"}},[e._v("请求方法:"+e._s(t.method))])],1),a("div",[a("a-badge",{staticStyle:{"vertical-align":"middle"},attrs:{status:"processing"}}),a("span",{staticStyle:{"vertical-align":"middle"}},[e._v("请求参数:"+e._s(t.requestParam))])],1)])}},{key:"logContent",fn:function(e,t){return a("span",{},[a("j-ellipsis",{attrs:{value:e,length:40}})],1)}}])})],1)},s=[],r=a("ca00"),o=a("b65a"),i=a("d579"),l={name:"LogList",mixins:[o["a"]],components:{JEllipsis:i["default"]},data:function(){return{description:"这是日志管理页面",queryParam:{ipInfo:"",createTimeRange:[],logType:"1",keyWord:""},tabKey:"1",columns:[{title:"#",dataIndex:"",key:"rowIndex",align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"日志内容",align:"left",dataIndex:"logContent",scopedSlots:{customRender:"logContent"},sorter:!0},{title:"操作人ID",dataIndex:"userid",align:"center",sorter:!0},{title:"操作人名称",dataIndex:"username",align:"center",sorter:!0},{title:"IP",dataIndex:"ip",align:"center",sorter:!0},{title:"耗时(毫秒)",dataIndex:"costTime",align:"center",sorter:!0},{title:"日志类型",dataIndex:"logType_dictText",align:"center"},{title:"创建时间",dataIndex:"createTime",align:"center",sorter:!0}],operateColumn:{title:"操作类型",dataIndex:"operateType_dictText",align:"center"},labelCol:{xs:{span:1},sm:{span:2}},wrapperCol:{xs:{span:10},sm:{span:16}},url:{list:"/sys/log/list"}}},methods:{getQueryParams:function(){console.log(this.queryParam.createTimeRange);var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,delete e.createTimeRange,Object(r["h"])(e)},searchReset:function(){var e=this,t=e.queryParam.logType;e.queryParam={},e.queryParam.logType=t,e.loadData(this.ipagination.current)},callback:function(e){2==e?(this.tabKey="2",this.columns.splice(7,0,this.operateColumn)):9==this.columns.length&&(this.tabKey="1",this.columns.splice(7,1));var t=this;t.queryParam.logType=e,t.loadData()},onDateChange:function(e,t){console.log(t[0],t[1]),this.queryParam.createTime_begin=t[0],this.queryParam.createTime_end=t[1]},onDateOk:function(e){console.log(e)}}},c=l,d=(a("43a0"),a("2877")),u=Object(d["a"])(c,n,s,!1,null,"ced7e644",null);t["default"]=u.exports},"315e":function(e,t,a){"use strict";var n=a("d90d"),s=a.n(n);s.a},"43a0":function(e,t,a){"use strict";var n=a("704d"),s=a.n(n);s.a},"56cd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"数据权限规则",width:e.drawerWidth,visible:e.visible,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"}},on:{close:e.onClose}},[a("div",{style:{padding:"10px",border:"1px solid #e9e9e9",background:"#fff"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery(t)}}},[a("a-row",{attrs:{gutter:12}},[a("a-col",{attrs:{md:8,sm:8}},[a("a-form-item",{attrs:{label:"规则名称",labelCol:{span:8},wrapperCol:{span:14,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.queryParam.ruleName,callback:function(t){e.$set(e.queryParam,"ruleName",t)},expression:"queryParam.ruleName"}})],1)],1),a("a-col",{attrs:{md:8,sm:8}},[a("a-form-item",{attrs:{label:"规则值",labelCol:{span:8},wrapperCol:{span:14,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入规则值"},model:{value:e.queryParam.ruleValue,callback:function(t){e.$set(e.queryParam,"ruleValue",t)},expression:"queryParam.ruleValue"}})],1)],1),a("a-col",{attrs:{md:7,sm:8}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1),a("a-row",[a("a-col",{attrs:{md:24,sm:24}},[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:e.addPermissionRule}},[e._v("添加")])],1)],1)],1),a("a-table",{ref:"table",attrs:{rowKey:"id",size:"middle",columns:e.columns,dataSource:e.dataSource,loading:e.loading,rowClassName:e.getRowClassname},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v("编辑\n          ")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[e._v("删除")])])],1)}}])})],1)]),a("permission-data-rule-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},s=[],r=a("4ec3"),o=a("b65a"),i=a("7c33"),l=[{title:"规则名称",dataIndex:"ruleName",key:"ruleName"},{title:"规则字段",dataIndex:"ruleColumn",key:"ruleColumn"},{title:"规则值",dataIndex:"ruleValue",key:"ruleValue"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],c={name:"PermissionDataRuleList",mixins:[o["a"]],components:{PermissionDataRuleModal:i["default"]},data:function(){return{queryParam:{},drawerWidth:650,columns:l,permId:"",visible:!1,form:this.$form.createForm(this),loading:!1,url:{list:"/sys/permission/getPermRuleListByPermId",delete:"/sys/permission/deletePermissionRule"}}},created:function(){this.resetScreenSize()},methods:{loadData:function(){if(this.permId){var e=this;this.dataSource=[];var t=this.getQueryParams();Object(r["v"])(t).then((function(t){t.success&&(e.dataSource=t.result)}))}},edit:function(e){e.id&&(this.visible=!0,this.permId=e.id),this.queryParam={},this.queryParam.permissionId=e.id,this.visible=!0,this.loadData(),this.resetScreenSize()},addPermissionRule:function(){this.$refs.modalForm.add(this.permId),this.$refs.modalForm.title="新增"},searchQuery:function(){var e=this,t=this.getQueryParams();t.permissionId=this.permId,Object(r["G"])(t).then((function(t){t.success&&(e.dataSource=t.result)}))},searchReset:function(){this.queryParam={},this.queryParam.permissionId=this.permId,this.loadData(1)},onClose:function(){this.visible=!1},resetScreenSize:function(){var e=document.body.clientWidth;this.drawerWidth=e<500?e:650},getRowClassname:function(e){if(1!=e.status)return"data-rule-invalid"}}},d=c,u=(a("315e"),a("2877")),m=Object(u["a"])(d,n,s,!1,null,null,null);t["default"]=m.exports},"676f":function(e,t,a){"use strict";var n=a("7111"),s=a.n(n);s.a},"704d":function(e,t,a){},7111:function(e,t,a){},"7a9d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery(t)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:10}},[a("a-form-item",{attrs:{label:"任务类名"}},[a("a-input",{attrs:{placeholder:"请输入任务类名"},model:{value:e.queryParam.jobClassName,callback:function(t){e.$set(e.queryParam,"jobClassName",t)},expression:"queryParam.jobClassName"}})],1)],1),a("a-col",{attrs:{md:6,sm:10}},[a("a-form-item",{attrs:{label:"任务状态"}},[a("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"0"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"-1"}},[e._v("停止")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:10}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls("定时任务信息")}}},[e._v("导出")]),a("a-upload",{attrs:{name:"file",showUploadList:!1,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[a("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1),e.selectedRowKeys.length>0?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.batchDel}},[a("a-icon",{attrs:{type:"delete"}}),e._v("删除")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),a("div",[a("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[a("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v(" 已选择 "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项\n      "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),a("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"description",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e,length:20}})],1)}},{key:"parameterRender",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e,length:20}})],1)}},{key:"action",fn:function(t,n){return a("span",{},[-1==n.status?a("a",{on:{click:function(t){return e.resumeJob(n)}}},[e._v("启动")]):e._e(),0==n.status?a("a",{on:{click:function(t){return e.pauseJob(n)}}},[e._v("停止")]):e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[e._v("删除")])])],1)],1)],1)],1)}},{key:"customRenderStatus",fn:function(t){return[0==t?a("a-tag",{attrs:{color:"green"}},[e._v("已启动")]):e._e(),-1==t?a("a-tag",{attrs:{color:"orange"}},[e._v("已暂停")]):e._e()]}}])})],1),a("quartzJob-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},s=[],r=(a("ac6a"),a("456d"),a("077e")),o=a("0fea"),i=a("b65a"),l=a("d579"),c={name:"QuartzJobList",mixins:[i["a"]],components:{QuartzJobModal:r["default"],JEllipsis:l["default"]},data:function(){return{description:"定时任务在线管理",queryParam:{},columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"任务类名",align:"center",dataIndex:"jobClassName",sorter:!0},{title:"cron表达式",align:"center",dataIndex:"cronExpression"},{title:"参数",align:"center",width:150,dataIndex:"parameter",scopedSlots:{customRender:"parameterRender"}},{title:"描述",align:"center",width:250,dataIndex:"description",scopedSlots:{customRender:"description"}},{title:"状态",align:"center",dataIndex:"status",scopedSlots:{customRender:"customRenderStatus"},filterMultiple:!1,filters:[{text:"已启动",value:"0"},{text:"已暂停",value:"-1"}]},{title:"操作",dataIndex:"action",align:"center",width:180,scopedSlots:{customRender:"action"}}],url:{list:"/sys/quartzJob/list",delete:"/sys/quartzJob/delete",deleteBatch:"/sys/quartzJob/deleteBatch",pause:"/sys/quartzJob/pause",resume:"/sys/quartzJob/resume",exportXlsUrl:"sys/quartzJob/exportXls",importExcelUrl:"sys/quartzJob/importExcel"}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.filters.status=t.status[0],this.ipagination=e,this.loadData()},pauseJob:function(e){var t=this;this.$confirm({title:"确认暂停",content:"是否暂停选中任务?",onOk:function(){Object(o["getAction"])(t.url.pause,{jobClassName:e.jobClassName}).then((function(e){e.success?(t.$message.success(e.message),t.loadData(),t.onClearSelected()):t.$message.warning(e.message)}))}})},resumeJob:function(e){var t=this;this.$confirm({title:"确认启动",content:"是否启动选中任务?",onOk:function(){Object(o["getAction"])(t.url.resume,{jobClassName:e.jobClassName}).then((function(e){e.success?(t.$message.success(e.message),t.loadData(),t.onClearSelected()):t.$message.warning(e.message)}))}})}}},d=c,u=(a("879a"),a("2877")),m=Object(u["a"])(d,n,s,!1,null,"5dd1db74",null);t["default"]=m.exports},"879a":function(e,t,a){"use strict";var n=a("092e"),s=a.n(n);s.a},ad77:function(e,t,a){},cd6d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),e.selectedRowKeys.length>0?a("a-button",{attrs:{ghost:"",type:"primary",icon:"delete"},on:{click:e.batchDel}},[e._v("批量删除\n    ")]):e._e()],1),a("div",[a("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[a("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v("已选择 "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项  \n      "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),a("a-table",{attrs:{columns:e.columns,size:"middle",pagination:!1,dataSource:e.dataSource,loading:e.loading,expandedRowKeys:e.expandedRowKeys,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{expand:e.expandSubmenu,expandedRowsChange:e.handleExpandedRowsChange},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("\n            更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDetail(n)}}},[e._v("详情")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSub(n)}}},[e._v("添加子菜单")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDataRule(n)}}},[e._v("数据规则")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[e._v("删除")])])],1)],1)],1)],1)}},{key:"url",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e,length:25}})],1)}},{key:"component",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e}})],1)}}])})],1),a("permission-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),a("permission-data-rule-list",{ref:"PermissionDataRuleList",on:{ok:e.modalFormOk}})],1)},s=[],r=(a("6762"),a("2fdb"),a("ac6a"),a("b90e")),o=a("4ec3"),i=a("b65a"),l=a("56cd"),c=a("d579"),d=[{title:"菜单名称",dataIndex:"name",key:"name"},{title:"菜单类型",dataIndex:"menuType",key:"menuType",customRender:function(e){return 0==e?"菜单":1==e?"菜单":2==e?"按钮/权限":e}},{title:"icon",dataIndex:"icon",key:"icon"},{title:"组件",dataIndex:"component",key:"component",scopedSlots:{customRender:"component"}},{title:"路径",dataIndex:"url",key:"url",scopedSlots:{customRender:"url"}},{title:"排序",dataIndex:"sortNo",key:"sortNo"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],u={name:"PermissionListAsync",mixins:[i["a"]],components:{PermissionDataRuleList:l["default"],PermissionModal:r["default"],JEllipsis:c["default"]},data:function(){return{description:"这是菜单管理页面",columns:d,loading:!1,expandedRowKeys:[],url:{list:"/sys/permission/list",delete:"/sys/permission/delete",deleteBatch:"/sys/permission/deleteBatch"}}},methods:{loadData:function(){var e=this;this.loading=!0,Object(o["getSystemMenuList"])().then((function(t){if(t.success)return e.dataSource=t.result,e.loadDataByExpandedRows(e.dataSource)})).finally((function(){e.loading=!1}))},expandSubmenu:function(e,t){!e||t.children&&0!==t.children.length||Object(o["getSystemSubmenu"])({parentId:t.id}).then((function(e){e.success&&(t.children=e.result)}))},loadDataByExpandedRows:function(e){var t=this;return this.expandedRowKeys.length>0?Object(o["getSystemSubmenuBatch"])({parentIds:this.expandedRowKeys.join(",")}).then((function(a){if(a.success){var n=a.result,s=function e(a){a.forEach((function(a){t.expandedRowKeys.includes(a.id)&&(a.children=n[a.id],e(a.children))}))};s(e)}})):Promise.resolve()},handleDataRule:function(e){this.$refs.PermissionDataRuleList.edit(e)},handleAddSub:function(e){this.$refs.modalForm.title="添加子菜单",this.$refs.modalForm.localMenuType=1,this.$refs.modalForm.disableSubmit=!1,this.$refs.modalForm.edit({status:"1",permsType:"1",route:!0,parentId:e.id})},handleExpandedRowsChange:function(e){this.expandedRowKeys=e}}},m=u,p=(a("676f"),a("2877")),y=Object(p["a"])(m,n,s,!1,null,"621e6fac",null);t["default"]=y.exports},d90d:function(e,t,a){}}]);