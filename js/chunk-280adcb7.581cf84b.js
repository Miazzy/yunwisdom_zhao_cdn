(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-280adcb7","chunk-280adcb7","chunk-280adcb7"],{"4ea8":function(e,t,n){n("cdd9")},cdd9:function(e,t,n){(function(e){(function(t){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(){},i=function(e){return function(){return e}},o=function(e){return e},a=function(e){return function(){throw new Error(e)}},u=i(!1),c=i(!0),l=function(){return s},s=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},o={fold:function(e,t){return e()},is:u,isSome:u,isNone:c,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:t,map:l,each:r,bind:l,exists:u,forall:c,filter:l,equals:e,equals_:e,toArray:function(){return[]},toString:i("none()")};return Object.freeze&&Object.freeze(o),o}(),f=function(e){var t=i(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:c,isNone:u,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return f(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:s},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(u,(function(t){return n(e,t)}))}};return o},d=function(e){return null===e||void 0===e?s:f(e)},m={some:f,none:l,from:d},p=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},g=function(e){return function(t){return p(t)===e}},h=g("string"),v=g("object"),b=g("array"),y=g("boolean"),w=g("function"),T=g("number"),_=Array.prototype.slice,D=Array.prototype.push,x=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n)}},E=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!b(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);D.apply(t,e[n])}return t},A=function(e){return 0===e.length?m.none():m.some(e[0])},N=(w(Array.from)&&Array.from,function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return m.none()}),O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},O.apply(this,arguments)},I={},S={exports:I};(function(t,n,r,i){(function(i){if("object"===typeof n&&"undefined"!==typeof r)r.exports=i();else if("function"===typeof t&&t.amd)t([],i);else{var o;o="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:this,o.EphoxContactWrapper=i()}})((function(){return function(){function e(t,n,r){function o(u,c){if(!n[u]){if(!t[u]){var l="function"==typeof i&&i;if(!c&&l)return l(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};t[u][0].call(f.exports,(function(e){var n=t[u][1][e];return o(n||e)}),f,f.exports,e,t,n,r)}return n[u].exports}for(var a="function"==typeof i&&i,u=0;u<r.length;u++)o(r[u]);return o}return e}()({1:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function l(e){if(i===clearTimeout)return clearTimeout(e);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"===typeof clearTimeout?clearTimeout:u}catch(e){i=u}})();var s,f=[],d=!1,m=-1;function p(){d&&s&&(d=!1,s.length?f=s.concat(f):m=-1,f.length&&g())}function g(){if(!d){var e=c(p);d=!0;var t=f.length;while(t){s=f,f=[];while(++m<t)s&&s[m].run();m=-1,t=f.length}s=null,d=!1,l(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new h(e,t)),1!==f.length||d||c(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){(function(n){var r=setTimeout;function i(){}function o(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function u(e,t){while(3===e._state)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void l(t.promise,i)}c(t.promise,r)}else(1===e._state?c:l)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void s(e);if("function"===typeof n)return void d(o(n,t),e)}e._state=1,e._value=t,s(e)}catch(r){l(e,r)}}function l(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)u(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(r){if(n)return;n=!0,l(t,r)}}a.prototype["catch"]=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(i);return u(this,new f(e,t,n)),n},a.all=function(e){var t=Array.prototype.slice.call(e);return new a((function(e,n){if(0===t.length)return e([]);var r=t.length;function i(o,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var u=a.then;if("function"===typeof u)return void u.call(a,(function(e){i(o,e)}),n)}t[o]=a,0===--r&&e(t)}catch(c){n(c)}}for(var o=0;o<t.length;o++)i(o,t[o])}))},a.resolve=function(e){return e&&"object"===typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},a._immediateFn="function"===typeof e?function(t){e(t)}:function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},"undefined"!==typeof t&&t.exports?t.exports=a:n.Promise||(n.Promise=a)})(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var i=e("process/browser.js").nextTick,o=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"===typeof t?t:function(e){var t=c++,r=!(arguments.length<2)&&a.call(arguments,1);return u[t]=!0,i((function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"===typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),i=function(){return"undefined"!==typeof window?window:Function("return this;")()}();t.exports={boltExport:i.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))})(void 0,I,S,void 0);var U=S.exports.boltExport,P=function(e){var n=m.none(),r=[],i=function(e){return P((function(t){o((function(n){t(e(n))}))}))},o=function(e){u()?l(e):r.push(e)},a=function(e){n=m.some(e),c(r),r=[]},u=function(){return n.isSome()},c=function(e){x(e,l)},l=function(e){n.each((function(n){t.setTimeout((function(){e(n)}),0)}))};return e(a),{get:o,map:i,isReady:u}},C=function(e){return P((function(t){t(e)}))},L={nu:P,pure:C},R=function(e){t.setTimeout((function(){throw e}),0)},k=function(e){var t=function(t){e().then(t,R)},n=function(t){return k((function(){return e().then(t)}))},r=function(t){return k((function(){return e().then((function(e){return t(e).toPromise()}))}))},i=function(t){return k((function(){return e().then((function(){return t.toPromise()}))}))},o=function(){return L.nu(t)},a=function(){var t=null;return k((function(){return null===t&&(t=e()),t}))},u=e;return{map:n,bind:r,anonBind:i,toLazy:o,toCached:a,toPromise:u,get:t}},M=function(e){return k((function(){return new U(e)}))},j=function(e){return k((function(){return U.resolve(e)}))},F={nu:M,pure:j},z=function(e){var t=function(t){return e===t},n=function(t){return z(e)},r=function(t){return z(e)},o=function(t){return z(t(e))},a=function(t){return z(e)},l=function(t){t(e)},s=function(t){return t(e)},f=function(t,n){return n(e)},d=function(t){return t(e)},p=function(t){return t(e)},g=function(){return m.some(e)};return{is:t,isValue:c,isError:u,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:n,orThunk:r,fold:f,map:o,mapError:a,each:l,bind:s,exists:d,forall:p,toOption:g}},H=function(e){var t=function(e){return e()},n=function(){return a(String(e))()},i=function(e){return e},l=function(e){return e()},s=function(t){return H(e)},f=function(t){return H(t(e))},d=function(t){return H(e)},p=function(t,n){return t(e)};return{is:u,isValue:u,isError:c,getOr:o,getOrThunk:t,getOrDie:n,or:i,orThunk:l,fold:p,map:s,mapError:f,each:r,bind:d,exists:u,forall:c,toOption:m.none}},B=function(e,t){return e.fold((function(){return H(t)}),z)},G={value:z,error:H,fromOption:B},W=function(e){var n=function(){return W(e.toCached())},r=function(t){return W(e.bind((function(e){return e.fold((function(e){return F.pure(G.error(e))}),(function(e){return t(e)}))})))},i=function(t){return W(e.map((function(e){return e.bind(t)})))},o=function(t){return W(e.map((function(e){return e.map(t)})))},a=function(t){return W(e.map((function(e){return e.mapError(t)})))},u=function(t,n){return e.map((function(e){return e.fold(t,n)}))},c=function(n,r){return W(F.nu((function(i){var o=!1,a=t.setTimeout((function(){o=!0,i(G.error(r()))}),n);e.get((function(e){o||(t.clearTimeout(a),i(e))}))})))};return O(O({},e),{toCached:n,bindFuture:r,bindResult:i,mapResult:o,mapError:a,foldResult:u,withTimeout:c})},q=function(e){return W(F.nu(e))},J=function(e){return W(F.pure(G.value(e)))},V=function(e){return W(F.pure(G.error(e)))},X=function(e){return W(F.pure(e))},$=function(e){return W(e.map(G.value))},Y=function(e){return q((function(t){e.then((function(e){t(G.value(e))}),(function(e){t(G.error(e))}))}))},K={nu:q,wrap:W,pure:J,value:J,error:V,fromResult:X,fromFuture:$,fromPromise:Y},Z=Object.prototype.hasOwnProperty,Q=function(e,t){var n=v(e)&&v(t);return n?te(e,t):t},ee=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)Z.call(o,a)&&(r[a]=e(r[a],o[a]))}return r}},te=ee(Q),ne=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE,t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE,t.Node.TEXT_NODE,t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,"undefined"!==typeof t.window?t.window:Function("return this;")(),function(e,n,r){if(!(h(r)||y(r)||T(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}),re=function(e,t,n){ne(e.dom(),t,n)},ie=function(e,n){var r=n||t.document,i=r.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ue(i.childNodes[0])},oe=function(e,n){var r=n||t.document,i=r.createElement(e);return ue(i)},ae=function(e,n){var r=n||t.document,i=r.createTextNode(e);return ue(i)},ue=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:i(e)}},ce=function(e,t,n){var r=e.dom();return m.from(r.elementFromPoint(t,n)).map(ue)},le={fromHtml:ie,fromTag:oe,fromText:ae,fromDom:ue,fromPoint:ce},se=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),fe=tinymce.util.Tools.resolve("tinymce.util.Promise"),de=tinymce.util.Tools.resolve("tinymce.util.XHR"),me=function(e){return e.getParam("image_dimensions",!0,"boolean")},pe=function(e){return e.getParam("image_advtab",!1,"boolean")},ge=function(e){return e.getParam("image_uploadtab",!0,"boolean")},he=function(e){return e.getParam("image_prepend_url","","string")},ve=function(e){return e.getParam("image_class_list")},be=function(e){return e.getParam("image_description",!0,"boolean")},ye=function(e){return e.getParam("image_title",!1,"boolean")},we=function(e){return e.getParam("image_caption",!1,"boolean")},Te=function(e){return e.getParam("image_list",!1)},_e=function(e){return!!xe(e)},De=function(e){return!!Ee(e)},xe=function(e){return e.getParam("images_upload_url","","string")},Ee=function(e){return e.getParam("images_upload_handler",void 0,"function")},Ae=function(e){return e.getParam("images_upload_base_path",void 0,"string")},Ne=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},Oe=function(e){return e.getParam("a11y_advanced_options",!1,"boolean")},Ie=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Se={hasDimensions:me,hasUploadTab:ge,hasAdvTab:pe,getPrependUrl:he,getClassList:ve,hasDescription:be,hasImageTitle:ye,hasImageCaption:we,getImageList:Te,hasUploadUrl:_e,hasUploadHandler:De,getUploadUrl:xe,getUploadHandler:Ee,getUploadBasePath:Ae,getUploadCredentials:Ne,showAccessibilityOptions:Oe,isAutomaticUploadsEnabled:Ie},Ue=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},Pe=function(e,n){var r=t.document.createElement("img"),i=function(e){r.parentNode&&r.parentNode.removeChild(r),n(e)};r.onload=function(){var e=Ue(r.width,r.clientWidth),t=Ue(r.height,r.clientHeight),n={width:e,height:t};i(G.value(n))},r.onerror=function(){i(G.error("Failed to get image dimensions for: "+e))};var o=r.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",t.document.body.appendChild(r),r.src=e},Ce=function(e){return e&&(e=e.replace(/px$/,"")),e},Le=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},Re=function(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},ke=function(e,t){var n=Se.getImageList(e);"string"===typeof n?de.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"===typeof n?n(t):t(n)},Me=function(e,t,n){var r=function(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())};n.onload=function(){t.width||t.height||!Se.hasDimensions(e)||e.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r},je=function(e){return new fe((function(n,r){var i=new t.FileReader;i.onload=function(){n(i.result)},i.onerror=function(){r(i.error.message)},i.readAsDataURL(e)}))},Fe=function(e){return"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder"))},ze={getImageSize:Pe,removePixelSuffix:Ce,addPixelSuffix:Le,mergeMargins:Re,createImageList:ke,waitLoadImage:Me,blobToDataUri:je,isPlaceholderImage:Fe},He=se.DOM,Be=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?ze.removePixelSuffix(e.style.marginLeft):""},Ge=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?ze.removePixelSuffix(e.style.marginTop):""},We=function(e){return e.style.borderWidth?ze.removePixelSuffix(e.style.borderWidth):""},qe=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},Je=function(e,t){return e.style[t]?e.style[t]:""},Ve=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},Xe=function(e,t,n){e.setAttribute(t,n)},$e=function(e){var t=He.create("figure",{class:"image"});He.insertAfter(t,e),t.appendChild(e),t.appendChild(He.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"},Ye=function(e){var t=e.parentNode;He.insertAfter(e,t),He.remove(t)},Ke=function(e){Ve(e)?Ye(e):$e(e)},Ze=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},Qe=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=ze.addPixelSuffix(r),Ze(e,t)):Xe(e,n,r)}},et=function(e,t){return e.style[t]?ze.removePixelSuffix(e.style[t]):qe(e,t)},tt=function(e,t){var n=ze.addPixelSuffix(t);e.style.marginLeft=n,e.style.marginRight=n},nt=function(e,t){var n=ze.addPixelSuffix(t);e.style.marginTop=n,e.style.marginBottom=n},rt=function(e,t){var n=ze.addPixelSuffix(t);e.style.borderWidth=n},it=function(e,t){e.style.borderStyle=t},ot=function(e){return Je(e,"borderStyle")},at=function(e){return"FIGURE"===e.nodeName},ut=function(e){return"IMG"===e.nodeName},ct=function(e){return 0===He.getAttrib(e,"alt").length&&"presentation"===He.getAttrib(e,"role")},lt=function(e){return ct(e)?"":qe(e,"alt")},st=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},ft=function(e,n){var r=t.document.createElement("img");return Xe(r,"style",n.style),(Be(r)||""!==n.hspace)&&tt(r,n.hspace),(Ge(r)||""!==n.vspace)&&nt(r,n.vspace),(We(r)||""!==n.border)&&rt(r,n.border),(ot(r)||""!==n.borderStyle)&&it(r,n.borderStyle),e(r.getAttribute("style"))},dt=function(e,n,r){var i=t.document.createElement("img");if(bt(e,O(O({},n),{caption:!1}),i,r),gt(i,n.alt,n.isDecorative,r),n.caption){var o=He.create("figure",{class:"image"});return o.appendChild(i),o.appendChild(He.create("figcaption",{contentEditable:"true"},"Caption")),o.contentEditable="false",o}return i},mt=function(e,t){return{src:qe(t,"src"),alt:lt(t),title:qe(t,"title"),width:et(t,"width"),height:et(t,"height"),class:qe(t,"class"),style:e(qe(t,"style")),caption:Ve(t),hspace:Be(t),vspace:Ge(t),border:We(t),borderStyle:Je(t,"borderStyle"),isDecorative:ct(t)}},pt=function(e,t,n,r,i){n[r]!==t[r]&&i(e,r,n[r])},gt=function(e,t,n,r){if(n){He.setAttrib(e,"role","presentation");var i=le.fromDom(e);re(i,"alt","")}else{if(r.hasAccessibilityOptions)He.setAttrib(e,"alt",t);else{i=le.fromDom(e);re(i,"alt",t)}"presentation"===He.getAttrib(e,"role")&&He.setAttrib(e,"role","")}},ht=function(e,t,n,r){n.alt===t.alt&&n.isDecorative===t.isDecorative||gt(e,n.alt,n.isDecorative,r)},vt=function(e,t){return function(n,r,i){e(n,i),Ze(n,t)}},bt=function(e,t,n,r){var i=mt(e,n);pt(n,i,t,"caption",(function(e,t,n){return Ke(e)})),pt(n,i,t,"src",Xe),pt(n,i,t,"title",Xe),pt(n,i,t,"width",Qe("width",e)),pt(n,i,t,"height",Qe("height",e)),pt(n,i,t,"class",Xe),pt(n,i,t,"style",vt((function(e,t){return Xe(e,"style",t)}),e)),pt(n,i,t,"hspace",vt(tt,e)),pt(n,i,t,"vspace",vt(nt,e)),pt(n,i,t,"border",vt(rt,e)),pt(n,i,t,"borderStyle",vt(it,e)),ht(n,i,t,r)},yt=function(e,t){var n=e.dom.styles.parse(t),r=ze.mergeMargins(n),i=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(i)},wt=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||ze.isPlaceholderImage(t))?null:t},Tt=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,(function(t){return!!e.schema.getTextBlockElements()[t.nodeName]}),e.getBody());return r?n.split(r,t):t},_t=function(e){var t=wt(e);return t?mt((function(t){return yt(e,t)}),t):st()},Dt=function(e,t,n){var r=dt((function(t){return yt(e,t)}),t,n);e.dom.setAttrib(r,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(r.outerHTML);var i=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(i,"data-mce-id",null),at(i)){var o=Tt(e,i);e.selection.select(o)}else e.selection.select(i)},xt=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},Et=function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}},At=function(e,t,n){var r=wt(e);if(bt((function(t){return yt(e,t)}),t,r,n),xt(e,r),at(r.parentNode)){var i=r.parentNode;Tt(e,i),e.selection.select(r.parentNode)}else e.selection.select(r),ze.waitLoadImage(e,t,r)},Nt=function(e,t,n){var r=wt(e);r?t.src?At(e,t,n):Et(e,r):t.src&&Dt(e,t,n)},Ot=tinymce.util.Tools.resolve("tinymce.util.Tools"),It=function(e){return h(e.value)?e.value:""},St=function(e,t){var n=[];return Ot.each(e,(function(e){var r=h(e.text)?e.text:h(e.title)?e.title:"";if(void 0!==e.menu){var i=St(e.menu,t);n.push({text:r,items:i})}else{var o=t(e);n.push({text:r,value:o})}})),n},Ut=function(e){return void 0===e&&(e=It),function(t){return t?m.from(t).map((function(t){return St(t,e)})):m.none()}},Pt=function(e){return Ut(It)(e)},Ct=function(e){return Object.prototype.hasOwnProperty.call(e,"items")},Lt=function(e,t){return N(e,(function(e){return Ct(e)?Lt(e.items,t):e.value===t?m.some(e):m.none()}))},Rt=function(e,t){return e.bind((function(e){return Lt(e,t)}))},kt={sanitizer:Ut,sanitize:Pt,findEntry:Rt},Mt=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};function jt(e){var n=function(n,r,i,o){var a,u;a=new t.XMLHttpRequest,a.open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;a.status<200||a.status>=300?i("HTTP Error: "+a.status):(t=JSON.parse(a.responseText),t&&"string"===typeof t.location?r(Mt(e.basePath,t.location)):i("Invalid JSON: "+a.responseText))},u=new t.FormData,u.append("file",n.blob(),n.filename()),a.send(u)},i=function(e,t){return new fe((function(n,i){try{t(e,n,i,r)}catch(o){i(o.message)}}))},o=function(e){return e===n},a=function(t){return!e.url&&o(e.handler)?fe.reject("Upload url missing from the settings."):i(t,e.handler)};return e=Ot.extend({credentials:!1,handler:n},e),{upload:a}}var Ft=function(e){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},zt={makeTab:Ft},Ht=function(e){var t=kt.sanitizer((function(t){return e.convertURL(t.value||t.url,"src")})),n=F.nu((function(n){ze.createImageList(e,(function(e){n(t(e).map((function(e){return E([[{text:"None",value:""}],e])})))}))})),r=kt.sanitize(Se.getClassList(e)),i=Se.hasAdvTab(e),o=Se.hasUploadTab(e),a=Se.hasUploadUrl(e),u=Se.hasUploadHandler(e),c=_t(e),l=Se.hasDescription(e),s=Se.hasImageTitle(e),f=Se.hasDimensions(e),d=Se.hasImageCaption(e),p=Se.showAccessibilityOptions(e),g=Se.getUploadUrl(e),v=Se.getUploadBasePath(e),b=Se.getUploadCredentials(e),y=Se.getUploadHandler(e),w=Se.isAutomaticUploadsEnabled(e),T=m.some(Se.getPrependUrl(e)).filter((function(e){return h(e)&&e.length>0}));return n.map((function(e){return{image:c,imageList:e,classList:r,hasAdvTab:i,hasUploadTab:o,hasUploadUrl:a,hasUploadHandler:u,hasDescription:l,hasImageTitle:s,hasDimensions:f,hasImageCaption:d,url:g,basePath:v,credentials:b,handler:y,prependURL:T,hasAccessibilityOptions:p,automaticUploads:w}}))},Bt=function(e){var t={name:"src",type:"urlinput",filetype:"image",label:"Source"},n=e.imageList.map((function(e){return{name:"images",type:"selectbox",label:"Image list",items:e}})),r={name:"alt",type:"input",label:"Alternative description",disabled:e.hasAccessibilityOptions&&e.image.isDecorative},i={name:"title",type:"input",label:"Image title"},o={name:"dimensions",type:"sizeinput"},a={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},u=e.classList.map((function(e){return{name:"classes",type:"selectbox",label:"Class",items:e}})),c={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]};return E([[t],n.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[a]:[],e.hasDescription?[r]:[],e.hasImageTitle?[i]:[],e.hasDimensions?[o]:[],[{type:"grid",columns:2,items:E([u.toArray(),e.hasImageCaption?[c]:[]])}]])},Gt=function(e){return{title:"General",name:"general",items:Bt(e)}},Wt={makeTab:Gt,makeItems:Bt},qt=function(e){var t=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:t}},Jt={makeTab:qt},Vt=function(e){return{prevImage:kt.findEntry(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}},Xt=function(e){return{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}},$t=function(e){return{src:e.src.value,alt:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}},Yt=function(e,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?m.none():e.prependURL.bind((function(e){return t.substring(0,e.length)!==e?m.some(e+t):m.none()}))},Kt=function(e,t){var n=t.getData();Yt(e,n.src.value).each((function(e){t.setData({src:{value:e,meta:n.src.meta}})}))},Zt=function(e,t,n){e.hasDescription&&h(n.alt)&&(t.alt=n.alt),e.hasAccessibilityOptions&&(t.isDecorative=n.isDecorative||t.isDecorative||!1),e.hasImageTitle&&h(n.title)&&(t.title=n.title),e.hasDimensions&&(h(n.width)&&(t.dimensions.width=n.width),h(n.height)&&(t.dimensions.height=n.height)),h(n.class)&&kt.findEntry(e.classList,n.class).each((function(e){t.classes=e.value})),e.hasImageCaption&&y(n.caption)&&(t.caption=n.caption),e.hasAdvTab&&(h(n.style)&&(t.style=n.style),h(n.vspace)&&(t.vspace=n.vspace),h(n.border)&&(t.border=n.border),h(n.hspace)&&(t.hspace=n.hspace),h(n.borderstyle)&&(t.borderstyle=n.borderstyle))},Qt=function(e,t){var n=t.getData(),r=n.src.meta;if(void 0!==r){var i=te({},n);Zt(e,i,r),t.setData(i)}},en=function(e,t,n,r){var i=r.getData(),o=i.src.value,a=i.src.meta||{};a.width||a.height||!t.hasDimensions||e.imageSize(o).get((function(e){e.each((function(e){n.open&&r.setData({dimensions:e})}))}))},tn=function(e,t,n){var r=n.getData(),i=kt.findEntry(e.imageList,r.src.value);t.prevImage=i,n.setData({images:i.map((function(e){return e.value})).getOr("")})},nn=function(e,t,n,r){Kt(t,r),Qt(t,r),en(e,t,n,r),tn(t,n,r)},rn=function(e,t,n,r){var i=r.getData(),o=kt.findEntry(t.imageList,i.images);o.each((function(e){var t=""===i.alt||n.prevImage.map((function(e){return e.text===i.alt})).getOr(!1);t?""===e.value?r.setData({src:e,alt:n.prevAlt}):r.setData({src:e,alt:e.text}):r.setData({src:e})})),n.prevImage=o,nn(e,t,n,r)},on=function(e){var t=e["margin-top"]&&e["margin-bottom"]&&e["margin-top"]===e["margin-bottom"];return t?ze.removePixelSuffix(String(e["margin-top"])):""},an=function(e){var t=e["margin-right"]&&e["margin-left"]&&e["margin-right"]===e["margin-left"];return t?ze.removePixelSuffix(String(e["margin-right"])):""},un=function(e){return e["border-width"]?ze.removePixelSuffix(String(e["border-width"])):""},cn=function(e){return e["border-style"]?String(e["border-style"]):""},ln=function(e,t,n){return t(e(t(n)))},sn=function(e,t,n){var r=ze.mergeMargins(e(n.style)),i=te({},n);return i.vspace=on(r),i.hspace=an(r),i.border=un(r),i.borderstyle=cn(r),i.style=ln(e,t,r),i},fn=function(e,t){var n=t.getData(),r=sn(e.parseStyle,e.serializeStyle,n);t.setData(r)},dn=function(e,t,n){var r=te(Xt(t.image),n.getData()),i=ft(e.normalizeCss,$t(r));n.setData({style:i})},mn=function(e,n,r,i){var o=i.getData();i.block("Uploading image"),A(o.fileinput).fold((function(){i.unblock()}),(function(o){var a=t.URL.createObjectURL(o),u=jt({url:n.url,basePath:n.basePath,credentials:n.credentials,handler:n.handler}),c=function(){i.unblock(),t.URL.revokeObjectURL(a)},l=function(t){i.setData({src:{value:t,meta:{}}}),i.showTab("general"),nn(e,n,r,i)};ze.blobToDataUri(o).then((function(t){var r=e.createBlobCache(o,a,t);n.automaticUploads?u.upload(r).then((function(e){l(e),c()})).catch((function(t){c(),e.alertErr(i,t)})):(e.addToBlobCache(r),l(r.blobUri()),i.unblock())}))}))},pn=function(e,t,n){return function(r,i){"src"===i.name?nn(e,t,n,r):"images"===i.name?rn(e,t,n,r):"alt"===i.name?n.prevAlt=r.getData().alt:"style"===i.name?fn(e,r):"vspace"===i.name||"hspace"===i.name||"border"===i.name||"borderstyle"===i.name?dn(e,t,r):"fileinput"===i.name?mn(e,t,n,r):"isDecorative"===i.name&&(r.getData().isDecorative?r.disable("alt"):r.enable("alt"))}},gn=function(e){return function(){e.open=!1}},hn=function(e){if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){var t={type:"tabpanel",tabs:E([[Wt.makeTab(e)],e.hasAdvTab?[zt.makeTab(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Jt.makeTab(e)]:[]])};return t}var n={type:"panel",items:Wt.makeItems(e)};return n},vn=function(e){return function(t){var n=Vt(t);return{title:"Insert/Edit Image",size:"normal",body:hn(t),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Xt(t.image),onSubmit:e.onSubmit(t),onChange:pn(e,t,n),onClose:gn(n)}}},bn=function(e){return function(t){return function(n){var r=te(Xt(t.image),n.getData());e.undoManager.transact((function(){Nt(e,$t(r),t)})),e.editorUpload.uploadImagesAuto(),n.close()}}},yn=function(e){return function(t){return K.nu((function(n){ze.getImageSize(e.documentBaseURI.toAbsolute(t),(function(e){var t=e.map((function(e){return{width:String(e.width),height:String(e.height)}}));n(t)}))}))}},wn=function(e){return function(t,n,r){return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,base64:r.split(",")[1]})}},Tn=function(e){return function(t){e.editorUpload.blobCache.add(t)}},_n=function(e){return function(t,n){e.windowManager.alert(n,t.close)}},Dn=function(e){return function(t){return yt(e,t)}},xn=function(e){return function(t){return e.dom.parseStyle(t)}},En=function(e){return function(t,n){return e.dom.serializeStyle(t,n)}},An=function(e){var t={onSubmit:bn(e),imageSize:yn(e),addToBlobCache:Tn(e),createBlobCache:wn(e),alertErr:_n(e),normalizeCss:Dn(e),parseStyle:xn(e),serializeStyle:En(e)},n=function(){return Ht(e).map(vn(t)).get((function(t){e.windowManager.open(t)}))};return{open:n}},Nn=function(e){e.addCommand("mceImage",An(e).open)},On={register:Nn},In=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},Sn=function(e){return function(t){var n=t.length,r=function(t){t.attr("contenteditable",e?"true":null)};while(n--){var i=t[n];In(i)&&(i.attr("contenteditable",e?"false":null),Ot.each(i.getAll("figcaption"),r))}}},Un=function(e){e.on("PreInit",(function(){e.parser.addNodeFilter("figure",Sn(!0)),e.serializer.addNodeFilter("figure",Sn(!1))}))},Pn={setup:Un},Cn=function(e){e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:An(e).open,onSetup:function(t){return e.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",t.setActive).unbind}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:An(e).open}),e.ui.registry.addContextMenu("image",{update:function(e){return at(e)||ut(e)&&!ze.isPlaceholderImage(e)?["image"]:[]}})},Ln={register:Cn};function Rn(){n.add("image",(function(e){Pn.setup(e),Ln.register(e),On.register(e)}))}Rn()})(window)}).call(this,n("c8ba"))}}]);