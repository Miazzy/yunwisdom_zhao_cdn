(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddef0a54","chunk-52e65f5c","chunk-ddef0a54"],{"08cc":function(e,t,a){"use strict";var r=a("583b"),s=a.n(r);s.a},1509:function(e,t,a){"use strict";var r=a("2e1f"),s=a.n(r);s.a},"1e12":function(e,t,a){},"20a0":function(e,t,a){"use strict";var r=a("65a2"),s=a.n(r);s.a},"2e1f":function(e,t,a){},"583b":function(e,t,a){},"65a2":function(e,t,a){},"65ee":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main user-layout-forgot"},[e.sended?[e._m(1),a("a-form",{ref:"formRegister",attrs:{form:e.form,id:"formRegister"}},[a("a-form-item",[a("a-input",{attrs:{size:"large",type:"text",placeholder:"邮箱",value:e.email,disabled:""}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),a("a-popover",{attrs:{placement:"rightTop",trigger:"click",visible:e.state.passwordLevelChecked}},[a("template",{slot:"content"},[a("div",{style:{width:"240px"}},[a("div",{class:["user-register",e.passwordLevelClass]},[e._v("\n              强度：\n              "),a("span",[e._v(e._s(e.passwordLevelName))])]),a("a-progress",{attrs:{percent:e.state.percent,showInfo:!1,strokeColor:e.passwordLevelColor}}),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("请至少输入 6 个字符。请不要使用容易被猜到的密码。")])])],1)]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"至少6位密码，区分大小写"},{validator:this.handlePasswordLevel}],validateTrigger:["change","blur"]}],expression:"['password',{rules: [{ required: true, message: '至少6位密码，区分大小写' },{ validator: this.handlePasswordLevel }], validateTrigger: ['change', 'blur']}]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码须至少6位，且区分大小写"},on:{click:e.handlePasswordInputClick}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],2),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password2",{rules:[{required:!0,message:"至少6位密码，区分大小写"},{validator:this.handlePasswordCheck}],validateTrigger:["change","blur"]}],expression:"['password2',{rules: [{ required: true, message: '至少6位密码，区分大小写' },{ validator: this.handlePasswordCheck }], validateTrigger: ['change', 'blur']}]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"再次确认您的密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"check-circle"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:["blur"]}],expression:"['captcha',{rules: [{ required: true, message: '请输入验证码' }], validateTrigger: ['blur']}]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"safety-certificate"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-button",{staticClass:"register-button",attrs:{block:"",size:"large",type:"primary",htmlType:"submit",loading:e.registerBtn,disabled:e.registerBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[e._v("提交")])],1)],1)]:[e._m(0),a("a-form",{ref:"formForgot",attrs:{form:e.formCaptcha,id:"formForgot"}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,type:"email",message:"请输入邮箱地址"}],validateTrigger:["change","blur"]}],expression:"['email',{rules: [{ required: true, type: 'email', message: '请输入邮箱地址' }], validateTrigger: ['change', 'blur']}]"}],attrs:{size:"large",type:"text",placeholder:"注册邮箱地址"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-button",{staticClass:"forgot-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.forgotBtn,disabled:e.forgotBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmitCaptcha(t)}}},[e._v("获取验证码")]),a("router-link",{staticClass:"login",attrs:{to:{name:"login"}}},[e._v("使用其他账户登录")])],1)],1)]],2)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",[a("span",[e._v("通过邮箱重置")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",[a("span",[e._v("重置密码")])])}],i=a("35ae"),o=a.n(i),n=a("0672"),l=a("2f14"),c=a("97a8"),d={0:"低",1:"低",2:"中",3:"强"},u={0:"error",1:"error",2:"warning",3:"success"},p={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},m={name:"Forgot",components:{},data:function(){return{form:this.$form.createForm(this),formCaptcha:this.$form.createForm(this),email:"",sended:!1,forgotBtn:!1,state:{time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},registerBtn:!1}},computed:{passwordLevelClass:function(){return u[this.state.passwordLevel]},passwordLevelName:function(){return d[this.state.passwordLevel]},passwordLevelColor:function(){return p[this.state.passwordLevel]}},methods:{handleSubmitCaptcha:function(){var e=this;this.formCaptcha.validateFields((function(t,a){if(!t){e.forgotBtn=!0;var r=e.formCaptcha.getFieldsValue();e.email=r.email,Object(n["e"])(e.email).then((function(t){if(e.sended=!0,e.forgotBtn=!1,e.$message.destroy(),!Object(l["a"])(t))return!1;var a="验证码获取成功";t.data&&(a+="，您的验证码为："+t.data),Object(c["b"])({title:"提示",msg:a},"notification","success",8)}))}}))},handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.hidePasswordLevelChecked=!1,e.registerBtn=!0;var r=e.form.getFieldsValue();r.email=e.email,r.password=o()(r.password),r.password2=o()(r.password2),Object(n["h"])(r).then((function(t){if(e.registerBtn=!1,!Object(l["a"])(t))return!1;Object(c["b"])({title:"提示",msg:"重置密码成功，请登录"},"notification","success"),e.$router.push({name:"login"})}))}}))},handlePasswordInputClick:function(){this.state.passwordLevelChecked=!0},hidePasswordLevelChecked:function(){this.state.passwordLevelChecked=!1},handlePasswordLevel:function(e,t,a){var r=0;/[0-9]/.test(t)&&r++,/[a-zA-Z]/.test(t)&&r++,/[^0-9a-zA-Z_]/.test(t)&&r++,this.state.passwordLevel=r,this.state.percent=30*r,r>=2?(r>=3&&(this.state.percent=100),a()):(0===r&&(this.state.percent=10),a(new Error("密码强度不够")))},handlePasswordCheck:function(e,t,a){var r=this.form.getFieldValue("password");void 0===t&&a(new Error("请输入密码")),t&&r&&t.trim()!==r.trim()&&a(new Error("两次密码不一致")),a()}},watch:{}},f=m,g=(a("9d09"),a("87d8"),a("2877")),h=Object(g["a"])(f,r,s,!1,null,null,null);t["default"]=h.exports},"6b3d":function(e,t,a){},"87d8":function(e,t,a){"use strict";var r=a("6b3d"),s=a.n(r);s.a},"8a1c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("a-spin",{staticClass:"text-center",attrs:{spinning:e.oauthLoading}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.oauthLoading,expression:"oauthLoading"}]},[e._v("正在登陆，请稍后...")])]),a("a-form",{directives:[{name:"show",rawName:"v-show",value:!e.oauthLoading,expression:"!oauthLoading"}],ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form}},[a("a-tabs",{attrs:{activeKey:e.customActiveKey,tabBarStyle:{textAlign:"center",borderBottom:"unset"}},on:{change:e.handleTabClick}},[a("a-tab-pane",{key:"tab1",attrs:{tab:"账号密码登录"}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:!0,message:"请输入帐户名或邮箱地址"},{validator:this.handleUsernameOrEmail}],validateTrigger:"blur"}],expression:"[\n                              'account',\n                              {rules: [{ required: true, message: '请输入帐户名或邮箱地址' },{ validator: this.handleUsernameOrEmail }], validateTrigger: 'blur'}\n                          ]"}],attrs:{size:"large",type:"text",placeholder:"帐户名或邮箱地址"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"blur"}],expression:"[\n                              'password',\n                              {rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur'}\n                          ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1),a("a-tab-pane",{key:"tab2",attrs:{tab:"手机号登录"}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"},{validator:this.handleUsernameOrEmail}],validateTrigger:"change"}],expression:"[\n                              'mobile',\n                              {rules: [{ required: true, pattern: /^1[34578]\\d{9}$/, message: '请输入正确的手机号' },{ validator: this.handleUsernameOrEmail }], validateTrigger: 'change'}\n                          ]"}],attrs:{size:"large",type:"text",placeholder:"手机号"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:16}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"[\n                              'captcha',\n                              {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}\n                          ]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),a("a-col",{staticClass:"gutter-row",attrs:{span:8}},[a("a-button",{staticClass:"getCaptcha",attrs:{tabindex:"-1",disabled:e.state.smsSendBtn},domProps:{textContent:e._s(e.state.smsSendBtn?e.state.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha(t)}}})],1)],1)],1)],1),a("a-form-item",[a("a-checkbox",{model:{value:e.formLogin.rememberMe,callback:function(t){e.$set(e.formLogin,"rememberMe",t)},expression:"formLogin.rememberMe"}},[e._v("自动登录")]),a("a",{staticClass:"forge-password",staticStyle:{float:"right"},on:{click:function(t){return e.routerLink("/member/forgot")}}},[e._v("忘记密码")])],1),a("a-form-item",{staticStyle:{"margin-top":"24px"}},[a("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.loginBtn,disabled:e.loginBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[e._v("登录")])],1),a("div",{staticClass:"user-login-other"},[a("span",[e._v("其他登录方式")]),a("a-tooltip",{attrs:{mouseEnterDelay:.3,title:"现已支持"}},[a("a",{on:{click:e.dingTalkOauth}},[a("a-icon",{staticClass:"item-icon",attrs:{type:"dingding"}})],1)]),a("router-link",{staticClass:"register",attrs:{to:{name:"register"}}},[e._v("注册账户")])],1)],1)],1)},s=[],i=(a("8e6e"),a("456d"),a("20d6"),a("7f7f"),a("ac6a"),a("bd86")),o=a("35ae"),n=a.n(o),l=a("2c18"),c=a("5880"),d=a("c24f"),u=a("8593"),p=a("a078"),m=a("2f14"),f=a("68fe"),g=a("efb5"),h=a("0672"),v=a("259a"),b=a("97a8");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={components:{},data:function(){return{customActiveKey:"tab1",loginBtn:!1,oauthLoading:!1,loginType:0,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,smsSendBtn:!1},formLogin:{account:"",password:"",captcha:"",mobile:"",rememberMe:!0}}},computed:y({},Object(c["mapState"])({system:function(e){return e.system}})),mounted:function(){this.checkInstall(),this.$route.query.logged&&(this.oauthLoading=!0,this.checkLogin()),this.$route.query.message&&Object(b["b"])({title:this.$route.query.message},"notice")},methods:y({},Object(c["mapActions"])(["Login","Logout"]),{checkInstall:function(){var e=this;Object(g["a"])().then((function(t){if(!Object(m["a"])(t))return e.$router.push({name:"install"}),!1;Object(u["a"])().then((function(t){Object(m["a"])(t)&&(e.$store.dispatch("setSystem",t.data),e.dingTalkLogin())}))}))},handleUsernameOrEmail:function(e,t,a){var r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;r.test(t)?this.loginType=0:this.loginType=1,a()},handleTabClick:function(e){this.customActiveKey=e},handleSubmit:function(){var e=this,t=this,a=!1,r={remember_me:t.formLogin.rememberMe};"tab1"===t.customActiveKey?t.form.validateFields(["account","password"],{force:!0},(function(e,s){e||(a=!0,r[(t.loginType,"account")]=s.account,r.password=n()(s.password))})):t.form.validateFields(["mobile","captcha"],{force:!0},(function(e,t){e||(a=!0,r=Object.assign(r,t))})),a&&(t.loginBtn=!0,r.clientid=Object(f["a"])("client_id"),Object(d["a"])(r).then((function(t){Object(m["a"])(t)&&(r.token=t.token,e.dealDataBeforeLogin(t)),e.loginBtn=!1})).catch((function(){e.loginBtn=!1})))},getCaptcha:function(e){var t=this;e.preventDefault();var a=this;this.form.validateFields(["mobile"],{force:!0},(function(e,r){if(!e){t.state.smsSendBtn=!0;var s=window.setInterval((function(){a.state.time--<=0&&(a.state.time=60,a.state.smsSendBtn=!1,window.clearInterval(s))}),1e3);t.$message.loading("验证码发送中..",0);Object(d["h"])(r.mobile).then((function(e){if(t.$message.destroy(),!Object(m["a"])(e))return!1;var a="验证码获取成功";e.data&&(a+="，您的验证码为："+e.data),t.$notification["success"]({message:"提示",description:a,duration:8,placement:"bottomLeft"})})).catch((function(e){clearInterval(s),a.state.time=60,a.state.smsSendBtn=!1,t.requestFailed(e)}))}}))},loginSuccess:function(e,t){var a=this;setTimeout((function(){var r=Object(f["a"])("menu",!0);if(r){var s=a.$router.options.routes;r.forEach((function(e){s[0].children.push(Object(m["b"])(e)),e.children&&e.children.forEach((function(e){s[0].children.push(Object(m["b"])(e)),e.children&&e.children.forEach((function(e){s[0].children.push(Object(m["b"])(e))}))}))})),a.loginBtn=!1,a.$router.addRoutes(s);var i=a.$route.query.redirect||p["a"].HOME_PAGE+"/"+t.code;i==p["a"].HOME_PAGE&&(i=p["a"].HOME_PAGE+"/"+t.code),console.log("redirect"),console.log(i),a.$router.push({path:i}),a.$notification.success({message:"欢迎",description:"".concat(e.data.member.name,"，").concat(Object(m["i"])(),"，欢迎回来")}),a.oauthLoading=!1}}),500)},dingTalkOauth:function(){var e=Object(v["b"])()+"?redirect="+this.$route.query.redirect,t=this.$route.query.redirect;t&&(e+="?redirect="+t),location.href=e},dingTalkLogin:function(){var e=this;l["ready"]((function(){l["runtime"].permission.requestAuthCode({corpId:"ding42ccb1a1923b200f35c2f4657eb6378f",onSuccess:function(t){e.oauthLoading=!0,Object(v["a"])({code:t.code}).then((function(t){Object(m["a"])(t)&&e.dealDataBeforeLogin(t)}))}})}))},checkLogin:function(){var e=this;Object(h["c"])().then((function(t){e.dealDataBeforeLogin(t)}))},dealDataBeforeLogin:function(e){var t=this;if(e.data){var a={userInfo:e.data.member,tokenList:e.data.tokenList},r=Object(f["a"])("currentOrganization",!0),s=e.data.organizationList;if(t.$store.dispatch("SET_LOGGED",a),t.$store.dispatch("setOrganizationList",s),r){var i=s.findIndex((function(e){return e.id==r.id}));-1===i&&(r=s[0])}else r=s[0];t.$store.dispatch("setCurrentOrganization",r),t.$store.dispatch("GET_MENU").then((function(){t.loginSuccess(e,r)}))}else t.oauthLoading=!1,t.$store.dispatch("SET_LOGOUT")},requestFailed:function(e){this.$notification["error"]({message:"错误",description:((e.response||{}).data||{}).message||"请求出现错误，请稍后再试",duration:4}),this.loginBtn=!1}})},C=O,L=(a("1509"),a("2877")),k=Object(L["a"])(C,r,s,!1,null,null,null);t["default"]=k.exports},"9d09":function(e,t,a){"use strict";var r=a("1e12"),s=a.n(r);s.a},c6d3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"main user-layout-register"},[t._m(0),r("a-form",{ref:"formRegister",attrs:{autoFormCreate:function(t){e.form=t},id:"formRegister"}},[r("a-form-item",{attrs:{fieldDecoratorId:"email",fieldDecoratorOptions:{rules:[{required:!0,type:"email",message:"请输入邮箱地址"}],validateTrigger:["change","blur"]}}},[r("a-input",{attrs:{size:"large",type:"text",placeholder:"邮箱"}})],1),r("a-form-item",{attrs:{fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入姓名"}],validateTrigger:["change","blur"]}}},[r("a-input",{attrs:{size:"large",type:"text",placeholder:"姓名"}})],1),r("a-popover",{attrs:{placement:"rightTop",trigger:"click",visible:t.state.passwordLevelChecked}},[r("template",{slot:"content"},[r("div",{style:{width:"240px"}},[r("div",{class:["user-register",t.passwordLevelClass]},[t._v("\n            强度：\n            "),r("span",[t._v(t._s(t.passwordLevelName))])]),r("a-progress",{attrs:{percent:t.state.percent,showInfo:!1,strokeColor:t.passwordLevelColor}}),r("div",{staticStyle:{"margin-top":"10px"}},[r("span",[t._v("请至少输入 6 个字符。请不要使用容易被猜到的密码。")])])],1)]),r("a-form-item",{attrs:{fieldDecoratorId:"password",fieldDecoratorOptions:{rules:[{required:!0,message:"至少6位密码，区分大小写"},{validator:this.handlePasswordLevel}],validateTrigger:["change","blur"]}}},[r("a-input",{attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码须至少6位，且区分大小写"},on:{click:t.handlePasswordInputClick}})],1)],2),r("a-form-item",{attrs:{fieldDecoratorId:"password2",fieldDecoratorOptions:{rules:[{required:!0,message:"至少6位密码，区分大小写"},{validator:this.handlePasswordCheck}],validateTrigger:["change","blur"]}}},[r("a-input",{attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"再次确认您的密码"}})],1),r("a-form-item",{attrs:{fieldDecoratorId:"mobile",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/},{validator:this.handlePhoneCheck}],validateTrigger:["change","blur"]}}},[r("a-input",{attrs:{size:"large",placeholder:"11 位手机号"}},[r("a-select",{attrs:{slot:"addonBefore",size:"large",defaultValue:"+86"},slot:"addonBefore"},[r("a-select-option",{attrs:{value:"+86"}},[t._v("+86")])],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{staticClass:"gutter-row",attrs:{span:16}},[r("a-form-item",{attrs:{fieldDecoratorId:"captcha",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}}},[r("a-input",{attrs:{size:"large",type:"text",placeholder:"验证码"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"safety-certificate"},slot:"prefix"})],1)],1)],1),r("a-col",{staticClass:"gutter-row",attrs:{span:8}},[r("a-button",{staticClass:"getCaptcha",attrs:{size:"large",disabled:t.state.smsSendBtn},domProps:{textContent:t._s(t.state.smsSendBtn?t.state.time+" s":"获取验证码")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}}})],1)],1),r("a-form-item",[r("a-button",{staticClass:"register-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:t.registerBtn,disabled:t.registerBtn},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._v("注册")]),r("router-link",{staticClass:"login",attrs:{to:{name:"login"}}},[t._v("使用已有账户登录")])],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",[a("span",[e._v("注册")])])}],i=a("35ae"),o=a.n(i),n=a("c24f"),l=a("2f14"),c=a("97a8"),d={0:"低",1:"低",2:"中",3:"强"},u={0:"error",1:"error",2:"warning",3:"success"},p={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},m={name:"Register",components:{},data:function(){return{form:null,state:{time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},registerBtn:!1}},computed:{passwordLevelClass:function(){return u[this.state.passwordLevel]},passwordLevelName:function(){return d[this.state.passwordLevel]},passwordLevelColor:function(){return p[this.state.passwordLevel]}},methods:{handlePasswordLevel:function(e,t,a){var r=0;/[0-9]/.test(t)&&r++,/[a-zA-Z]/.test(t)&&r++,/[^0-9a-zA-Z_]/.test(t)&&r++,this.state.passwordLevel=r,this.state.percent=30*r,r>=2?(r>=3&&(this.state.percent=100),a()):(0===r&&(this.state.percent=10),a(new Error("密码强度不够")))},handlePasswordCheck:function(e,t,a){var r=this.form.getFieldValue("password");void 0===t&&a(new Error("请输入密码")),t&&r&&t.trim()!==r.trim()&&a(new Error("两次密码不一致")),a()},handlePhoneCheck:function(e,t,a){a()},handlePasswordInputClick:function(){this.state.passwordLevelChecked=!0},handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.registerBtn=!0;var r=e.form.getFieldsValue();r.password=o()(r.password),r.password2=o()(r.password2),Object(n["j"])(r).then((function(t){if(e.registerBtn=!1,!Object(l["a"])(t))return!1;Object(c["b"])({title:"提示",msg:"注册成功，请登陆"},"notification","success"),e.$router.push({name:"login"})}))}}))},getCaptcha:function(e){var t=this;e.preventDefault();var a=this;this.form.validateFields(["mobile"],{force:!0},(function(e,r){if(!e){t.state.smsSendBtn=!0;var s=window.setInterval((function(){a.state.time--<=0&&(a.state.time=60,a.state.smsSendBtn=!1,window.clearInterval(s))}),1e3),i=t.$message.loading("验证码发送中..",0);Object(n["h"])(r.mobile).then((function(e){if(t.$message.destroy(),!Object(l["a"])(e))return!1;var a="验证码获取成功";e.data&&(a+="，您的验证码为："+e.data),t.$notification["success"]({message:"提示",description:a,duration:8,placement:"bottomLeft"})})).catch((function(e){setTimeout(i,1),clearInterval(s),t.state.time=60,t.state.smsSendBtn=!1,t.requestFailed(e)}))}}))},requestFailed:function(e){this.$notification["error"]({message:"错误",description:((e.response||{}).data||{}).message||"请求出现错误，请稍后再试",duration:4}),this.registerBtn=!1}},watch:{"state.passwordLevel":function(e){}}},f=m,g=(a("20a0"),a("08cc"),a("2877")),h=Object(g["a"])(f,r,s,!1,null,null,null);t["default"]=h.exports}}]);