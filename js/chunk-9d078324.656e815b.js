(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d078324","chunk-cb0398fe"],{"0600":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.userInfo?a("div",[a("a-dropdown",{staticClass:"action-item",attrs:{placement:"bottomRight"}},[a("div",{staticClass:"user-info"},[a("a-avatar",{attrs:{src:t.userInfo.avatar,alt:""}},[t._v(t._s(t.userInfo.name))]),a("span",[t._v(t._s(t.userInfo.name))])],1),a("a-menu",{staticClass:"middle-menu",attrs:{slot:"overlay",selectable:!1},on:{click:t.userAction},slot:"overlay"},[a("a-menu-item",{key:"setting"},[a("a",{attrs:{href:"javascript:;"}},[a("a-icon",{attrs:{type:"user"}}),t._v("个人设置\n        ")],1)]),a("a-menu-item",{key:"theme"},[a("a",{attrs:{href:"javascript:;"}},[a("a-icon",{attrs:{type:"swap"}}),t._v("切换主题\n        ")],1)]),a("a-menu-divider"),a("a-menu-item",{key:"logout"},[a("a",{attrs:{href:"javascript:;"}},[a("a-icon",{attrs:{type:"logout"}}),t._v("退出登录\n        ")],1)])],1)],1)],1):t._e()},s=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("5880"),o=a("0672");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"HeaderAvatar",data:function(){return{}},computed:l({},Object(r["mapState"])({userInfo:function(t){return t.userInfo},theme:function(t){return t.theme}})),methods:{userAction:function(t){var e=this;if("logout"==t.key)Object(o["g"])(),e.$store.dispatch("SET_LOGOUT");else if("setting"==t.key)e.$router.push("/account/setting/base");else if("theme"==t.key){var a="dark";this.theme==a&&(a="light"),this.$store.dispatch("setTheme",a)}}}},d=u,f=(a("8d0e"),a("2877")),p=Object(f["a"])(d,n,s,!1,null,null,null);e["default"]=p.exports},1018:function(t,e,a){"use strict";var n=a("7de4"),s=a.n(n);s.a},"10bd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentOrganization?a("div",[a("a-dropdown",{staticClass:"action-item",attrs:{placement:"bottomCenter"}},[a("div",{staticClass:"organization-select"},[a("span",[t._v(t._s(t.currentOrganization.name))]),a("a-icon",{style:{fontSize:"14px",marginLeft:"2px"},attrs:{type:"down"}})],1),a("a-menu",{staticClass:"middle-menu organization-menu",attrs:{slot:"overlay",selectable:!1},on:{click:t.organizationAction},slot:"overlay"},t._l(t.organizationList,(function(e,n){return a("a-menu-item",{key:n},[a("div",{staticClass:"muted flex ant-row-flex-middle"},[a("span",{staticClass:"text-default",attrs:{href:"javascript:;"}},[t._v(t._s(e.name))]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentOrganization.code==e.code,expression:"currentOrganization.code == organization.code"}],staticClass:"muted m-l-lg",attrs:{type:"check"}})],1)])})),1)],1)],1):t._e()},s=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("bd86")),r=a("5880"),o=a("c24f"),c=a("2f14");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={name:"HeaderSelect",data:function(){return{}},computed:u({},Object(r["mapState"])({currentOrganization:function(t){return t.currentOrganization},organizationList:function(t){return t.organizationList}})),methods:{organizationAction:function(t){var e=this;Object(o["d"])(e.organizationList[t.key]).then((function(a){Object(c["a"])(a)&&e.$router.replace("/home/"+e.organizationList[t.key].code),console.log(a)}))}}},f=d,p=a("2877"),m=Object(p["a"])(f,n,s,!1,null,null,null);e["default"]=m.exports},"14f0":function(t,e,a){"use strict";var n=a("e895"),s=a.n(n);s.a},"2bbb":function(t,e,a){},"2cc5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{loading:t.loading,"body-style":{padding:"20px 24px 8px"},bordered:!1}},[a("div",{staticClass:"chart-card-header"},[a("div",{staticClass:"meta"},[a("span",{staticClass:"chart-card-title"},[t._v(t._s(t.title))]),a("span",{staticClass:"chart-card-action"},[t._t("action")],2)]),a("div",{staticClass:"total"},[a("span",[t._v(t._s(t.total))])])]),a("div",{staticClass:"chart-card-content"},[a("div",{staticClass:"content-fix"},[t._t("default")],2)]),a("div",{staticClass:"chart-card-footer"},[a("div",{staticClass:"field"},[t._t("footer")],2)])])},s=[],i={name:"ChartCard",props:{title:{type:String,default:""},total:{type:String,default:""},loading:{type:Boolean,default:!1}}},r=i,o=(a("3ccc"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,"5d7cd69f",null);e["default"]=c.exports},"341e":function(t,e,a){"use strict";var n=a("bf91"),s=a.n(n);s.a},"397c":function(t,e,a){},"3ccc":function(t,e,a){"use strict";var n=a("2bbb"),s=a.n(n);s.a},"422d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-popover",{attrs:{trigger:"click",placement:"bottomRight",overlayStyle:{width:"300px"}}},[a("template",{slot:"content"},[a("a-spin",{attrs:{spinning:t.loadding}},[a("a-tabs",t._l(t.tabs,(function(t,e){return a("a-tab-pane",{key:e,attrs:{tab:t.title}})})),1)],1)],1),a("span",{staticClass:"header-notice",on:{click:t.fetchNotice}},[a("a-badge",{attrs:{count:"12"}},[a("a-icon",{staticStyle:{"font-size":"16px",padding:"4px"},attrs:{type:"bell"}})],1)],1)],2)},s=[],i={name:"HeaderNotice",props:{tabs:{type:Array,default:null,required:!0}},data:function(){return{loadding:!1}},methods:{fetchNotice:function(){var t=this;this.loadding?this.loadding=!1:(this.loadding=!0,setTimeout((function(){t.loadding=!1}),2e3))}}},r=i,o=(a("9416"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,"00884375",null);e["default"]=c.exports},4677:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userLayout"},[n("div",{staticClass:"container"},[n("div",{staticClass:"top"},[n("div",{staticClass:"header"},[n("a-badge",[n("a",{attrs:{href:"/"}},[n("img",{staticClass:"logo",attrs:{src:a("bae8"),alt:"logo"}}),n("span",{staticClass:"title"},[t._v("Pear Project")])])])],1),n("div",{staticClass:"desc"},[t._v(t._s(t.desc))])]),n("router-view"),t._t("default"),t._m(0)],2)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[a("div",{staticClass:"copyright"},[t._v("Copyright © 2019 Pear Project")])])}],i={name:"UserLayout",props:{desc:{type:[String],default:function(){return"欢迎使用Pear Project项目管理系统"}}}},r=i,o=(a("598b"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=c.exports},"4b21":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-page"},[a("div",{staticClass:"exception"},[a("div",{staticClass:"imgBlock"},[a("div",{staticClass:"img-exception"},[t._t("img")],2)]),a("div",{staticClass:"content"},[a("h1",[t._v(t._s(t.code))]),a("div",{staticClass:"desc"},[t._v(t._s(t.desc))]),a("div",{staticClass:"actions"},[a("router-link",{attrs:{to:t.url}},[a("Button",{attrs:{type:"primary"}},[t._v(t._s(t.urlText))])],1)],1)])])])},s=[],i=a("4e72"),r=a("68fe"),o=Object(r["a"])("currentOrganization",!0),c={components:{Button:i["Button"]},props:{code:{default:"500"},desc:{default:"抱歉，服务器出错了"},url:{default:o?"/home/"+o.code:"/home"},urlText:{default:"返回首页"}},data:function(){return{}}},l=c,u=(a("dc31"),a("2877")),d=Object(u["a"])(l,n,s,!1,null,null,null);e["default"]=d.exports},"598b":function(t,e,a){"use strict";var n=a("fc76"),s=a.n(n);s.a},6073:function(t,e,a){},"6c2d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rank"},[a("h4",{staticClass:"title"},[t._v(t._s(t.title))]),a("ul",{staticClass:"list"},t._l(t.list,(function(e,n){return a("li",{key:n},[a("span",{class:n<3?"active":null},[t._v(t._s(n+1))]),a("span",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.total))])])})),0)])},s=[],i={name:"RankList",props:{title:{type:String,default:""},list:{type:Array,default:null}}},r=i,o=(a("1018"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,"7fdef012",null);e["default"]=c.exports},7796:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-mini-progress"},[a("div",{staticClass:"target",style:{left:t.target+"%"}},[a("span",{style:{backgroundColor:t.color}}),a("span",{style:{backgroundColor:t.color}})]),a("div",{staticClass:"progress-wrapper"},[a("div",{staticClass:"progress",style:{backgroundColor:t.color,width:t.percentage+"%",height:t.height}})])])},s=[],i=(a("c5f6"),{name:"MiniProgress",props:{target:{type:Number,default:0},height:{type:String,default:"10px"},color:{type:String,default:"#ffd401"},percentage:{type:Number,default:0}}}),r=i,o=(a("341e"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,"deb555ae",null);e["default"]=c.exports},"7de4":function(t,e,a){},"8d0e":function(t,e,a){"use strict";var n=a("b389"),s=a.n(n);s.a},9416:function(t,e,a){"use strict";var n=a("6073"),s=a.n(n);s.a},9840:function(t,e,a){},ab2f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showHeader?a("div",{staticClass:"page-header"},[t.breadCrumbInfo.length>0&&t.breadCrumb?a("div",{staticClass:"breadcrumb"},[a("a-breadcrumb",[a("a-breadcrumb-item",[a("router-link",{attrs:{to:"/home"}},[t._v("首页")])],1),a("a-breadcrumb-item",[t._v(t._s(t.breadCrumbInfo[2].title))]),a("a-breadcrumb-item",[t._v(t._s(t.breadCrumbInfo[1].title))]),a("a-breadcrumb-item",[t._v(t._s(t.breadCrumbInfo[0].title))])],1)],1):t._e(),a("div",{staticClass:"detail"},[a("div",{staticClass:"main"},[a("div",{staticClass:"row"},[""!=t.pageTitle.trim()&&t.showTitle?a("h1",{staticClass:"title"},[t._v(t._s(t.pageTitle))]):t.showTitle?a("h1",{staticClass:"title"},[t._v(t._s(t.defaultPageTitle))]):t._e(),a("div",{staticClass:"action"},[t._t("action")],2)]),a("div",{staticClass:"row"},[this.$slots.content?a("div",{staticClass:"content"},[t._t("content")],2):t._e(),this.$slots.extra?a("div",{staticClass:"extra"},[t._t("extra")],2):t._e()])])])]):a("div",{staticClass:"page-header page-header-none"}),a("div",{staticClass:"page-header page-header-none"}),a("div",{staticClass:"wrapper-main"},[a("div",{staticClass:"wrapper-content",class:{hidden:t.pageLoading}},[a("div",{staticClass:"layout-content"},[this.$slots.contentTitle||this.$slots.contentAction?a("div",{staticClass:"content-title"},[t._t("contentTitle"),a("div",{staticClass:"content-action"},[t._t("contentAction")],2)],2):t._e(),t._t("default")],2)])])])},s=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("7618"),o=a("5880"),c=a("68fe"),l=a("2f14"),u=a("2fc4");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p=u["a"].Item,m={components:{ABreadcrumb:u["a"],ABreadcrumbItem:p},props:{pageTitle:{default:""},showTitle:{default:!0},showHeader:{default:!0},breadCrumb:{default:!0}},mounted:function(){function t(e,a){for(var n in e)"object"===Object(r["a"])(e[n])?t(e[n],a):"name"===n&&e[n]===a&&(window.permission=!0)}var e=Object(c["a"])("auth_list",!0),a=$("a[permission]");a&&$.each(a,(function(a,n){var s=$(n).attr("permission");window.permission=!1,t(e,s),window.permission||$(n).remove()})),this.$nextTick((function(){var t=Object(l["f"])("wrapper-main");if(t.length>1)for(var e=0;e<t.length-1;e++)t[e].style.display="none"}))},computed:f({},Object(o["mapState"])({pageLoading:function(t){return t.pageLoading},breadCrumbInfo:function(t){return t.menu.breadCrumbInfo}}),{defaultPageTitle:{get:function(){return this.$route.meta.info.title}},wrapper_content_class:function(){}}),destroyed:function(){this.$nextTick((function(){for(var t=Object(l["f"])("wrapper-main"),e=0;e<t.length;e++)t[e].removeAttribute("style")}))}},v=m,b=a("2877"),g=Object(b["a"])(v,n,s,!1,null,null,null);e["default"]=g.exports},af47:function(t,e,a){"use strict";var n=a("397c"),s=a.n(n);s.a},b389:function(t,e,a){},bd87:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-setting"},[a("div",{staticClass:"layout-item left"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"search-type"},[a("a-menu",{attrs:{mode:"inline",selectedKeys:t.keys},on:{click:t.menuClick}},[a("a-menu-item",{key:"base"},[a("span",[t._v("基本设置")])]),a("a-menu-item",{key:"security"},[a("span",[t._v("安全设置")])])],1)],1)])])])},s=[],i={name:"accountSetting",props:{keys:{type:Array,default:function(){return["base"]}}},methods:{menuClick:function(t){var e=t.key,a="";switch(e){case"base":a="/account/setting/base";break;case"security":a="/account/setting/security"}this.$router.push(a)}}},r=i,o=(a("af47"),a("2877")),c=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=c.exports},bf91:function(t,e,a){},dc31:function(t,e,a){"use strict";var n=a("9840"),s=a.n(n);s.a},e84e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-popover",{attrs:{overlayClassName:"header-notice",trigger:"click",placement:"bottomRight"},model:{value:t.showNotice,callback:function(e){t.showNotice=e},expression:"showNotice"}},[n("template",{slot:"content"},[n("a-spin",{attrs:{spinning:t.loading}},[n("a-tabs",{staticClass:"header-notice-content",attrs:{tabBarGutter:25}},[n("a-tab-pane",{key:"1"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[t._v("\n            消息\n            "),t.total&&t.totalSum["message"]?n("span",[t._v("("+t._s(t.totalSum["message"])+")")]):t._e()]),t.total&&t.totalSum["message"]?[n("a-list",[t._l(t.list["message"],(function(e){return[n("a-list-item",{key:e.id},[n("a-list-item-meta",{attrs:{description:e.create_time}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("p",[t._v(t._s(e.title))]),n("p",{staticClass:"ant-list-item-meta-description",domProps:{innerHTML:t._s(e.content)}})]),n("a-avatar",{attrs:{slot:"avatar",src:e.avatar},slot:"avatar"})],1)],1)]}))],2),n("div",{staticClass:"footer-action"},[n("a",{staticClass:"item muted",on:{click:function(e){return t.setRead("message")}}},[t._v("清空消息")]),n("a",{staticClass:"item muted",on:{click:function(e){return t.showMore("1")}}},[t._v("查看更多")])])]:[n("div",{staticClass:"notFound"},[n("img",{attrs:{src:a("7e25"),alt:"not found"}}),n("div",[t._v("你已读完所有消息")])])]],2),n("a-tab-pane",{key:"2"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[t._v("\n            通知\n            "),t.total&&t.totalSum["notice"]?n("span",[t._v("("+t._s(t.totalSum["notice"])+")")]):t._e()]),t.total&&t.totalSum["notice"]?[n("a-list",[t._l(t.list["notice"],(function(e){return[n("a-list-item",{key:e.id},[n("a-list-item-meta",{attrs:{description:e.create_time}},[n("span",{attrs:{slot:"title"},slot:"title"},[n("p",{domProps:{innerHTML:t._s(e.title)}}),n("p",{staticClass:"ant-list-item-meta-description",domProps:{innerHTML:t._s(e.content)}})]),n("a-avatar",{staticStyle:{"background-color":"white"},attrs:{slot:"avatar",src:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png"},slot:"avatar"})],1)],1)]}))],2),n("div",{staticClass:"footer-action"},[n("a",{staticClass:"item muted",on:{click:function(e){return t.setRead("notice")}}},[t._v("清空通知")]),n("a",{staticClass:"item muted",on:{click:function(){t.$router.push("/notify/notice")}}},[t._v("查看更多")])])]:[n("div",{staticClass:"notFound"},[n("img",{attrs:{src:a("5744"),alt:"not found"}}),n("div",[t._v("你已查看所有通知")])])]],2)],1)],1)],1),n("span",[n("a-badge",{attrs:{count:t.total}},[n("a-icon",{staticClass:"action-item",attrs:{type:"bell"}})],1)],1)],2)},s=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("5880"),o=a("64de"),c=a("97a8"),l=a("f1f5"),u=a("ca8d");a("81fe");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"HeaderNotice",data:function(){return{showNotice:!1,loading:!1,total:0,messageTotal:0,totalSum:0,list:[],task:{page:1,pageSize:5,total:0,list:[]}}},computed:f({},Object(r["mapState"])({socketAction:function(t){return t.socketAction},currentOrganization:function(t){return t.currentOrganization}})),watch:{socketAction:function(t){if("notice"===t.action)this.init();else if("task"===t.action){this.init();var e=Object(l["a"])(t.title,t.msg,{icon:t.data.notify.avatar});!1===e&&Object(c["b"])(t,"notice","info",10)}}},created:function(){this.init()},methods:{init:function(){this.fetchNotice()},fetchNotice:function(){var t=this;Object(o["e"])().then((function(e){t.list=e.data.list,t.messageTotal=e.data.total,t.total=t.messageTotal+t.task.total,t.totalSum=e.data.totalSum}))},setRead:function(t){switch(this.total-=this.list[t].length,this.list[t]=[],t){case"message":this.totalSum.message=0,Object(o["a"])()}},showMore:function(t){switch(t){default:this.showNotice=!1,this.$router.push("/notify/notice")}},getTasks:function(){var t=this;Object(u["o"])({page:this.task.page,pageSize:this.task.pageSize}).then((function(e){t.task.list=e.data.list,t.task.total=e.data.total,t.total=t.messageTotal+t.task.total}))},formatTime:function(t){return moment(t).format("YY年MM月DD日 HH:mm")},showDiff:function(t,e){var a=moment(t).diff(moment(e),"days");return a<=0?(a=moment(t).diff(moment(e),"hours"),a+="小时"):a+="天",a}}},m=p,v=(a("14f0"),a("2877")),b=Object(v["a"])(m,n,s,!1,null,null,null);e["default"]=b.exports},e895:function(t,e,a){},fc76:function(t,e,a){}}]);