(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6326676d","chunk-6326676d"],{"13d2":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-select",{attrs:{value:e.arrayValue,mode:"multiple",placeholder:e.placeholder},on:{change:e.onChange}},e._l(e.options,(function(t,l){return a("a-select-option",{key:l,attrs:{value:t.value}},[e._v("\n    "+e._s(t.text||t.label)+"\n  ")])})),1)},n=[],i=(a("28a5"),{name:"JSelectMultiple",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},readOnly:{type:Boolean,required:!1,default:!1},options:{type:Array,required:!0},triggerChange:{type:Boolean,required:!1,default:!1}},data:function(){return{arrayValue:this.value?this.value.split(","):[]}},watch:{value:function(e){this.arrayValue=e?this.value.split(","):[]}},methods:{onChange:function(e){this.triggerChange?this.$emit("change",e.join(",")):this.$emit("input",e.join(","))}}}),r=i,s=a("2877"),o=Object(s["a"])(r,l,n,!1,null,null,null);t["default"]=o.exports},4165:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData},on:{change:e.onChange,search:e.onSearch}})},n=[],i=(a("ac4d"),a("8a81"),a("ac6a"),a("75fc")),r=(a("7f7f"),a("0fea")),s={name:"JTreeDict",data:function(){return{treeData:[],treeValue:null,url_root:"/sys/category/loadTreeRoot",url_children:"/sys/category/loadTreeChildren",url_view:"/sys/category/loadOne"}},props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},parentCode:{type:String,default:"",required:!1},field:{type:String,default:"id",required:!1},root:{type:Object,required:!1,default:function(){return{pid:"0"}}},async:{type:Boolean,default:!1,required:!1},disabled:{type:Boolean,default:!1,required:!1}},watch:{root:{handler:function(e){console.log("root-change",e)},deep:!0},parentCode:{handler:function(){this.loadRoot()}},value:{handler:function(){this.loadViewInfo()}}},created:function(){this.loadRoot(),this.loadViewInfo()},model:{prop:"value",event:"change"},methods:{loadViewInfo:function(){var e=this;if(this.value&&"0"!=this.value){var t={field:this.field,val:this.value};Object(r["getAction"])(this.url_view,t).then((function(t){t.success&&(e.treeValue={value:e.value,label:t.result.name})}))}else this.treeValue=null},loadRoot:function(){var e=this,t={async:this.async,pcode:this.parentCode};Object(r["getAction"])(this.url_root,t).then((function(t){t.success?(e.handleTreeNodeValue(t.result),console.log("aaaa",t.result),e.treeData=Object(i["a"])(t.result)):e.$message.error(t.message)}))},asyncLoadTreeData:function(e){var t=this;return new Promise((function(a){if(t.async)if(e.$vnode.children)a();else{var l=e.$vnode.key,n={pid:l};Object(r["getAction"])(t.url_children,n).then((function(e){e.success&&(t.handleTreeNodeValue(e.result),t.addChildren(l,e.result,t.treeData),t.treeData=Object(i["a"])(t.treeData)),a()}))}else a()}))},addChildren:function(e,t,a){if(a&&a.length>0){var l=!0,n=!1,i=void 0;try{for(var r,s=a[Symbol.iterator]();!(l=(r=s.next()).done);l=!0){var o=r.value;if(o.key==e){t&&0!=t.length?o.children=t:o.leaf=!0;break}this.addChildren(e,t,o.children)}}catch(c){n=!0,i=c}finally{try{l||null==s.return||s.return()}finally{if(n)throw i}}}},handleTreeNodeValue:function(e){var t="code"==this.field?"code":"key",a=!0,l=!1,n=void 0;try{for(var i,r=e[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var s=i.value;s.value=s[t],s.isLeaf=!!s.leaf,s.children&&s.children.length>0&&this.handleTreeNodeValue(s.children)}}catch(o){l=!0,n=o}finally{try{a||null==r.return||r.return()}finally{if(l)throw n}}},onChange:function(e){console.log(e),this.$emit("change",e.value),this.treeValue=e},onSearch:function(e){console.log(e)},getCurrTreeData:function(){return this.treeData}}},o=s,c=a("2877"),u=Object(c["a"])(o,l,n,!1,null,null,null);t["default"]=u.exports},"6b87":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-table",e._g(e._b({attrs:{rowKey:e.rowKey,columns:e.columns,dataSource:e.dataSource,expandedRowKeys:e.expandedRowKeys},on:{expand:e.handleExpand,expandedRowsChange:function(t){e.expandedRowKeys=t}},scopedSlots:e._u([e._l(e.slots,(function(t){return{key:t,fn:function(a,l,n){return[e._t(t,null,null,{text:a,record:l,index:n})]}}}))],null,!0)},"a-table",e.tableAttrs,!1),e.$listeners))},n=[],i=a("bd86"),r=(a("ac4d"),a("8a81"),a("ac6a"),a("0fea")),s={name:"JTreeTable",props:{rowKey:{type:String,default:"id"},queryKey:{type:String,default:"parentId"},queryParams:{type:Object,default:function(){return{}}},topValue:{type:String,default:null},columns:{type:Array,required:!0},url:{type:String,required:!0},childrenUrl:{type:String,default:null},tableProps:{type:Object,default:function(){return{}}},immediateRequest:{type:Boolean,default:!0},condition:{type:String,default:"",required:!1}},data:function(){return{dataSource:[],expandedRowKeys:[]}},computed:{getChildrenUrl:function(){return this.childrenUrl?this.childrenUrl:this.url},slots:function(){var e=[],t=!0,a=!1,l=void 0;try{for(var n,i=this.columns[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var r=n.value;r.scopedSlots&&r.scopedSlots.customRender&&e.push(r.scopedSlots.customRender)}}catch(s){a=!0,l=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw l}}return e},tableAttrs:function(){return Object.assign(this.$attrs,this.tableProps)}},watch:{queryParams:{deep:!0,handler:function(){this.loadData()}}},created:function(){this.immediateRequest&&this.loadData()},methods:{loadData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.topValue,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.url;this.$emit("requestBefore",{first:a}),a&&(this.expandedRowKeys=[]);var n=Object.assign({},this.queryParams||{});return n[this.queryKey]=t,this.condition&&this.condition.length>0&&(n["condition"]=this.condition),Object(r["getAction"])(l,n).then((function(t){var l=[];if(t.result instanceof Array)l=t.result;else{if(!(t.result.records instanceof Array))throw"返回数据类型不识别";l=t.result.records}var n=l.map((function(t){if(!0===t.hasChildren){var a,l,n=!0,r=!1,s=void 0;try{for(var o,c=e.columns[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value;if(l=u.dataIndex,l)break}}catch(h){r=!0,s=h}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}var d=(a={id:"".concat(t.id,"_loadChild")},Object(i["a"])(a,l,"loading..."),Object(i["a"])(a,"isLoading",!0),a);t.children=[d]}return t}));return a&&(e.dataSource=n),e.$emit("requestSuccess",{first:a,dataSource:n,res:t}),Promise.resolve(n)})).finally((function(){return e.$emit("requestFinally",{first:a})}))},handleExpand:function(e,t){e&&!0===t.children[0].isLoading&&this.loadData(t.id,!1,this.getChildrenUrl).then((function(e){0===e.length?t.children=null:t.children=e}))}}},o=s,c=a("2877"),u=Object(c["a"])(o,l,n,!1,null,"ba3bd2be",null);t["default"]=u.exports},"81ac":function(e,t,a){"use strict";var l=a("a6cf"),n=a.n(l);n.a},"8c6e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"j-super-query-box"},[a("div",{on:{click:function(t){e.visible=!0}}},[e._t("default",[e.superQueryFlag?a("a-tooltip",{attrs:{mouseLeaveDelay:.2}},[a("template",{slot:"title"},[a("span",[e._v("已有高级查询条件生效")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleReset}},[e._v("清空")])],1),a("a-button",{attrs:{type:"primary"}},[a("a-icon",{attrs:{type:"appstore",theme:"twoTone",spin:!0}}),a("span",[e._v("高级查询")])],1)],2):a("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:function(t){e.visible=!0}}},[e._v("高级查询")])])],2),a("a-modal",{staticClass:"j-super-query-modal",staticStyle:{top:"5%","max-height":"95%"},attrs:{title:"高级查询构造器",width:1e3,visible:e.visible,mask:!1},on:{cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("div",{staticStyle:{float:"left"}},[a("a-button",{attrs:{loading:e.loading},on:{click:e.handleReset}},[e._v("重置")]),a("a-button",{attrs:{loading:e.loading},on:{click:e.handleSave}},[e._v("保存查询条件")])],1),a("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[e._v("关闭")]),a("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleOk}},[e._v("查询")])],1),a("a-spin",{attrs:{spinning:e.loading}},[a("a-row",[a("a-col",{attrs:{sm:24,md:19}},[0===e.queryParamsModel.length?a("a-empty",[a("div",{attrs:{slot:"description"},slot:"description"},[a("span",[e._v("没有任何查询条件")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleAdd}},[e._v("点击新增")])],1)]):a("a-form",{attrs:{layout:"inline"}},[a("a-form-item",{staticStyle:{"margin-bottom":"12px"},attrs:{label:"过滤条件匹配"}},[a("a-select",{attrs:{getPopupContainer:function(e){return e.parentNode}},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[a("a-select-option",{attrs:{value:"and"}},[e._v("AND（所有条件都要求匹配）")]),a("a-select-option",{attrs:{value:"or"}},[e._v("OR（条件中的任意一个匹配）")])],1)],1),e._l(e.queryParamsModel,(function(t,l){return a("a-row",{key:l,staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",treeData:e.fieldTreeData,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:"选择查询字段",allowClear:"",treeDefaultExpandAll:"",getPopupContainer:function(e){return e.parentNode}},on:{select:function(a,l){return e.handleSelected(l,t)}},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"item.field"}})],1),a("a-col",{attrs:{span:4}},[a("a-select",{attrs:{placeholder:"匹配规则",getPopupContainer:function(e){return e.parentNode}},model:{value:t.rule,callback:function(a){e.$set(t,"rule",a)},expression:"item.rule"}},[a("a-select-option",{attrs:{value:"eq"}},[e._v("等于")]),a("a-select-option",{attrs:{value:"ne"}},[e._v("不等于")]),a("a-select-option",{attrs:{value:"gt"}},[e._v("大于")]),a("a-select-option",{attrs:{value:"ge"}},[e._v("大于等于")]),a("a-select-option",{attrs:{value:"lt"}},[e._v("小于")]),a("a-select-option",{attrs:{value:"le"}},[e._v("小于等于")]),a("a-select-option",{attrs:{value:"right_like"}},[e._v("以..开始")]),a("a-select-option",{attrs:{value:"left_like"}},[e._v("以..结尾")]),a("a-select-option",{attrs:{value:"like"}},[e._v("包含")]),a("a-select-option",{attrs:{value:"in"}},[e._v("在...中")])],1)],1),a("a-col",{attrs:{span:8}},[t.dictCode?["table-dict"===t.type?[a("j-popup",{attrs:{code:t.dictTable,field:t.dictCode,orgFields:t.dictCode,destFields:t.dictCode},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}})]:a("j-dict-select-tag",{attrs:{dictCode:t.dictCode,placeholder:"请选择"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}})]:"select-user"===t.type?a("j-select-multi-user",{attrs:{buttons:!1,multiple:!1,placeholder:"请选择用户",returnKeys:["id",t.customReturnField||"username"]},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"select-depart"===t.type?a("j-select-depart",{attrs:{multi:!1,placeholder:"请选择部门",customReturnField:t.customReturnField||"id"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):t.options instanceof Array?a("a-select",{attrs:{options:t.options,allowClear:"",placeholder:"请选择"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"date"==t.type?a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择日期"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"datetime"==t.type?a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择时间","show-time":!0,"date-format":"YYYY-MM-DD HH:mm:ss"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"int"==t.type||"number"==t.type?a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入数值"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):a("a-input",{attrs:{placeholder:"请输入值"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}})],2),a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{icon:"plus"},on:{click:e.handleAdd}}),e._v(" \n                "),a("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.handleDel(l)}}})],1)],1)}))],2)],1),a("a-col",{attrs:{sm:24,md:5}},[a("a-card",{staticClass:"j-super-query-history-card",attrs:{bordered:!0}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n              保存的查询\n            ")]),0===e.treeData.length?a("a-empty",{staticClass:"j-super-query-history-empty",attrs:{description:"没有保存任何查询"}}):a("a-tree",{staticClass:"j-super-query-history-tree",attrs:{showIcon:"",treeData:e.treeData},on:{select:e.handleTreeSelect,rightClick:e.handleTreeRightClick}})],1)],1)],1)],1),a("a-modal",{attrs:{title:"请输入保存的名称",visible:e.prompt.visible},on:{cancel:function(t){e.prompt.visible=!1},ok:e.handlePromptOk}},[a("a-input",{model:{value:e.prompt.value,callback:function(t){e.$set(e.prompt,"value",t)},expression:"prompt.value"}})],1)],2)],1)},n=[],i=(a("8e6e"),a("456d"),a("c5f6"),a("04ff"),a("bd86")),r=(a("ac6a"),a("ca00")),s=a("2dab"),o=a("fe54"),c=a("0f9d");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={name:"JSuperQuery",components:{JDate:s["default"],JSelectDepart:o["default"],JSelectMultiUser:c["default"]},props:{fieldList:{type:Array,required:!0},callback:{type:String,required:!1,default:"handleSuperQuery"},loading:{type:Boolean,default:!1},saveCode:{type:String,default:"testSaveCode"}},data:function(){var e=this.$createElement;return{fieldTreeData:[],prompt:{visible:!1,value:""},visible:!1,queryParamsModel:[{}],treeIcon:e("a-icon",{attrs:{type:"file-text"}}),treeData:[],saveCodeBefore:"JSuperQuerySaved_",selectValue:"and",superQueryFlag:!1}},watch:{saveCode:{immediate:!0,handler:function(e){var t=this,a=this.$ls.get(this.saveCodeBefore+e);a instanceof Array&&(this.treeData=a.map((function(e){return e.icon=t.treeIcon,e})))}},fieldList:{deep:!0,immediate:!0,handler:function(e){var t=[],a=[];e.forEach((function(e){var l=d({},e);l.label=l.label||l.text;var n=l.children instanceof Array;l.disabled=n,l.selectable=!n,n?(l.children=l.children.map((function(e){var t=d({},e);return t.label=t.label||t.text,t.label=l.label+"-"+t.label,t.value=l.value+","+t.value,t.val="",t})),l.val="",a.push(l)):t.push(l)})),this.fieldTreeData=t.concat(a)}}},methods:{show:function(){this.queryParamsModel&&0!=this.queryParamsModel.length||(this.queryParamsModel=[{}]),this.visible=!0},handleOk:function(){if(this.isNullArray(this.queryParamsModel))this.emitCallback();else{var e={matchType:this.selectValue,params:this.removeEmptyObject(r["c"](this.queryParamsModel))};console.log("---高级查询参数---\x3e",e),this.emitCallback(e.params,e.matchType)}},emitCallback:function(e,t){this.superQueryFlag=!!e,this.$emit(this.callback,e,t)},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},handleAdd:function(){this.queryParamsModel.push({})},handleDel:function(e){this.queryParamsModel.splice(e,1)},handleSelected:function(e,t){var a=e.dataRef,l=a.type,n=a.options,i=a.dictCode,r=a.dictTable,s=a.customReturnField;t["type"]=l,t["options"]=n,t["dictCode"]=i,t["dictTable"]=r,t["customReturnField"]=s,this.$set(t,"val",void 0)},handleReset:function(){this.superQueryFlag=!1,this.queryParamsModel=[{}],this.emitCallback()},handleSave:function(){var e=this.removeEmptyObject(r["c"](this.queryParamsModel));this.isNullArray(e)?this.$message.warning("空条件不能保存"):(this.prompt.value="",this.prompt.visible=!0)},handlePromptOk:function(){var e=this,t=this.prompt.value,a=this.treeData.filter((function(e){return e.title===t}));a.length>0?this.$confirm({content:"".concat(t," 已存在，是否覆盖？"),onOk:function(){e.prompt.visible=!1,a[0].records=e.removeEmptyObject(r["c"](e.queryParamsModel)),e.saveToLocalStore(),e.$message.success("保存成功")}}):(this.prompt.visible=!1,this.treeData.push({title:t,icon:this.treeIcon,records:this.removeEmptyObject(r["c"](this.queryParamsModel))}),this.saveToLocalStore(),this.$message.success("保存成功"))},handleTreeSelect:function(e,t){t.selectedNodes[0]&&(this.queryParamsModel=r["c"](t.selectedNodes[0].data.props.records))},handleTreeRightClick:function(e){var t=this;this.$confirm({content:"是否删除当前查询？",onOk:function(){var a=e.node.eventKey;t.treeData.splice(Number.parseInt(a.substring(2)),1),t.saveToLocalStore(),t.$message.success("删除成功")}})},saveToLocalStore:function(){this.$ls.set(this.saveCodeBefore+this.saveCode,this.treeData.map((function(e){return{title:e.title,records:e.records}})))},isNullArray:function(e){if(!e||0===e.length)return!0;if(1===e.length){var t=e[0];if(!t.field||null==t.val||""===t.val||!t.rule)return!0}return!1},removeEmptyObject:function(e){for(var t=0;t<e.length;t++){var a=e[t];null==a||Object.keys(a).length<=0?e.splice(t--,1):delete a.options}return e}}},f=h,p=(a("dd38"),a("2877")),m=Object(p["a"])(f,l,n,!1,null,"6bb0bfae",null);t["default"]=m.exports},a6cf:function(e,t,a){},ae14:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"dragDiv",staticClass:"drag"},[a("div",{staticClass:"drag_bg"}),a("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),a("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{border:"0.5px solid #fff",height:"34px",position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){return e.mousedownFn(t)}}})])},n=[],i={name:"JSlider",data:function(){return{beginClientX:0,mouseMoveStata:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},methods:{isSuccess:function(){return this.confirmSuccess},mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveStata=!0,this.beginClientX=e.clientX)},successFunction:function(){this.confirmSuccess=!0,this.confirmWords="验证通过",window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",(function(){})),document.getElementsByClassName("drag_text")[0].style.color="#fff",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px",this.$emit("onSuccess",!0)},mouseMoveFn:function(e){if(this.mouseMoveStata){var t=e.clientX-this.beginClientX;t>0&&t<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=t+"px",document.getElementsByClassName("drag_bg")[0].style.width=t+"px"):t>this.maxwidth&&this.successFunction()}},moseUpFn:function(e){this.mouseMoveStata=!1;var t=e.clientX-this.beginClientX;if(t<this.maxwidth){var a=document.getElementsByClassName("handler")[0];a&&(a.style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}}},mounted:function(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)}},r=i,s=(a("81ac"),a("2877")),o=Object(s["a"])(r,l,n,!1,null,"a5aa9694",null);t["default"]=o.exports},b098:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange,search:e.onSearch}})},n=[],i=a("7618"),r=(a("ac4d"),a("8a81"),a("ac6a"),a("75fc")),s=(a("28a5"),a("0fea")),o={name:"JTreeSelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},dict:{type:String,default:"",required:!1},pidField:{type:String,default:"pid",required:!1},pidValue:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1},hasChildField:{type:String,default:"",required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1}},data:function(){return{treeValue:null,treeData:[],url:"/sys/dict/loadTreeData",view:"/sys/dict/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},dict:function(){this.initDictInfo(),this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.initDictInfo(),e.loadRoot(),e.loadItemByCode()}))},methods:{loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(s["getAction"])("".concat(this.view).concat(this.dict),{key:this.value}).then((function(t){if(t.success){var a=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:a[t],value:a[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=null},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.$emit("change",this.value,e)},initDictInfo:function(){var e=this.dict.split(",");this.tableName=e[0],this.text=e[1],this.code=e[2]},asyncLoadTreeData:function(e){var t=this;return new Promise((function(a){if(e.$vnode.children)a();else{var l=e.$vnode.key,n={pid:l,tableName:t.tableName,text:t.text,code:t.code,pidField:t.pidField,hasChildField:t.hasChildField,condition:t.condition};Object(s["getAction"])(t.url,n).then((function(e){if(e.success){var n=!0,i=!1,s=void 0;try{for(var o,c=e.result[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value;u.value=u.key,0==u.leaf?u.isLeaf=!1:1==u.leaf&&(u.isLeaf=!0)}}catch(d){i=!0,s=d}finally{try{n||null==c.return||c.return()}finally{if(i)throw s}}t.addChildren(l,e.result,t.treeData),t.treeData=Object(r["a"])(t.treeData)}a()}))}}))},addChildren:function(e,t,a){if(a&&a.length>0){var l=!0,n=!1,i=void 0;try{for(var r,s=a[Symbol.iterator]();!(l=(r=s.next()).done);l=!0){var o=r.value;if(o.key==e){t&&0!=t.length?o.children=t:o.isLeaf=!0;break}this.addChildren(e,t,o.children)}}catch(c){n=!0,i=c}finally{try{l||null==s.return||s.return()}finally{if(n)throw i}}}},loadRoot:function(){var e=this,t={pid:this.pidValue,tableName:this.tableName,text:this.text,code:this.code,pidField:this.pidField,hasChildField:this.hasChildField,condition:this.condition};Object(s["getAction"])(this.url,t).then((function(t){if(t.success&&t.result){var a=!0,l=!1,n=void 0;try{for(var i,s=t.result[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;o.value=o.key,0==o.leaf?o.isLeaf=!1:1==o.leaf&&(o.isLeaf=!0)}}catch(c){l=!0,n=c}finally{try{a||null==s.return||s.return()}finally{if(l)throw n}}e.treeData=Object(r["a"])(t.result)}else console.log("数根节点查询结果-else",t)}))},onChange:function(e){e?e instanceof Array?(this.$emit("change",e.map((function(e){return e.value})).join(",")),this.treeValue=e):(this.$emit("change",e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue=null)},onSearch:function(e){console.log(e)},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(a,l){if(t)try{var n=JSON.parse(t);console.log("aaaaasdsdd",Object(i["a"])(n)),"object"==Object(i["a"])(n)&&n?a():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),l())}catch(r){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),l()}else a()}))}},model:{prop:"value",event:"change"}},c=o,u=a("2877"),d=Object(u["a"])(c,l,n,!1,null,null,null);t["default"]=d.exports},c79e:function(e,t,a){},cf74:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("\n    "+e._s(e.text)+"\n  ")],1)],1)},n=[],i=(a("7f7f"),a("28a5"),a("a481"),a("3b2b"),a("9fb0")),r=a("0fea"),s="all",o="image",c="file",u=function(){return"-"+parseInt(1e4*Math.random()+1,10)},d=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},h={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["uploadURL"]+"/sys/common/upload",urlDownload:window._CONFIG["staticDomainURL"],headers:{},fileList:[],newFileList:[]}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:s},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0}},watch:{value:function(e){e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}},created:function(){try{var e=Vue.ls.get(i["a"]);this.headers={"X-Access-Token":e}}catch(t){console.log(t)}},methods:{initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],a=0;a<e.length;a++)t.push({uid:u(),name:e[a].fileName,status:"done",url:e[a].filePath,response:{status:"history",message:e[a].filePath}});this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],a=e.split(","),l=0;l<a.length;l++){var n=Object(r["getFileAccessHttpUrl"])(a[l],this.urlDownload,"http");t.push({uid:u(),name:d(a[l]),status:"done",url:n,response:{status:"history",message:a[l]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var a=[],l=0;l<e.length;l++)a.push(e[l].response.message);a.length>0&&(t=a.join(",")),this.$emit("change",t)},beforeUpload:function(e){var t=e.type;if(t===o){if(t.indexOf("image")<0)return this.$message.warning("请上传图片"),!1}else if(t===c&&t.indexOf("image")>=0)return this.$message.warning("请上传文件"),!1;return!0},handleChange:function(e){var t=this;console.log("--文件列表改变--");var a=e.fileList;"done"===e.file.status?e.file.response.success&&(a=a.map((function(e){if(e.response){var a=e.response.message;e.url=Object(r["getFileAccessHttpUrl"])(a,t.urlDownload,"http")}return e}))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=a,"done"!==e.file.status&&"removed"!==e.file.status||(this.returnUrl?this.handlePathChange():a=a.filter((function(e){return!!e.response&&!0===e.response.success})).map((function(e){var a={fileName:e.name,filePath:e.response.message,fileSize:e.size};t.newFileList.push(a),t.$emit("change",t.newFileList)})))},handleDelete:function(e){console.log(e)}},model:{prop:"value",event:"change"}},f=h,p=a("2877"),m=Object(p["a"])(f,l,n,!1,null,"0f95ccd1",null);t["default"]=m.exports},dd38:function(e,t,a){"use strict";var l=a("c79e"),n=a.n(l);n.a}}]);